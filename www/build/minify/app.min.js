angular.module("starter",["ionic","ngCordova","ngAnimate","ds.clock","auth0","ngMap","nvd3","ngLetterAvatar","toastr"]).run(["$ionicPlatform","$window","$rootScope","$cordovaStatusbar","$cordovaSQLite","StorageService","$location","auth",function(e,t,o,n,a,r,i,s){s.hookEvents(),e.ready(function(){window.plugins.OneSignal.startInit("d98b487a-66ce-4118-a715-2b4a9d6dd5ec").handleNotificationOpened(function(e){console.log("notificationOpenedCallback: "+JSON.stringify(e))}).endInit(),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),n.show()}),o.db=window.openDatabase("rasasayang.db","1.0","Your App",2e12),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Stores (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,STORE_NM TEXT,ACCESS_ID TEXT,UUID TEXT,PLAYER_ID TEXT,PROVINCE_ID INTEGER,PROVINCE_NM TEXT,CITY_ID INTEGER,CITY_NAME TEXT,ALAMAT TEXT,PIC TEXT,TLP TEXT,FAX TEXT,STATUS INTEGER,START TEXT, END TEXT,DCRP_DETIL TEXT,INDUSTRY_ID INTEGER,INDUSTRY_NM TEXT,INDUSTRY_GRP_ID INTEGER,INDUSTRY_GRP_NM TEXT,LONGITUDE TEXT,LATITUDE TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Transaksis (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,ACCESS_ID TEXT,CASHIER_NAME TEXT,OPENCLOSE_ID TEXT,TRANS_ID TEXT,SPLIT_TRANS_ID TEXT,TRANS_DATE TEXT,TOTAL_PRODUCT INTEGER,SUB_TOTAL_HARGA INTEGER,PPN INTEGER,TOTAL_HARGA INTEGER,TYPE_PAY_ID INTEGER,TYPE_PAY_NM TEXT,BANK_ID INTEGER,BANK_NM TEXT,MERCHANT_ID TEXT,MERCHANT_NM TEXT,MERCHANT_NO TEXT,CONSUMER_ID INTEGER,CONSUMER_NM TEXT,CONSUMER_EMAIL TEXT,CONSUMER_PHONE TEXT,STATUS INTEGER,DCRP_DETIL TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_ShopCart (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,TRANS_DATE TEXT,ACCESS_GROUP TEXT,ACCESS_ID TEXT,GOLONGAN TEXT,STORE_ID TEXT,TRANS_TYPE INTEGER,TRANS_ID TEXT,PRODUCT_ID TEXT,PRODUCT_NM TEXT,PRODUCT_PROVIDER TEXT,PRODUCT_PROVIDER_NO TEXT,PRODUCT_PROVIDER_NM TEXT,UNIT_ID TEXT,UNIT_NM TEXT,HARGA_JUAL INTEGER,DISCOUNT TEXT,QTY_INCART INTEGER,PROMO TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Product_Groups (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,ACCESS_GROUP TEXT,STORE_ID TEXT,GROUP_ID TEXT,GROUP_NM TEXT,STATUS INTEGER,NOTE TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Products (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,GROUP_ID TEXT,GROUP_NM TEXT,PRODUCT_ID TEXT,PRODUCT_QR TEXT,PRODUCT_NM TEXT,CURRENT_STOCK TEXT,HARGA_JUAL INTEGER,DISCOUNT INTEGER,PRODUCT_WARNA TEXT,PRODUCT_SIZE TEXT,PRODUCT_SIZE_UNIT TEXT,PRODUCT_HEADLINE TEXT,UNIT_ID TEXT,UNIT_NM TEXT,STOCK_LEVEL INTEGER,INDUSTRY_ID INTEGER,INDUSTRY_NM TEXT,INDUSTRY_GRP_ID INTEGER,INDUSTRY_GRP_NM TEXT,PROMO TEXT,STATUS INTEGER,DCRP_DETIL TEXT,IMG_FILE TEXT,IS_FAVORITE INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Product_Stocks (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,ID_SERVER INTEGER,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,PRODUCT_ID TEXT,LAST_STOCK INTEGER,INPUT_STOCK INTEGER,CURRENT_STOCK INTEGER,SISA_STOCK INTEGER,INPUT_DATE TEXT,INPUT_TIME TEXT,CURRENT_DATE TEXT,CURRENT_TIME TEXT,DCRP_DETIL TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Product_Images (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,PRODUCT_ID TEXT,PRODUCT_IMAGE TEXT,STATUS INTEGER,DCRP_DETIL TEXT,IS_ONSERVER INT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Customers (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,CUSTOMER_ID TEXT,NAME TEXT,EMAIL TEXT,PHONE TEXT,DCRP_DETIL TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Merchants(ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,TYPE_PAY_ID INTEGER,TYPE_PAY_NM TEXT,BANK_ID INTEGER,BANK_NM TEXT,MERCHANT_ID TEXT,MERCHANT_NO TEXT,MERCHANT_NM TEXT,MERCHANT_TOKEN TEXT,MERCHANT_URL TEXT,DCRP_DETIL TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_MerchantTypes(ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,TYPE_PAY_ID INTEGER,TYPE_PAY_NM TEXT,DCRP_DETIL TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_MerchantBanks(ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,BANK_ID INTEGER,BANK_NM TEXT,DCRP_DETIL TEXT,STATUS INTEGER,IS_ONSERVER INT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Karyawans (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,KARYAWAN_ID TEXT,NAMA_DPN TEXT,NAMA_TGH TEXT,NAMA_BLK TEXT,KTP TEXT,TMP_LAHIR TEXT,TGL_LAHIR TEXT,GENDER TEXT,ALAMAT TEXT,STS_NIKAH TEXT,TLP TEXT,HP TEXT,EMAIL TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_KaryawanAbsensis (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,OFLINE_ID TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,KARYAWAN_ID TEXT,TGL TEXT,WAKTU TEXT,LATITUDE TEXT,LONGITUDE TEXT,STATUS INTEGER,DCRP_DETIL,ABSEN_IMAGE TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_OpenCloseBook (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,ACCESS_ID TEXT,OPENCLOSE_ID TEXT,SPLIT_OPENCLOSE_ID TEXT,TGL_OPEN TEXT,TGL_CLOSE TEXT,CASHINDRAWER INTEGER,ADDCASH INTEGER,SELLCASH INTEGER,TOTALCASH INTEGER,TOTALCASH_ACTUAL INTEGER,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_SaveBill (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,ACCESS_ID TEXT,TRANS_ID TEXT,ALIAS_TRANS_ID TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Setoran (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,ACCESS_GROUP TEXT,STORE_ID TEXT,ACCESS_ID TEXT,OPENCLOSE_ID TEXT,SPLIT_OPENCLOSE_ID TEXT,TGL_STORAN TEXT,TOTALCASH INTEGER,NOMINAL_STORAN INTEGER,SISA_STORAN INTEGER,BANK_NM TEXT,BANK_NO TEXT,CREATE_AT TEXT,STATUS INTEGER,DCRP_DETIL TEXT,STORAN_IMAGE TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Provinsis (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,PROVINCE_ID INTEGER,PROVINCE TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_Kotas (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,PROVINCE_ID INTEGER,PROVINCE TEXT,CITY_ID INTEGER,CITY_NAME TEXT,TYPE TEXT,POSTAL_CODE INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_SyncLocal (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,NAMA_TABEL TEXT,PRIMARY_KEY TEXT,TYPE_ACTION INTEGER,STATUS_SYNC INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_PPOBHeader (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,HEADER_ID TEXT,HEADER_NM TEXT,HEADER_DCRP TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_PPOBDetail (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,HEADER_ID TEXT,HEADER_NM TEXT,PROVIDER_ID INTEGER,PROVIDER_NM TEXT,DETAIL_ID TEXT,DETAIL_NM TEXT,DETAIL_DCRP TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_PPOBNominals (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,ID_SERVER INTEGER,ACCESS_GROUP TEXT,STORE_ID TEXT,DETAIL_ID TEXT,KODE TEXT,KETERANGAN TEXT,NOMINAL TEXT,HARGA_KG INTEGER,HARGA_JUAL INTEGER,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_PPOBGroups (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,KELOMPOK_ID TEXT,KELOMPOK TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_PPOBKategoris (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,KELOMPOK_ID TEXT,KELOMPOK TEXT,KTG_ID INTEGER,KTG_NM TEXT,KETERANGAN TEXT,STATUS INTEGER)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_PPOBProducts (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,CODE TEXT,DENOM INTEGER,HARGA_JUAL INTEGER,ID_CODE INTEGER,ID_PRODUK TEXT,KELOMPOK TEXT,KTG_ID INTEGER,KTG_NM TEXT,NAME TEXT,TYPE_NM TEXT)"),a.execute(o.db,"CREATE TABLE IF NOT EXISTS Tbl_ShopCartPPOB (ID_LOCAL INTEGER PRIMARY KEY AUTOINCREMENT,TGL_SAVE TEXT,TRANS_DATE TEXT,ACCESS_GROUP TEXT,ACCESS_ID TEXT,STORE_ID TEXT,TRANS_ID TEXT,PEMBAYARAN,MSISDN TEXT,ID_PELANGGAN TEXT,CODE TEXT,DENOM INTEGER,HARGA_JUAL INTEGER,ID_CODE INTEGER,ID_PRODUK TEXT,KELOMPOK TEXT,KTG_ID INTEGER,KTG_NM TEXT,NAME TEXT,TYPE_NM TEXT,STATUS_BELI INTEGER)"),t.screen.width>760?r.set("screenbesar",!0):r.set("screenbesar",!1),o.$on("$stateChangeStart",function(e,t,o,n){r.get("advanced-profile")||(i.path("/auth/login"),console.log())})}]).config(["$sceDelegateProvider","$ionicConfigProvider","$ionicConfigProvider","authProvider","toastrConfig",function(e,t,t,o,n){angular.extend(n,{autoDismiss:!0,containerId:"toast-container",maxOpened:1,newestOnTop:!0,positionClass:"toast-bottom-center",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body",progressBar:!0,closeButton:!1,timeOut:3e3}),o.init({domain:"kontrolgampang.auth0.com",clientID:"5u9uQKCQdeusiA8jwbYldiDqREs4A5h2",callbackURL:location.href,loginState:"auth.login"}),e.resourceUrlWhitelist(["self",new RegExp("^(http[s]?)://(w{3}.)?youtube.com/.+$")]),t.tabs.position("bottom"),t.navBar.alignTitle("center"),t.views.maxCache(0)}]).controller("AppCtrl",["ConnectivityMonitor","TemplateService","MenuService","StorageService","SecuredFac","UtilService","$ionicActionSheet","$cordovaCamera","$cordovaImagePicker","$location","$ionicLoading","$timeout","$ionicHistory","$scope",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p){p.$on("$ionicView.beforeEnter",function(){t.ChangeTemplate()}),e.isOnline(),e.startWatching();var m=r.GetParameters();p.profileops=n.get("advanced-profile"),p.userusername=m.username,p.userimages="img/save-image.png",a.GetImageUserOps(m).then(function(e){p.userimages=e.ACCESS_IMAGE}),"OWNER"==p.profileops.ACCESS_LEVEL?p.groups=o.GetMenuAdmin():"OPS"==p.profileops.ACCESS_LEVEL&&(p.groups=o.GetMenuOperasional()),p.changeprofile=function(){i.show({titleText:"Ambil Gambar Melalui?",buttons:[{text:'<i class="icon ion-image"></i> Galeri'},{text:'<i class="icon ion-ios-camera-outline"></i> Kamera'}],buttonClicked:function(e){return 0==e?document.addEventListener("deviceready",function(){c.getPictures({maximumImagesCount:1,width:800,height:800,quality:80}).then(function(e){for(var t=0;t<e.length;t++)p.userimages=e[t],window.plugins.Base64.encodeFile(p.userimages,function(e){l.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){var t=r.GetParameters();t.ACCESS_IMAGE=e,a.CreateImageUserOps(t).then(function(e){p.userimages=t.ACCESS_IMAGE}).finally(function(){l.hide()})})})})},!1):1==e&&document.addEventListener("deviceready",function(){var e=r.CameraOptions();s.getPicture(e).then(function(e){l.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){var t=r.GetParameters();t.ACCESS_IMAGE="data:image/jpeg;base64,"+e,a.CreateImageUserOps(t).then(function(e){p.userimages=t.ACCESS_IMAGE}).finally(function(){l.hide()})})})},!1),!0}})},p.logout=function(){n.destroy("advanced-profile"),n.destroy("basic-parameters"),l.show({template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>',duration:1e3}),d(function(){l.hide(),T.clearCache(),T.clearHistory(),T.nextViewOptions({disableBack:!0,historyRoot:!0}),u.path("/auth/login")},1500)},p.toggleGroup=function(e){e.items&&p.isGroupShown(e)?p.shownGroup=null:p.shownGroup=e},p.isGroupShown=function(e){return p.shownGroup===e}}]),angular.module("starter").service("ChartService",["$window",function(e){return{GetPieChartOptions:function(){return{type:"pieChart",height:350,x:function(e){return e.label},y:function(e){return e.value},showLabels:!0,duration:500,labelThreshold:.01,labelSunbeamLayout:!0,labelType:"value",donut:!1,valueFormat:function(e){return d3.format(",.0f")(e)}}},GetBarHorizontalOptions:function(){return{type:"multiBarHorizontalChart",height:350,x:function(e){return e.label},y:function(e){return e.value},showControls:!0,showValues:!0,valueFormat:function(e){return d3.format(",.0f")(e)},duration:500,xAxis:{showMaxMin:!1},yAxis:{axisLabel:"Qty",tickValues:"",tickFormat:function(e){return d3.format(",.0f")(e)}}}},GetBarVerticalOptions:function(){return{chart:{type:"discreteBarChart",height:350,width:null,margin:{left:0},x:function(e){return e.label},y:function(e){return e.value},showValues:!0,valueFormat:function(e){return d3.format(",.0f")(e)},duration:500,xAxis:{axisLabel:"Produk",valueFormat:function(e){return d3.format(",.0f")(e)}},showYAxis:!1}}},GetDummyData:function(){return[{jumlahtransaksiyangdibayarkanmelalui:[{label:"TUNAI",value:32},{label:"KARTU DEBIT",value:100},{label:"KARTU KREDIT",value:120}]},{totalrupiahtransaksiyangdibayarkanmelalui:[{label:"TUNAI",value:12e6},{label:"KARTU DEBIT",value:3e7},{label:"KARTU KREDIT",value:5e6}]},{top5quantityprodukyangterjual:[{label:"Product A",value:10},{label:"Product B",value:50},{label:"Product C",value:100},{label:"Product D",value:200},{label:"Product E",value:500}]},{top5quantitykalihargaproduct:[{label:"Product A",value:1e4},{label:"Product B",value:5e4},{label:"Product C",value:1e5},{label:"Product D",value:2e5},{label:"Product E",value:5e5}]},{daylyproductyangterjual:[{namaproduct:"Product A",qty_product:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product B",qty_product:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product C",qty_product:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product D",qty_product:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product E",qty_product:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product F",qty_product:10,harga_product:1e4,sub_total:1e5}]},{sisastockdaylyberjalan:[{namaproduct:"Product A",sisa_stock:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product B",sisa_stock:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product C",sisa_stock:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product D",sisa_stock:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product E",sisa_stock:10,harga_product:1e4,sub_total:1e5},{namaproduct:"Product F",sisa_stock:10,harga_product:1e4,sub_total:1e5}]}]}}}]),angular.module("starter").service("ConstructorService",["$q","$http","$filter","StorageService","UtilService",function(e,t,o,n,a){return{StoreConstructor:function(){var e=a.GetParameters();return e.START=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),e.END=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),e},ProductConstructor:function(e){var t=e[e.length-1],o=a.GetParameters();return o.PRODUCT_ID=o.STORE_ID+"."+a.StringPad(Number(t.id)+1,"0000"),o},CustomerConstructor:function(e){var t=e[e.length-1],o=a.GetParameters();return o.CUSTOMER_ID=Number(t.CUSTOMER_ID)+1,o},MerchantConstructor:function(e){var t=e[e.length-1],o=a.GetParameters();return angular.isDefined(t.id)?o.MERCHANT_ID=o.STORE_ID+"."+a.StringPad(Number(t.id)+1,"0000"):o.MERCHANT_ID=o.STORE_ID+"."+a.StringPad(Number(t.MERCHANT_ID.split(".")[2])+1,"0000"),o},MerchantBankConstructor:function(e){var t=e[e.length-1],o=a.GetParameters();return angular.isDefined(t.id)?o.BANK_ID=Number(t.id)+1:o.BANK_ID=Number(t.BANK_ID)+1,o},MerchantTypeConstructor:function(e){var t=e[e.length-1],o=a.GetParameters();return angular.isDefined(t.id)?o.TYPE_PAY_ID=Number(t.id)+1:o.TYPE_PAY_ID=Number(t.BANK_ID)+1,o},TransaksiHeaderConstructor:function(){var e=n.get("advanced-profile").PROFILE,t=e.NM_DEPAN;e.NM_TENGAH&&null!=e.NM_TENGAH&&"null"!=e.NM_TENGAH&&(t=t+" "+e.NM_TENGAH),e.NM_BELAKANG&&null!=e.NM_BELAKANG&&"null"!=e.NM_BELAKANG&&(t=t+" "+e.NM_BELAKANG);var r=a.GetParameters();return r.CASHIER_NAME=t,r.TRANS_DATE=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),r.TOTAL_PRODUCT=0,r.SUB_TOTAL_HARGA=0,r.PPN=0,r.TOTAL_HARGA=0,r.TYPE_PAY_ID=1,r.TYPE_PAY_NM="TUNAI",r.BANK_ID=null,r.BANK_NM=null,r.MERCHANT_ID=null,r.MERCHANT_NM=null,r.MERCHANT_NO=null,r.CONSUMER_ID=null,r.CONSUMER_NM="--",r.CONSUMER_EMAIL="--",r.CONSUMER_PHONE="--",r.STATUS=0,r},ProductAddToShopCart:function(e){var t={};return t.TGL_SAVE=o("date")(new Date,"yyyy-MM-dd"),t.TRANS_DATE=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),t.ACCESS_GROUP=e.ACCESS_GROUP,t.STORE_ID=e.STORE_ID,t.GOLONGAN=e.GOLONGAN,t.PRODUCT_ID=e.PRODUCT_ID,t.PRODUCT_NM=e.PRODUCT_NM,t.PRODUCT_PROVIDER=e.PRODUCT_PROVIDER,t.PRODUCT_PROVIDER_NO=e.PRODUCT_PROVIDER_NO,t.PRODUCT_PROVIDER_NM=e.PRODUCT_PROVIDER_NM,t.UNIT_ID=e.UNIT_ID,t.UNIT_NM=e.UNIT_NM,t.TRANS_TYPE=0,t.HARGA_JUAL=Number(e.HARGA_JUAL),t.DISCOUNT=Number(e.DISCOUNT),t.QTY_INCART=Number(e.QTY_INCART),t.PROMO=e.PROMO,t.STATUS=0,t.IS_ONSERVER=0,t},OpenCloseBookConstructor:function(){var e=a.GetParameters();return e.OPENCLOSE_ID=null,e.TGL_OPEN=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),e.TGL_CLOSE=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),e.CASHINDRAWER=0,e.ADDCASH=0,e.SELLCASH=0,e.TOTALCASH=0,e.TOTALCASH_ACTUAL=0,e.STATUS=2,e.WITHDRAW=0,e.IS_OPEN=1,e.IS_CLOSE=0,e.statusapakahsama="true",e},SetoranConstructor:function(e){var t=a.GetParameters();return t.OPENCLOSE_ID=e.OPENCLOSE_ID,t.SPLIT_OPENCLOSE_ID=e.OPENCLOSE_ID.split(".")[2],t.TGL_STORAN=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),t.TOTALCASH=e.TOTALCASH,t.NOMINAL_STORAN=e.TOTALCASH_ACTUAL,t.SISA_STORAN=0,t.BANK_NM=null,t.BANK_NO=null,t.CREATE_AT=o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),t.STATUS=2,t.DCRP_DETIL="SETORAN UNTUK CLOSING ID "+e.OPENCLOSE_ID,t.STORAN_IMAGE="img/save-image.png",t},AbsensiContructor:function(e){var t=a.GetParameters();return t.OFLINE_ID=o("date")(new Date,"yyyyMMddHHmmss"),t.KARYAWAN_ID=e.KARYAWAN_ID,t.TGL=o("date")(new Date,"yyyy-MM-dd"),t.WAKTU=o("date")(new Date,"HH:mm:ss"),t.STATUS=0,t.DCRP_DETIL=null,t.ABSEN_IMAGE=null,t.LATITUDE=null,t.LONGITUDE=null,t},ProductStockConstructor:function(){var e=a.GetParameters(),t={ID:5};return t.TGL_SAVE=o("date")(new Date,"yyyy-MM-dd"),t.ACCESS_GROUP=e.ACCESS_GROUP,t.STORE_ID=e.STORE_ID,t.PRODUCT_ID=null,t.INPUT_STOCK=15,t.LAST_STOCK=12,t.CURRENT_STOCK=15,t.SISA_STOCK=16,t.INPUT_DATE=o("date")(new Date,"yyyy-MM-dd"),t.INPUT_TIME=o("date")(new Date,"HH:mm:ss"),t.CURRENT_DATE=o("date")(new Date,"yyyy-MM-dd"),t.CURRENT_TIME=o("date")(new Date,"HH:mm:ss"),t.STATUS=1,t.DCRP_DETIL="Ada Ada Saja",t.IS_ONSERVER=0,t},ProductGroupConstructor:function(e,t){var o={};if(o.ACCESS_GROUP=e.ACCESS_GROUP,o.STORE_ID=e.STORE_ID,t){var n=a.StringPad(Number(t.split(".")[2])+1,"00000");o.GROUP_ID=e.STORE_ID+"."+n}else o.GROUP_ID=e.STORE_ID+".00001";return o.GROUP_NM=null,o.STATUS=1,o.NOTE="Catatan Untuk Product Group",o}}}]),angular.module("starter").service("MaintenanceService",["toastr","$cordovaToast",function(e,t){return{TestMaintenance:function(e){switch(e){case"feedpaper":case"printstatus":case"printbill":case"turnonall":case"turnoffall":case"redlight":case"greenlight":case"yellowlight":case"bluelight":case"blueandredlight":case"openscanner":case"initfrontscanner":case"initbackscanner":case"startscanner":case"stopscanner":case"closescanner":case"blueandredlight":case"normalbeeper":case"errorbeeper":case"intervalbeeper":case"timeoutbeeper":console.log(e)}}}}]),angular.module("starter").service("MenuService",["$window","$q","PPOBLiteFac",function(e,t,o){return{GetMenuOperasional:function(){return[{name:"Kasir",icons:"ion-ios-compose",path:"#/tab/sales"},{name:"Mutasi",icons:"ion-ios-color-filter-outline",items:[{child:"BUKA BUKU",path:"#/tab/openbook"},{child:"TUTUP BUKU",path:"#/tab/closebook"},{child:"SETORAN",path:"#/tab/setoranbook"}]},{name:"Laporan",icons:"ion-cash",items:[{child:"RINGKASAN",path:"#/tab/accounting-summary"},{child:"TRANSAKSI",path:"#/tab/accounting-transaksi"}]},{name:"Karyawan",icons:"ion-person-stalker",items:[{child:"ABSENSI HARIAN",path:"#/tab/employe/absensi"},{child:"LAPORAN HARIAN",path:"#/tab/employe/laporan-daily"}]},{name:"Kontrol",icons:"ion-wrench",items:[{child:"PRODUK",path:"#/tab/control/product"},{child:"LOG",path:"#/tab/logoffline"}]},{name:"Setelan",icons:"ion-gear-a",path:"#/tab/settings"}]},GetMenuAdmin:function(){return[{name:"Kasir",icons:"ion-ios-compose",path:"#/tab/sales"},{name:"Mutasi",icons:"ion-ios-color-filter-outline",items:[{child:"BUKA BUKU",path:"#/tab/openbook"},{child:"TUTUP BUKU",path:"#/tab/closebook"},{child:"SETORAN",path:"#/tab/setoranbook"}]},{name:"Laporan",icons:"ion-cash",items:[{child:"RINGKASAN",path:"#/tab/accounting-summary"},{child:"TRANSAKSI",path:"#/tab/accounting-transaksi"},{child:"REFUND",path:"#/tab/accounting-refund"}]},{name:"Karyawan",icons:"ion-person-stalker",items:[{child:"ABSENSI HARIAN",path:"#/tab/employe/absensi"},{child:"LAPORAN HARIAN",path:"#/tab/employe/laporan-daily"},{child:"LAPORAN BULANAN",path:"#/tab/employe/laporan-monthly"}]},{name:"Kontrol",icons:"ion-wrench",items:[{child:"TOKO",path:"#/tab/control/stores"},{child:"PRODUK",path:"#/tab/control/product"},{child:"PEMBAYARAN IURAN",path:"#/tab/control/iuran"},{child:"LOG",path:"#/tab/logoffline"}]},{name:"Setelan",icons:"ion-gear-a",items:[{child:"PROFILE",path:"#/tab/settings/profile"},{child:"TEMPLATE",path:"#/tab/settings/template"},{child:"KASIR",path:"#/tab/settings/toko"},{child:"DEVICE",path:"#/tab/settings/device"}]},{name:"Maintenance",icons:"ion-gear-a",path:"#/tab/maintenance"}]},GetMenuPPOB:function(){var e=t.defer();return o.GetHeaders().then(function(t){angular.forEach(t,function(e,t){e.icons="ion-ios-compose",o.GetDetailsByHeaderID(e).then(function(t){angular.forEach(t,function(e,t){o.GetNominalsByDetailID(e).then(function(t){e.DAFTAR_NOMINAL=t})}),e.items=t})}),e.resolve(t)}),e.promise},GetMenuRevisiPPOB:function(){var e=t.defer();return o.GetGroups().then(function(t){angular.forEach(t,function(e,t){e.icons="ion-ios-compose",o.GetKategorisByGroupID(e).then(function(t){angular.forEach(t,function(e,t){o.GetProductsByKategoriID(e).then(function(t){e.DAFTAR_NOMINAL=t})}),e.items=t})}),e.resolve(t)}),e.promise},GetMenuMaintenance:function(){return[{name:"Printer",icons:"ion-ios-color-filter-outline",items:[{child:"Feed Paper",aliasfunc:"feedpaper"},{child:"Printer Status",aliasfunc:"printstatus"},{child:"Print Bill",aliasfunc:"printbill"}]},{name:"LED",icons:"ion-ios-color-filter-outline",items:[{child:"Turn on All",aliasfunc:"turnonall"},{child:"Turn off All",aliasfunc:"turnoffall"},{child:"Operate Red Light",aliasfunc:"redlight"},{child:"Operate Green Light",aliasfunc:"greenlight"},{child:"Operate Yellow Light",aliasfunc:"yellowlight"},{child:"Operate Blue Light",aliasfunc:"bluelight"},{child:"Turn on Blue and Red Lights",aliasfunc:"blueandredlight"}]},{name:"WIFI",icons:"ion-ios-color-filter-outline",items:[{child:"Open",aliasfunc:"openwifi"},{child:"Close",aliasfunc:"closewifi"},{child:"Get WIFI List",aliasfunc:"listwifi"},{child:"Get WIFI Info",aliasfunc:"infowifi"},{child:"Config WIFI",aliasfunc:"configwifi"},{child:"Get Config List",aliasfunc:"configwifilist"},{child:"Is Config Exist",aliasfunc:"configexistwifi"}]},{name:"Scan",icons:"ion-ios-color-filter-outline",items:[{child:"Open Scanner",aliasfunc:"openscanner"},{child:"Init Scanner(Front Camera)",aliasfunc:"initfrontscanner"},{child:"Init Scanner(Back Camera)",aliasfunc:"initbackscanner"},{child:"Start Scan",aliasfunc:"startscanner"},{child:"Stop Scan",aliasfunc:"stopscanner"},{child:"Close Scanner",aliasfunc:"closescanner"}]},{name:"Beeper",icons:"ion-ios-color-filter-outline",items:[{child:"Normal",aliasfunc:"normalbeeper"},{child:"Error",aliasfunc:"errorbeeper"},{child:"Interval",aliasfunc:"intervalbeeper"},{child:"Beep 2s",aliasfunc:"timeoutbeeper"}]}]}}}]),angular.module("starter").service("PollingService",["MerchantsFac","MerchantsLiteFac","ShopCartLiteFac","TransaksiCombFac","TransaksisFac","TransaksisLiteFac","ProductsFac","ProductsLiteFac","$rootScope","$window","$q","$http","$filter","UtilService",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p){return{SyncServerToLocal:function(o){var n=p.GetParameters();angular.forEach(o,function(o,a){if("TBL_STOCK"==o.NM_TABLE)(u={}).STORE_ID=o.STORE_ID,u.ACCESS_GROUP=o.ACCESS_GROUP,u.ACCESS_ID=n.ACCESS_ID,u.PRODUCT_ID=o.PRIMARIKEY_VAL,u.ID=o.PRIMARIKEY_ID,u.NM_TABLE=o.NM_TABLE,i.GetProductsByProductID(u).then(function(e){e.TGL_SAVE=T("date")(new Date,"yyyy-MM-dd"),e.STORE_ID=n.STORE_ID,s.UpdateProductsQuantity(e).then(function(e){c.$broadcast("update-notifproduct")})});else if("TBL_PRODUCT"==o.NM_TABLE)1==o.TYPE_ACTION?((r={}).PRODUCT_ID=o.PRIMARIKEY_VAL,r.TGL_SAVE=T("date")(new Date,"yyyy-MM-dd"),s.GetProductByProductID(r).then(function(e){var t={};t.STORE_ID=o.STORE_ID,t.ACCESS_GROUP=o.ACCESS_GROUP,t.ACCESS_ID=n.ACCESS_ID,t.PRODUCT_ID=o.PRIMARIKEY_VAL,t.NM_TABLE=o.NM_TABLE,i.GetProductsByProductID(t).then(function(t){t.ACCESS_GROUP=n.ACCESS_GROUP,t.STORE_ID=n.STORE_ID,t.TGL_SAVE=n.TGL_SAVE,t.CURRENT_STOCK=t.CURRENT_STOCK,t.HARGA_JUAL=t.CURRENT_PRICE,t.DISCOUNT=t.CURRENT_DISCOUNT,t.PROMO=t.CURRENT_PROMO,t.IS_FAVORITE=0,t.IS_ONSERVER=1,0==e.length&&s.CreateProducts(t,"FROM-SERVER").then(function(e){c.$broadcast("update-notifproduct")})})})):2==o.TYPE_ACTION?((r={}).PRODUCT_ID=o.PRIMARIKEY_VAL,r.TGL_SAVE=T("date")(new Date,"yyyy-MM-dd"),s.GetProductByProductID(r).then(function(e){if(e.length>0){var t={};t.STORE_ID=o.STORE_ID,t.ACCESS_GROUP=o.ACCESS_GROUP,t.ACCESS_ID=n.ACCESS_ID,t.PRODUCT_ID=o.PRIMARIKEY_VAL,t.NM_TABLE=o.NM_TABLE,i.GetProductsByProductID(t).then(function(t){t.ID_LOCAL=e[0].ID_LOCAL,t.ACCESS_GROUP=n.ACCESS_GROUP,t.STORE_ID=n.STORE_ID,t.TGL_SAVE=n.TGL_SAVE,t.CURRENT_STOCK=t.CURRENT_STOCK,t.HARGA_JUAL=t.CURRENT_PRICE,t.DISCOUNT=t.CURRENT_DISCOUNT,t.PROMO=t.CURRENT_PROMO,t.IMG_FILE=t.IMG_FILE,t.IS_FAVORITE=0,s.UpdateProducts(t,"FROM-SERVER").then(function(e){console.log("Broadcast Product Update"),c.$broadcast("update-notifproduct")},function(e){console.log(e)})},function(e){console.log(e)})}},function(e){console.log(e)})):3==o.TYPE_ACTION&&console.log(o);else if("TBL_SYNC_QTY"==o.NM_TABLE){var r;2==o.TYPE_ACTION?((r={}).PRODUCT_ID=o.PRIMARIKEY_VAL,r.TGL_SAVE=T("date")(new Date,"yyyy-MM-dd"),s.GetProductByProductID(r).then(function(e){if(e.length>0){var t={};t.STORE_ID=o.STORE_ID,t.ACCESS_GROUP=o.ACCESS_GROUP,t.ACCESS_ID=n.ACCESS_ID,t.PRODUCT_ID=o.PRIMARIKEY_VAL,t.NM_TABLE=o.NM_TABLE,i.GetProductsByProductID(t).then(function(t){t.ID_LOCAL=e[0].ID_LOCAL,t.ACCESS_GROUP=n.ACCESS_GROUP,t.STORE_ID=n.STORE_ID,t.TGL_SAVE=n.TGL_SAVE,t.CURRENT_STOCK=t.CURRENT_STOCK,t.CURRENT_STOCK<0&&(t.CURRENT_STOCK=0),t.HARGA_JUAL=t.CURRENT_PRICE,t.DISCOUNT=t.CURRENT_DISCOUNT,t.PROMO=t.CURRENT_PROMO,t.IMG_FILE=t.IMG_FILE,t.IS_FAVORITE=0,s.UpdateProducts(t,"FROM-SERVER").then(function(e){console.log("Broadcast Product Update"),c.$broadcast("update-notifproduct")},function(e){console.log(e)})},function(e){console.log(e)})}},function(e){console.log(e)})):3==o.TYPE_ACTION&&console.log(o)}else if("TBL_MERCHANT_TYPE"==o.NM_TABLE){if(1==o.TYPE_ACTION)(u={}).TYPE_PAY_ID=o.PRIMARIKEY_VAL,u.NM_TABLE=o.NM_TABLE,t.GetMerchantTypesByTypesID(u).then(function(o){0==o.length&&e.GetMerchantTypesByTypesID(u).then(function(e){e.TGL_SAVE=T("date")(new Date,"yyyy-MM-dd"),e.STATUS=p.SwitchStatus(e.STATUS),t.CreateMerchantTypes(e,"FROM-SERVER").then(function(e){console.log(e)},function(e){console.log(e)})},function(e){console.log(e)})},function(e){console.log(e)});else if(2==o.TYPE_ACTION||3==o.TYPE_ACTION){var u;(u={}).TYPE_PAY_ID=o.PRIMARIKEY_VAL,u.NM_TABLE=o.NM_TABLE,t.GetMerchantTypesByTypesID(u).then(function(o){o.length>0&&e.GetMerchantTypesByTypesID(u).then(function(e){e.TGL_SAVE=T("date")(new Date,"yyyy-MM-dd"),e.STATUS=p.SwitchStatus(e.STATUS),t.UpdateMerchantTypes(e,"FROM-SERVER").then(function(e){console.log(e)},function(e){console.log(e)})},function(e){console.log(e)})})}}else"TBL_PRODUCT_UNIT"==o.NM_TABLE&&(1==o.TYPE_ACTION||2==o.TYPE_ACTION||o.TYPE_ACTION)})}}}]),angular.module("starter").service("ProviderPrefixService",["$rootScope","$window","$q","$http","$filter","StorageService",function(e,t,o,n,a,r){return{GetPrefix:function(e){return"TELKOMSEL"==e?/^0811|0812|0813|0821|0822|0823|0851|0852|0853/:"INDOSAT"==e?/^0814|0815|0816|0855|0856|0857|0858/:"XL"==e?/^0817|0818|0819|0859|0877|0878|0879|999|998/:"AXIS"==e?/^0831|0832|0838/:"THREE"==e?/^0895|0896|0897|0898|0899/:"SMARTFREN"==e?/^0881|0882|0883|0884|0885|0886|0887|0888|0889/:void 0}}}]),angular.module("starter").service("StorageService",["$window",function(e){return{set:function(t,o){return e.localStorage.setItem(t,JSON.stringify(o))},get:function(e){return JSON.parse(localStorage.getItem(e))},destroy:function(t){return e.localStorage.removeItem(t)}}}]),angular.module("starter").service("TemplateService",["$rootScope","$window","$q","$http","$filter","StorageService",function(e,t,o,n,a,r){return{ChangeTemplate:function(){e.theme=r.get("template"),element=angular.element(document.querySelectorAll("ion-side-menu-content ion-header-bar")),element.removeClass("bar-positive"),element.removeClass("bar-balanced"),element.removeClass("bar-assertive"),element.removeClass("bar-calm"),element.removeClass("bar-dark"),e.theme?element.addClass(e.theme.headerstyle):(element.addClass("bar-balanced"),e.theme={name:"balanced",headerstyle:"bar-balanced",itemstyle:"item-balanced",buttonstyle:"button-balanced",img_display:"img/balanced.png"},r.set("template",e.theme))},PrintCashierTemplate:function(e,t,o,n){var r="";return r='<h1 align="center">'+t.STORE_NM+"</h1>",r+="<div>",r+='<div style="float:left;width:35vw;">No.Trans</div>',r+="<div>: "+t.SPLIT_TRANS_ID.split(".")[1]+"</div>",r+="</div>",r+="<div>",r+='<div style="float:left;width:35vw;">Kasir</div>',r+="<div>: "+t.username+"</div>",r+="</div>",r+="<div>",r+='<div style="float:left;width:35vw;">Waktu Beli</div>',r+="<div>: "+a("date")(new Date(t.TRANS_DATE),"dd-MM-yyyy HH:mm:ss")+"</div>",r+="</div>",r+="<div>",r+='<div style="float:left;width:35vw;">Pembayaran</div>',r+="<div>: "+t.TYPE_PAY_NM+"</div>",r+="</div></br>",angular.forEach(e,function(e,t){r+=0==t?'<div style="padding-top:5px;padding-bottom:5px;border-top: 3px solid rgba(1, 1, 1,1);">':'<div style="padding-top:5px;padding-bottom:5px;border-top: 1px solid rgba(1, 1, 1,1);">',r+='<div style="float:left;width:40vw;">'+(t+1),r+=t<9?".&nbsp;&nbsp;&nbsp;"+e.PRODUCT_NM+"</div>":"."+e.PRODUCT_NM+"</div>",r+='<div style="float:right;">'+a("number")(e.HARGA_JUAL)+" X "+e.QTY_INCART,e.HARGA_JUAL*e.QTY_INCART<1e5?r+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+a("number")(e.HARGA_JUAL*e.QTY_INCART)+"</div>":r+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+a("number")(e.HARGA_JUAL*e.QTY_INCART)+"</div>",r+="</div></br>"}),r+='<div style="padding-top:5px;padding-bottom:5px;border-top: 3px solid rgba(1, 1, 1,1);">',r+='<div style="float:left;width:35vw;">Sub Total</div>',r+='<div style="float:right;">'+a("number")(t.SUB_TOTAL_HARGA)+"</div>",r+="</div></br>",r+='<div style="padding-top:5px;padding-bottom:5px;">',r+='<div style="float:left;width:35vw;">PPN (10%)</div>',r+='<div style="float:right;">'+a("number")(t.PPN)+"</div>",r+="</div></br>",r+='<div style="padding-top:5px;padding-bottom:5px;border-top: 3px solid rgba(1, 1, 1,1);">',r+='<div style="float:left;width:35vw;">Grand Total</div>',r+='<div style="float:right;">'+a("number")(t.TOTAL_HARGA)+"</div>",r+="</div></br>",r+='<div style="padding-top:5px;padding-bottom:5px;">',r+='<div style="float:left;width:35vw;">Dibayarkan</div>',r+='<div style="float:right;">'+a("number")(n)+"</div>",r+="</div></br>",r+='<div style="padding-top:5px;padding-bottom:5px;border-top: 3px solid rgba(1, 1, 1,1);">',r+='<div style="float:left;width:35vw;">Kembalian</div>',r+='<div style="float:right;">'+a("number")(o)+"</div>",r+="</div></br>",r+='</br><h2 align="center">Anda Puas Kami Bahagia</h2></br></br>'}}}]),angular.module("starter").service("ToastService",["toastr","$cordovaToast",function(e,t){return{ShowToast:function(o,n){window.cordova&&window.cordova.plugins?t.show(o,"long","bottom"):"success"==n?e.success(o):"error"==n&&e.error(o)}}}]),angular.module("starter").service("UtilService",["$window","$q","$http","$filter","StorageService",function(e,t,o,n,a){return{ArrayChunk:function(e,t){for(var o=[],n=0;n<e.length;n+=t)o.push(e.slice(n,n+t));return o},ApiUrl:function(){return"http://production.kontrolgampang.com/"},DeleteKeyFromArrayObject:function(e,t){return angular.forEach(e,function(e,o){delete e[t]}),e},SumPriceQtyWithCondition:function(e,t,o,n){return e.reduce(function(e,a){return 1==a[n]?void 0==a[t]||void 0==a[o]?e+0:e+a[t]*a[o]:e+0},0)},SerializeObject:function(e){var t={};var o=function(e){var t=[];for(var o in e)if(e[o]instanceof Array)for(var n in e[o]){var a=e[o][n];for(var r in a)t.push(encodeURIComponent(o)+"["+n+"]["+encodeURIComponent(r)+"]="+encodeURIComponent(a[r]))}else t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")}(e);return t.serialized=o,t.config={headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;application/json;charset=utf-8;"}},t},SumPriceWithQty:function(e,t,o){return e.reduce(function(e,n){return void 0==n[t]||void 0==n[o]?e+0:e+n[t]*n[o]},0)},SumJustPriceOrQty:function(e,t){return e.reduce(function(e,o){return void 0==o[t]?e+0:e+o[t]},0)},JarakDuaTitik:function(e,t,o,n){var a=(e-o)*(Math.PI/180),r=(t-n)*(Math.PI/180),i=.5-Math.cos(r)/2+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*(1-Math.cos(a))/2;return 12742*Math.asin(Math.sqrt(i))*1e3},getTotalHariDalamSebulan:function(e){var t=new Date(e),o=t.getFullYear(),n=t.getMonth()+1;return new Date(o,n,0).getDate()},SqliteToArray:function(e){for(var t=e.rows.length,o=[],n=0;n<t;n++)o.push(e.rows.item(n));return o},SetGambarCheckinCheckout:function(e){var t=e,o=[];return angular.forEach(t,function(e,t){e.CHECKIN_TIME?e.CHECKOUT_TIME?(e.imagecheckout="asset/admin/dist/img/customer.jpg",e.STSCHECK_IN=1,e.STSCHECK_OUT=1):(e.imagecheckout="asset/admin/dist/img/customerlogo.jpg",e.STSCHECK_IN=1,e.STSCHECK_OUT=0):e.CHECKOUT_TIME?(e.imagecheckout="asset/admin/dist/img/customer.jpg",e.STSCHECK_IN=1,e.STSCHECK_OUT=1):(e.imagecheckout="asset/admin/dist/img/normal.jpg",e.STSCHECK_IN=0,e.STSCHECK_OUT=0),o.push(e)}),o},DiffTwoDateTime:function(e,t){var o=Math.abs(new Date(e)-new Date(t)),n=(parseInt(o%1e3/100),parseInt(o/1e3%60)),a=parseInt(o/6e4%60),r=parseInt(o/36e5%24);return(r=r<10?"0"+r:r)+":"+(a=a<10?"0"+a:a)+":"+(n=n<10?"0"+n:n)},StringPad:function(e,t){e=""+e;return t.substring(0,t.length-e.length)+e},CameraOptions:function(){var e={quality:50};return e.destinationType=Camera.DestinationType.DATA_URL,e.sourceType=Camera.PictureSourceType.CAMERA,e.allowEdit=!1,e.encodingType=Camera.EncodingType.JPEG,e.targetWidth=500,e.targetHeight=500,e.popoverOptions=CameraPopoverOptions,e.saveToPhotoAlbum=!1,e.correctOrientation=!0,e},PembayaranFunc:function(e){var t=[{yangdibayar:e}],o=Math.floor(e/1e3),n=Math.floor(e/2e3),a=Math.floor(e/5e3),r=(Math.floor(e%1e3),Math.floor(e%2e3),Math.floor(e%5e3),1e3*(o+1)),i=2e3*(n+1),s=5e3*(a+1);return-1==_.findIndex(t,{yangdibayar:r})&&t.push({yangdibayar:r}),-1==_.findIndex(t,{yangdibayar:i})&&t.push({yangdibayar:i}),-1==_.findIndex(t,{yangdibayar:s})&&t.push({yangdibayar:s}),t},GenerateNomorTransaksi:function(e,t){var o=a.get("nomortransaksiyangaktif");return o||(o=t.STORE_ID+"."+t.ACCESS_ID+"."+t.UUID+"."+n("date")(new Date,"yyMMddHHmmss"),a.set("nomortransaksiyangaktif",o),o)},CheckScreenSize:function(t){return t?t.width>760:e.screen.width>760},RenameKeyObject:function(e,t){var o={};return _.each(e,function(e,n){n=t[n]||n,o[n]=e}),o},GetParameters:function(){var e=a.get("advanced-profile"),t=a.get("basic-parameters");return t&&(t.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),t.STORE_ID=e.STORES_ACTIVE.STORE_ID,t.STORE_NM=e.STORES_ACTIVE.STORE_NM),t},GetCoinsPembayaran:function(){return[{nominal:100,alias:"100",jumlah:0,background:"#f44336"},{nominal:200,alias:"200",jumlah:0,background:"#514099"},{nominal:500,alias:"500",jumlah:0,background:"#33cd5f"},{nominal:1e3,alias:"1K",jumlah:0,background:"#886aea"},{nominal:2e3,alias:"2K",jumlah:0,background:"#444"},{nominal:5e3,alias:"5K",jumlah:0,background:"#444"},{nominal:1e4,alias:"10K",jumlah:0,background:"#f44336"},{nominal:2e4,alias:"20K",jumlah:0,background:"#514099"},{nominal:5e4,alias:"50K",jumlah:0,background:"#33cd5f"},{nominal:1e5,alias:"100K",jumlah:0,background:"#886aea"}]},SwitchStatus:function(e){var t=1;return"Deleted"==e?t=3:"Deactive"!=e&&"Disable"!=e||(t=0),t},CheckProperyObjectNullOrNotNull:function(e){var t=!1;return angular.forEach(e,function(e,o){null!==e&&""!==e&&0!=e||(t=!0)}),t},TwoArrayAsOneObject:function(e){var t=e.label,o=e.value,n=[];return angular.forEach(t,function(e,t){var a={};a.label=e,a.value=Number(o[t]),n.push(a)}),n},CheckModalExistOrNot:function(e){return!e||!e._isShown},MakeUnflatterArray:function(e,t){var o=[];return angular.forEach(e,function(e,n){var a=_.findIndex(o,{dataparent:e[t]});a<0?(parent={},parent.dataparent=e.TGL,parent.datachildren=[],parent.datachildren.push(e),o.push(parent)):o[a].datachildren.push(e)}),o},CheckTypePembelian:function(e){return"PAKET INTERNET"==e.KELOMPOK||"PULSA REGULER"==e.KELOMPOK?"PULSA":"PASCABAYAR"==e.KELOMPOK?"PASCABAYAR":"GAME ONLINE"==e.KELOMPOK?"GAMEONLINE":"PLN PREPAID"==e.KELOMPOK?"PLNPREPAID":"TV VOUCHER"==e.KELOMPOK&&"TVVOUCHER"}}}]),angular.module("starter").controller("AccountingRefundCtrl",["ProductsLiteFac","$cordovaDialogs","$cordovaToast","$scope","$ionicLoading","$ionicModal","$filter","UtilService","StorageService",function(e,t,o,n,a,r,i,s,c){n.screenbesar=s.CheckScreenSize(),window.addEventListener("orientationchange",function(){n.screenbesar=s.CheckScreenSize(screen),n.$apply()},!1),n.namatoko=c.get("advanced-profile").STORES_ACTIVE.STORE_NM,n.refundby={valuechoose:"PRODUK"};var u=s.GetParameters();n.loadproductitemforrefund=function(){e.GetProducts(u).then(function(e){n.itemincart=c.get("barangrefund"),n.itemincart||(n.itemincart=[]),angular.forEach(n.itemincart,function(t,o){var n=_.findIndex(e,{PRODUCT_ID:t.PRODUCT_ID});-1!=n&&(e[n].QTY_INCART=Number(t.QTY_INCART))}),n.databarangpenjualan=e},function(e){console.log(e)})},n.loadproductitemforrefund(),n.OpenModalAddToCart=function(e){n.itemasli=angular.copy(e),n.itemdecinc=angular.copy(e),n.itemdimodal=angular.copy(e),r.fromTemplateUrl("templates/sales/addtocart/modaladdtocart.html",{scope:n,animation:"fade-in-scale",backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){n.modaladdtocart=e,n.modaladdtocart.show(),angular.isDefined(n.itemdimodal.QTY_INCART)||(n.itemdimodal.QTY_INCART=0)})},n.CloseModalAddToCart=function(){var e=_.findIndex(n.databarangpenjualan,{PRODUCT_ID:n.itemdimodal.PRODUCT_ID}),t=_.findIndex(n.itemincart,{PRODUCT_ID:n.itemdimodal.PRODUCT_ID});n.databarangpenjualan[e]=n.itemdimodal,t>=0?n.itemincart[t].QTY_INCART=n.itemdimodal.QTY_INCART:n.itemincart.push(n.itemdimodal),c.set("barangrefund",n.itemincart),n.modaladdtocart.remove()},n.CancelModalAddToCart=function(){n.modaladdtocart.remove()},n.incdec=function(e){n.itemdimodal.QTY_INCART=Number(n.itemdimodal.QTY_INCART),"inc"==e?n.itemdimodal.QTY_INCART+=1:"dec"==e&&n.itemdimodal.QTY_INCART&&(n.itemdimodal.QTY_INCART-=1)},n.clearquantity=function(){n.itemdimodal.QTY_INCART=0},n.OpenModalItemRefund=function(){r.fromTemplateUrl("templates/accounting/modalitemrefund.html",{scope:n,animation:"fade-in-scale",backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){s.CheckModalExistOrNot(n.modalitemrefund);n.modalitemrefund=e,n.modalitemrefund.show()})},n.CloseModalItemRefund=function(){n.modalitemrefund.remove()},n.SubmitModalItemRefund=function(){t.confirm("Apakah Kamu Yakin Akan Melakukan Refund?",["Yes","Cancel"]).then(function(e){1==e&&(n.loadproductitemforrefund(),n.CloseModalItemRefund())})}}]).controller("AccountingTransaksiCtrl",["TransaksiCombFac","TransaksisFac","StoresCombFac","ShopCartLiteFac","$scope","$ionicPopup","$timeout","$ionicLoading","$filter","$ionicPopup","$ionicModal","UtilService","StorageService",function(e,t,o,n,a,r,i,s,c,r,u,l,d){a.$on("$ionicView.beforeEnter",function(){a.screenbesar=l.CheckScreenSize(),window.addEventListener("orientationchange",function(){a.screenbesar=l.CheckScreenSize(screen),a.$apply()},!1);var e=l.GetParameters();o.GetStores(e).then(function(e){a.stores=e,a.store=e[0]})}),a.openstorepopup=function(e){a.choiceview=e,a.choice={STORE_ID:a.choiceview.STORE_ID},r.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH TOKO?",scope:a,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){a.choice=angular.copy(a.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(a.stores,{STORE_ID:a.choice.STORE_ID}),o=angular.copy(a.stores[t]);a.store=o,a.headerdetail=void 0,i(function(){a.loadtransaksiheader(o)})}}]})},a.loadtransaksiheader=function(t){var o=l.GetParameters();t&&(o.STORE_ID=t.STORE_ID),e.GetTransaksiHeaders(o).then(function(e){a.datatransaksiheader=e;var t=a.datatransaksiheader.length;t>0&&a.showdetail(a.datatransaksiheader[t-1]),a.$broadcast("scroll.refreshComplete")})},a.loadtransaksiheader(),a.showdetail=function(t){a.isGroupShown(t)||(a.datayangdibeli=void 0,a.shownGroup=t,s.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!1}).then(function(){a.headerdetail=angular.copy(t),console.log(a.headerdetail);var o=l.GetParameters();o.TRANS_ID=t.TRANS_ID,e.GetTransaksiDetails(o).then(function(e){a.datayangdibeli=e})}).finally(function(){s.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',duration:1e3})}))},a.showmodaldetail=function(t){u.fromTemplateUrl("templates/accounting/modaldetailtransaksi.html",{scope:a,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){l.CheckModalExistOrNot(a.modaldetailtransaksi)&&(a.modaldetailtransaksi=o,a.modaldetailtransaksi.show()),a.headerdetail=angular.copy(t);var n=l.GetParameters();n.TRANS_ID=t.TRANS_ID,e.GetTransaksiDetails(n).then(function(e){a.datayangdibeli=e})}),a.shownGroup=t},a.closemodaltransaksidetail=function(){a.modaldetailtransaksi.remove()},a.isGroupShown=function(e){return a.shownGroup===e}}]).controller("AccountingSummaryCtrl",["StorageService","SummaryLiteFac","StoresFac","StoresCombFac","OpenCloseBookLiteFac","ChartService","UtilService","$ionicPopup","$filter","$window","$scope","$state","$location","$timeout","$ionicLoading","$ionicHistory",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f){l.$on("$ionicView.beforeEnter",function(){l.mode={valuechoose:"chart"},l.screenbesar=i.CheckScreenSize(),window.addEventListener("orientationchange",function(){l.screenbesar=i.CheckScreenSize(screen),l.$apply()},!1);var e=i.GetParameters();n.GetStores(e).then(function(e){l.stores=e,l.store=e[0]})}),l.openstorepopup=function(e){l.choiceview=e,l.choice={STORE_ID:l.choiceview.STORE_ID},s.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH TOKO?",scope:l,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){l.choice=angular.copy(l.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(l.stores,{STORE_ID:l.choice.STORE_ID}),o=angular.copy(l.stores[t]);l.store=o,p(function(){l.loaddatasummaryfunction(o)})}}]})},l.showdatacharting=!0,l.options={chart:r.GetPieChartOptions()},l.transitem=r.GetDummyData()[0].jumlahtransaksiyangdibayarkanmelalui,l.transrupiah=r.GetDummyData()[1].totalrupiahtransaksiyangdibayarkanmelalui,l.optionsbars=r.GetBarVerticalOptions(),l.top5qty=[{values:r.GetDummyData()[2].top5quantityprodukyangterjual}],l.top5rupiah=[{values:r.GetDummyData()[3].top5quantitykalihargaproduct}],l.productterjual=r.GetDummyData()[4].daylyproductyangterjual,l.loaddatasummaryfunction=function(e){var t=i.GetParameters();e&&("SEMUA TOKO"==e.STORE_NM?t.STORE_ID="":t.STORE_ID=e.STORE_ID),t.TRANS_DATE=t.TGL_SAVE,o.GetProductTerjual(t).then(function(e){console.log(e)},function(e){console.log(e)}).finally(function(){m&&m.hide()}),o.GetSummaryBaru(t).then(function(e){console.log(e)},function(e){console.log(e)}).finally(function(){m&&m.hide()})},l.loaddatasummaryfunction()}]).controller("AccountingSetoranCtrl",["OpenCloseBookCombFac","StoresCombFac","ConstructorService","UtilService","$ionicPopup","$cordovaToast","$cordovaDialogs","$filter","$ionicLoading","$ionicHistory","$ionicModal","$timeout","$scope","$state","$cordovaCamera",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m){T.$on("$ionicView.beforeEnter",function(){T.screenbesar=n.CheckScreenSize(),window.addEventListener("orientationchange",function(){T.screenbesar=n.CheckScreenSize(screen),T.$apply()},!1);var e=n.GetParameters();t.GetStores(e).then(function(e){T.stores=e,T.store=e[0]})}),T.openstorepopup=function(e){T.choiceview=e,T.choice={STORE_ID:T.choiceview.STORE_ID},a.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH TOKO?",scope:T,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){T.choice=angular.copy(T.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(T.stores,{STORE_ID:T.choice.STORE_ID}),o=angular.copy(T.stores[t]);T.store=o,T.loadsetoranbystore(o)}}]})},T.loadsetoranbystore=function(t){var o=n.GetParameters();t&&("SEMUA TOKO"==t.STORE_NM?o.STORE_ID="":o.STORE_ID=t.STORE_ID),e.GetSetoranBook(o).then(function(e){T.datasetorans=e,e.length>0&&T.showdetail(T.datasetorans[0])})},T.loadsetoranbystore(),T.showdetail=function(e){T.isGroupShown(e)||(T.shownGroup=e,c.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){T.setoran=e}).finally(function(){c.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',duration:100})}))},T.showmodadetailsetoran=function(e){T.shownGroup=e,l.fromTemplateUrl("templates/accounting/modaldetailsetoran.html",{scope:T,animation:"animated zoomInUp",hideDelay:1020}).then(function(t){T.setoran=angular.copy(e),T.modaldetailsetoran=t,T.modaldetailsetoran.show()})},T.closemodaldetailsetoran=function(){T.modaldetailsetoran.remove()},T.isGroupShown=function(e){return T.shownGroup===e},T.showmodalimage=function(){l.fromTemplateUrl("templates/openclosebook/modalimage.html",{scope:T,animation:"slide-in-up"}).then(function(e){T.modalimage=e,T.modalimage.show()})},T.closemodalimage=function(){T.modalimage.remove()}}]),angular.module("starter").controller("CashierCtrl",["$ionicActionSheet","ToastService","PPOBFac","PPOBCombFac","ProviderPrefixService","MenuService","OpenCloseBookLiteFac","OpenCloseBookCombFac","TransaksiCombFac","TransaksisLiteFac","MerchantsCombFac","CustomersCombFac","CustomersLiteFac","ProductsCombFac","ProductsLiteFac","ShopCartLiteFac","SaveToBillLiteFac","$cordovaBarcodeScanner","$cordovaDialogs","$cordovaToast","$ionicPopup","$ionicPopover","$window","$rootScope","$ionicHistory","$timeout","$ionicPosition","$scope","$state","$location","$ionicLoading","$ionicScrollDelegate","$ionicPopup","$ionicModal","$filter","UtilService","ConstructorService","StorageService","TemplateService",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,h,I,A,D,R,C,O,P,g,N,v,b,U,w,A,L,y,G,M,k,B){N.pakaippnatautidak={checked:!0},N.titleheader=k.get("advanced-profile").STORES_ACTIVE.STORE_NM,N.jumlahnilaideposit=5e4,r.GetMenuRevisiPPOB().then(function(e){N.groupsmenu=e}),N.toggleheaderGroup=function(e){e.items&&N.isheaderGroupShown(e)?N.shownGroup=null:N.shownGroup=e},N.isheaderGroupShown=function(e){return N.shownGroup===e},N.updateSelection=function(e,t,o){angular.forEach(t,function(t,n){t.checked=e==n,N.pelangganradio={valuechoose:o}})},N.screenbesar=G.CheckScreenSize(),window.addEventListener("orientationchange",function(){N.screenbesar=G.CheckScreenSize(screen),N.popovermenumore?N.popovermenumore.hide():N.popovermenuppob&&N.popovermenuppob.hide(),N.$apply()},!1),N.$on("$ionicView.beforeEnter",function(e){N.searchpelanggan={string:""},N.kirimkemail={valuechoose:"TIDAK"},N.alasan=[{todo:"REGULAR",checked:!0},{todo:"MEMBER",checked:!1}];var t=k.get("default-config");t?(N.gridornot={grid:t.grid},N.soundon={on:t.on}):(N.gridornot={grid:!0},N.soundon={on:!0}),N.modelayar={cashier:!0,pembelian:!1,pembayaran:!1,transfer:!1},U.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}).then(function(){var e=G.GetParameters();s.GetOpenCloseBook(e).then(function(e){return e}).then(function(e){var t=G.GetParameters();t.STATUS=2,i.GetOpenCloseBookWithStatus(t).then(function(e){if(angular.isArray(e)&&e.length>0){N.openbookdata=e[e.length-1],N.openbookdata.sudahopenbelum=!0,(t=G.GetParameters()).OPENCLOSE_ID=N.openbookdata.OPENCLOSE_ID,k.set("basic-parameters",t)}else{var t=G.GetParameters();N.openbookdata=M.OpenCloseBookConstructor(),N.openbookdata.OPENCLOSE_ID=t.STORE_ID+"."+y("date")(new Date,"yyMMddHHmmss"),N.openbookdata.SPLIT_OPENCLOSE_ID=N.openbookdata.OPENCLOSE_ID.split(".")[2],N.openbookdata.sudahopenbelum=!1}})}).then(function(){c.GetTransaksiHeaders(e).then(function(e){return e},function(e){console.log(e)})}).then(function(){p.GetProductGroups(e).then(function(e){N.productgroups=e},function(e){console.log(e)})}).then(function(){d.GetCustomers(e).then(function(e){N.datacustomers=e},function(e){console.log(e)})}).then(function(){l.GetMerchantTypes().then(function(e){N.typepembayarans=e,N.choicetypepembayarandefault=N.typepembayarans[0],N.provider={valuechoose:null}},function(e){console.log(e)})}).then(function(){l.GetMerchants(e).then(function(e){N.listmerchants=e},function(e){console.log(e)})}).then(function(){N.loadnomortransaksiheaders()}).finally(function(){U.hide()})})}),N.modalopenclosebookopen=function(){L.fromTemplateUrl("templates/sales/modalopenclosebook.html",{scope:N,backdropClickToClose:!0,hardwareBackButtonClose:!1}).then(function(e){G.CheckModalExistOrNot(N.modalopenclosebook)&&(N.modalopenclosebook=e,N.modalopenclosebook.show())})},N.openbooksubmit=function(){U.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),i.CreateOpenCloseBook(N.openbookdata).then(function(e){N.openbookdata.ID_LOCAL=e.ID_LOCAL;var o=G.GetParameters();o.OPENCLOSE_ID=N.openbookdata.OPENCLOSE_ID,k.set("basic-parameters",o),N.openbookdata.sudahopenbelum=!0,P(function(){U.hide(),N.modalopenclosebook.remove(),t.ShowToast("Buka Buku Sukses.Sekarang Kamu Sudah Dapat Melakukan Transaksi.","success")},3e3)},function(e){console.log(e)})},N.openbookclose=function(){N.modalopenclosebook.remove()},N.loadproductforsale=function(){var e=G.GetParameters();e.IS_FAVORITE=k.get("show-favorite"),N.displayproductfavorite=k.get("show-favorite"),p.GetProducts(e).then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(N.itemincart,function(t,o){var n=_.findIndex(e,{PRODUCT_ID:t.PRODUCT_ID});-1!=n&&(e[n].QTY_INCART=Number(t.QTY_INCART))}),N.databarangpenjualan=e):N.databarangpenjualan=[]},function(e){console.log(e)})},N.$on("update-notifproduct",function(){N.loadproductforsale()}),N.loaditemincart=function(){var e=G.GetParameters();e.TRANS_ID=N.nomortransaksiheader,f.GetShopCartByNomorTrans(e).then(function(e){angular.isArray(e)&&e.length>0?N.itemincart=e:N.itemincart=[],N.loadproductforsale()},function(e){console.log(e)}).finally(function(){U&&U.hide()})},N.loadnomortransaksiheaders=function(){var e=G.GetParameters();N.nomortransaksiheader=G.GenerateNomorTransaksi(null,e),P(function(){N.loaditemincart()})},N.createnewtransaksiheader=function(){c.GetTransaksiHeaderByTransID(N.nomortransaksiheader).then(function(e){if(0==e.length){var t=M.TransaksiHeaderConstructor(N.nomortransaksiheader,"manual");t.OPENCLOSE_ID=N.openbookdata.OPENCLOSE_ID,t.TOTAL_PRODUCT=N.itemincart.length,t.SUB_TOTAL_HARGA=N.totalpembayaran,t.PPN=0,t.TOTAL_HARGA=Number(N.totalpembayaran)*(1+t.PPN/100),u.CreateTransaksiHeaders(t).then(function(e){P(function(){N.loadnomortransaksiheaders()})},function(e){console.log(e)})}else P(function(){N.loadnomortransaksiheaders()})},function(e){console.log(e)})},N.showproductfavorite=function(){N.modegroup=!1,N.modefavorit=!0,N.displayproductgroup=!1,N.displayproductfavorite=!N.displayproductfavorite,N.displayproductfavorite?(N.displayproductfavorite=1,N.filterfavorite=1):(N.displayproductfavorite=0,N.filterfavorite=void 0)},N.addorrevomvefromfavorite=function(e){0==e.IS_FAVORITE?e.IS_FAVORITE=1:e.IS_FAVORITE=0;var o={};o.IS_FAVORITE=e.IS_FAVORITE,o.PRODUCT_ID=e.PRODUCT_ID,m.AddOrRemoveFromFavorite(o).then(function(o){N.displayproductfavorite&&N.loadproductforsale(),1==e.IS_FAVORITE?t.ShowToast(e.PRODUCT_NM+" Berhasil Ditambahkan Ke Favorite.","success"):t.ShowToast(e.PRODUCT_NM+" Berhasil Dikeluarkan Dari Favorite.","success")},function(e){console.log(e)})},N.showproductgroup=function(){N.displayproductgroup=!N.displayproductgroup},N.chooseproductgroup=function(e){N.modefavorit=!1,N.modegroup=!0,e?(k.set("show-group",e),N.filtergroup=e.GROUP_ID,N.namagroup=angular.copy(e.GROUP_NM)):(N.filtergroup=void 0,N.filterfavorite=void 0,N.displayproductfavorite=0),N.displayproductgroup=!1},N.scanbarcode=function(){document.addEventListener("deviceready",function(){S.scan().then(function(e){if(!e.cancelled){var o=e.text,n=_.findIndex(N.databarangpenjualan,{PRODUCT_QR:o.toString()});n>-1?P(function(){N.tambahqtyitem(N.databarangpenjualan[n])},10):t.ShowToast("Produk Tidak Ditemukan Atau Barcode Produk Belum Terdaftar","success")}},function(e){t.ShowToast("Barcode Device Error.Try Again.","error")})},!1)},N.tambahqtyitem=function(e){if(N.openbookdata.sudahopenbelum)if(N.soundon.on&&(N.audio=new Audio("img/beep-07.wav"),N.audio.play()),e.CURRENT_STOCK>0){var o=G.GetParameters(),n=M.ProductAddToShopCart(e);if(n.ACCESS_ID=o.ACCESS_ID,n.TRANS_ID=N.nomortransaksiheader,e.QTY_INCART&&e.QTY_INCART>0){e.QTY_INCART+=1,n.QTY_INCART=e.QTY_INCART;var a=_.findIndex(N.itemincart,{PRODUCT_ID:e.PRODUCT_ID});N.itemincart[a].QTY_INCART+=1,f.UpdateShopCartQty(n)}else e.QTY_INCART=1,n.QTY_INCART=e.QTY_INCART,N.banyakdicart+=1,N.itemincart.push(n),f.CreateShopCart(n);e.CURRENT_STOCK-=1,n.CURRENT_STOCK=e.CURRENT_STOCK,m.UpdateProductsQuantity(n)}else t.ShowToast("Quantity Tidak Mencukupi","error");else N.modalopenclosebookopen()},N.OpenModalAddToCart=function(e,t){if(N.openbookdata.sudahopenbelum){if("fromcart"==t){var o=_.findIndex(N.databarangpenjualan,{PRODUCT_ID:e.PRODUCT_ID});N.itemdimodal=angular.copy(N.databarangpenjualan[o])}else N.itemasli=angular.copy(e),N.itemdecinc=angular.copy(e),N.itemdimodal=angular.copy(e);L.fromTemplateUrl("templates/sales/addtocart/modaladdtocart.html",{scope:N,animation:"fade-in-scale",backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){N.modaladdtocart=e,N.modaladdtocart.show(),angular.isDefined(N.itemdimodal.QTY_INCART)||(N.itemdimodal.QTY_INCART=0)})}else N.modalopenclosebookopen()},N.CloseModalAddToCart=function(){var e=_.findIndex(N.databarangpenjualan,{PRODUCT_ID:N.itemdimodal.PRODUCT_ID}),t=_.findIndex(N.itemincart,{PRODUCT_ID:N.itemdimodal.PRODUCT_ID});N.databarangpenjualan[e]=N.itemdimodal,t>=0&&(N.itemincart[t].QTY_INCART=N.itemdimodal.QTY_INCART),f.GetShopCartByItemAndNoTrans(N.itemdimodal.PRODUCT_ID,N.nomortransaksiheader).then(function(e){var o=G.GetParameters(),n=M.ProductAddToShopCart(N.itemdimodal);n.ACCESS_ID=o.ACCESS_ID,n.TRANS_ID=N.nomortransaksiheader,n.CURRENT_STOCK=N.itemdimodal.CURRENT_STOCK,angular.isArray(e)&&e.length>0?N.itemdimodal.QTY_INCART>0?f.UpdateShopCartQty(n).then(function(e){m.UpdateProductsQuantity(n).then(function(e){console.log(e)},function(e){console.log(e)})}):(f.DeleteShopCartByNoTransAndItemId(n).then(function(e){m.UpdateProductsQuantity(n).then(function(e){console.log(e)},function(e){console.log(e)})}),N.banyakdicart-=1,P(function(){N.itemincart.splice(t,1)},10)):N.itemdimodal.QTY_INCART>0&&(N.itemincart.push(n),N.banyakdicart+=1,f.CreateShopCart(n).then(function(e){m.UpdateProductsQuantity(n).then(function(e){console.log(e)},function(e){console.log(e)})}))}),N.modaladdtocart.remove()},N.CancelModalAddToCart=function(){N.modaladdtocart.remove()},N.incdec=function(e){N.itemdimodal.QTY_INCART=Number(N.itemdimodal.QTY_INCART),N.itemdimodal.CURRENT_STOCK=Number(N.itemdimodal.CURRENT_STOCK),"inc"==e?(N.soundon.on&&(N.audio=new Audio("img/beep-07.wav"),N.audio.play()),N.itemdimodal.CURRENT_STOCK-=1,N.itemdimodal.CURRENT_STOCK>=0?N.itemdimodal.QTY_INCART+=1:N.itemdimodal.CURRENT_STOCK=0):"dec"==e&&(N.soundon.on&&(N.audio=new Audio("img/beep-5.wav"),N.audio.play()),N.itemdimodal.QTY_INCART>0&&(N.itemdimodal.QTY_INCART-=1,N.itemdimodal.CURRENT_STOCK+=1))},N.clearquantity=function(){N.itemdimodal.QTY_INCART=Number(N.itemdimodal.QTY_INCART),N.itemdimodal.CURRENT_STOCK=Number(N.itemdimodal.CURRENT_STOCK),N.itemdimodal.CURRENT_STOCK+=N.itemdimodal.QTY_INCART,N.itemdimodal.QTY_INCART=0},N.openmodalclearitemshopcart=function(){if(N.itemincart.length>0){var e=angular.copy(N.itemincart);h.confirm("Apakah Kamu Yakin Akan Menghapus Semua Item Di Keranjang Belanja ?",["Delete","Cancel"]).then(function(o){1==o&&(angular.forEach(e,function(e,t){var o=_.findIndex(N.databarangpenjualan,{PRODUCT_ID:e.PRODUCT_ID}),n=N.databarangpenjualan[o];n.CURRENT_STOCK=Number(n.CURRENT_STOCK)+Number(e.QTY_INCART),m.UpdateProductsQuantity(n)}),c.GetTransaksiHeaderByTransID(N.nomortransaksiheader).then(function(e){e.length>0&&(u.DeleteTransaksiHeadersByTransID(N.nomortransaksiheader),E.DeleteSaveToBillByNomorTrans(N.nomortransaksiheader)),f.DeleteItemFromShopCartByNoTrans(N.nomortransaksiheader),N.loadnomortransaksiheaders(),t.ShowToast("Keranjang Belanja Berhasil Dikosongkan.","success")}))})}},N.openmodalviewitemincart=function(){L.fromTemplateUrl("templates/sales/pembayaran/viewitemincart.html",{scope:N,animation:"slide-in-left",backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){G.CheckModalExistOrNot(N.modalviewitemincart)&&(N.modalviewitemincart=e,N.modalviewitemincart.show())})},N.closemodalviewitemincart=function(){N.modalviewitemincart.remove()},N.openmodalpembayaran=function(e,t){N.totalpembayaransebelumpajak=t,N.pakaippnatautidak.checked?(N.biayapajak=.1*t,N.totalpembayaran=50*Math.round(1.1*t/50)):(N.biayapajak=0,N.totalpembayaran=t),N.yangdibayarkan=G.PembayaranFunc(N.totalpembayaran),N.sisapembayaran=0-N.totalpembayaran,L.fromTemplateUrl("templates/sales/pembayaran/modalpembayaran.html",{scope:N,animation:"slide-in-left",backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){N.koins=G.GetCoinsPembayaran(),N.pelangganradio={valuechoose:"REGULAR"},N.datapelanggan={},N.pembayaran={uang:0},G.CheckModalExistOrNot(N.modalpembayaran)&&(N.modalpembayaran=e,N.modalpembayaran.show())})},N.radiokirim=function(){"KIRIM"==N.kirimkemail.valuechoose&&("REGULAR"==N.pelangganradio.valuechoose?N.datapelanggan.EMAIL?(N.datafixpelanggan={},N.datafixpelanggan.EMAIL=N.datapelanggan.EMAIL,N.datafixpelanggan.NAME="NO NAME",N.datafixpelanggan.PHONE="EMPTY",N.submitmodalpembayaran()):(N.kirimkemail.valuechoose="TIDAK",t.ShowToast("Alamat Email Tidak Boleh Kosong.","error")):N.customerchoose?(N.datafixpelanggan=N.customerchoose,N.submitmodalpembayaran()):(N.kirimkemail.valuechoose="TIDAK",t.ShowToast("Pilih Pelanggan Terlebih Dahulu.","error")))},N.selecttypepembayaran=function(e){N.choicetypepembayaran={TYPE_PAY_ID:e.TYPE_PAY_ID},A.confirm({templateUrl:"templates/sales/pembayaran/popuptypepembayaran.html",title:"PILIH METODE PEMBAYARAN?",scope:N,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){N.choicetypepembayaran=N.choicetypepembayarandefault}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(N.typepembayarans,{TYPE_PAY_ID:N.choicetypepembayaran.TYPE_PAY_ID}),o=angular.copy(N.typepembayarans[t]);N.choicetypepembayarandefault=o}}]})},N.radiopembayaranchange=function(e){N.pembayaran.uang=angular.copy(e),e>N.totalpembayaran?N.sisapembayaran=Number(angular.copy(e))-Number(N.totalpembayaran):N.sisapembayaran=Number(N.totalpembayaran)-Number(angular.copy(e))},N.changemanual=function(){N.pembayaran.uang>N.totalpembayaran?N.sisapembayaran=Number(N.pembayaran.uang)-Number(N.totalpembayaran):N.sisapembayaran=Number(N.totalpembayaran)-Number(N.pembayaran.uang)},N.masukkankoin=function(e,t){N.soundon.on&&(N.audio=new Audio("img/beep-07.wav"),N.audio.play()),N.koins[t].jumlah+=1,N.pembayaran.uang+=e.nominal,N.sisapembayaran+=e.nominal},N.kurangikoin=function(e,t){N.koins[t].jumlah>0&&(N.soundon.on&&(N.audio=new Audio("img/beep-07.wav"),N.audio.play()),N.koins[t].jumlah-=1,N.pembayaran.uang-=e.nominal,N.sisapembayaran-=e.nominal)},N.submitmodalpembayaran=function(){N.lanjutnextstep=!1,N.pembayaran.uang<N.totalpembayaran?h.alert("Pembayaran Belum Cukup."):1!=N.choicetypepembayarandefault.TYPE_PAY_ID?N.provider.valuechoose&&N.choicetypepembayarandefault.TYPE_PAY_ID==N.provider.valuechoose.TYPE_PAY_ID?N.lanjutnextstep=!0:h.alert("Merchant Pembayaran Tidak Boleh Kosong.Pilih Merchant Terlebih Dahulu"):N.lanjutnextstep=!0,N.lanjutnextstep&&(U.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),console.log(N.nomortransaksiheader),u.GetTransaksiHeaderByTransIDStatusNol(N.nomortransaksiheader).then(function(e){var o=M.TransaksiHeaderConstructor(N.nomortransaksiheader,"manual");o.TOTAL_PRODUCT=N.itemincart.length,o.SUB_TOTAL_HARGA=N.totalpembayaransebelumpajak,o.PPN=N.biayapajak,o.TOTAL_HARGA=N.totalpembayaran,o.OPENCLOSE_ID=N.openbookdata.OPENCLOSE_ID,o.STATUS=1,"REGULAR"!=N.pelangganradio.valuechoose&&N.customerchoose&&(o.CONSUMER_NM=N.customerchoose.NAME,o.CONSUMER_EMAIL=N.customerchoose.EMAIL,o.CONSUMER_PHONE=N.customerchoose.PHONE),1!=N.choicetypepembayarandefault.TYPE_PAY_ID&&(o.TYPE_PAY_ID=N.choicetypepembayarandefault.TYPE_PAY_ID,o.TYPE_PAY_NM=N.choicetypepembayarandefault.TYPE_PAY_NM,o.BANK_ID=N.provider.valuechoose.BANK_ID,o.BANK_NM=N.provider.valuechoose.BANK_NM,o.MERCHANT_ID=N.provider.valuechoose.MERCHANT_ID,o.MERCHANT_NM=N.provider.valuechoose.MERCHANT_NM,o.MERCHANT_NO=N.provider.valuechoose.MERCHANT_NO),0==e.length&&(o.TRANS_ID=N.nomortransaksiheader,o.SPLIT_TRANS_ID=N.nomortransaksiheader.split(".")[3]+"."+N.nomortransaksiheader.split(".")[4],u.CreateTransaksiHeaders(o).then(function(e){k.destroy("nomortransaksiyangaktif"),t.ShowToast("Transaksi Berhasil Disimpan","success")},function(e){t.ShowToast("Transaksi Gagal Disimpan","error")}),E.DeleteSaveToBillByNomorTrans(N.nomortransaksiheader));for(var n=angular.copy(N.itemincart),a=n.length-1;a>=0;a--){n[a].PRODUCT_QTY=n[a].QTY_INCART,n[a].STATUS=1;var r=angular.copy(n[a]);f.UpdateStatusPembelian(r),void 0!=n[a].GOLONGAN&&(r.STATUS_BELI=6,f.UpdateShopCartPPOBStatus(r))}P(function(){N.modalviewitemincart&&N.modalviewitemincart.remove(),N.choicetypepembayarandefault=N.typepembayarans[0],N.provider={valuechoose:null},N.pelangganradio={valuechoose:"REGULAR"},N.alasan=[{todo:"REGULAR",checked:!0},{todo:"MEMBER",checked:!1}],N.loadnomortransaksiheaders(),N.modalpembayaran.remove()},2e3)},function(e){t.ShowToast(e,"error")}))},N.closemodalpembayaran=function(){N.modalpembayaran.remove()},N.changefilterpelanggan=function(e){e.length>3?N.showdatapelanggan=!0:N.showdatapelanggan=!1,N.filterpelanggan=e},N.showpopovermenumore=function(e){D.fromTemplateUrl("templates/sales/popovermenumore.html",{scope:N,animation:"animated zoomInUp"}).then(function(t){N.popovermenumore=t,N.popovermenumore.show(e)})},N.closepopovermenumore=function(){N.popovermenumore&&N.popovermenumore.hide()},N.turnofonsoundfunction=function(){N.soundon.on=!N.soundon.on;var e={};e.grid=N.gridornot.grid,e.on=N.soundon.on,k.set("default-config",e),N.soundon.on?t.ShowToast("Suara Berhasil Diaktifkan.","success"):t.ShowToast("Suara Berhasil Dinonaktifkan.","success")},N.switchmodegridorlistfunction=function(){N.gridornot.grid=!N.gridornot.grid;var e={};e.grid=N.gridornot.grid,e.on=N.soundon.on,k.set("default-config",e),N.gridornot.grid?t.ShowToast("Tampilan Gambar Diaktifkan.","success"):t.ShowToast("Tampilan Teks Diaktifkan.","success")},N.openstorepopup=function(){N.closepopovermenumore();var e=k.get("advanced-profile");N.stores=e.LIST_STORES,N.choiceview=e.STORES_ACTIVE,N.choice={STORE_ID:N.choiceview.STORE_ID},A.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH STORE?",scope:N,cssClass:"animated bounceIn",buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){N.choice=angular.copy(N.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(N.stores,{STORE_ID:N.choice.STORE_ID}),n=angular.copy(N.stores[o]);e.STORES_ACTIVE=n,N.titleheader=n.STORE_NM,k.set("advanced-profile",e),N.loadnomortransaksiheaders()}}]})},N.showpopovermenuppob=function(e){D.fromTemplateUrl("templates/sales/popovermenuppob.html",{scope:N,animation:"animated zoomInUp"}).then(function(t){N.popovermenuppob=t,N.popovermenuppob.show(e)})},N.closepopovermenuppob=function(){N.popovermenuppob&&N.popovermenuppob.hide()},N.openmodecashier=function(){U.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),P(function(){N.modelayar={cashier:!0,pembelian:!1,pembayaran:!1,transfer:!1},N.showformpembelian=!1,N.showdetailpembeliantoken=!1,U.hide()},1e3)},N.openmodepembelian=function(){N.closepopovermenuppob(),N.modelayar={cashier:!1,pembelian:!0,pembayaran:!1,transfer:!1},N.showformpembelian=!1},N.openformpembelian=function(e){N.modelayar={cashier:!1,pembelian:!1,pembayaran:!1,transfer:!1},N.showformpembelian=!0,N.datapembelianppob=angular.copy(e),N.showform=G.CheckTypePembelian(N.datapembelianppob),"PULSA"==N.showform&&(N.regex=a.GetPrefix(N.datapembelianppob.DETAIL_NM))},N.inputnominalpulsa=function(){N.datanominals=N.datapembelianppob.DAFTAR_NOMINAL,N.choicekodenominal={CODE:null},A.confirm({templateUrl:"templates/sales/formisian/popupnominalpulsa.html",title:"PILIH JUMLAH NOMINAL?",scope:N,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(e){if(null!=N.choicekodenominal.CODE){var t=_.findIndex(N.datanominals,{CODE:N.choicekodenominal.CODE}),o=N.datanominals[t];N.datapembelianppob.NILAI_NOMINAL=y("ktoNumber")(o.NOMINAL),N.datapembelianppob.HARGA_KG=o.HARGA_KG,N.datapembelianppob.CODE=o.CODE,N.datapembelianppob.DENOM=o.DENOM,N.datapembelianppob.HARGA_JUAL=o.HARGA_JUAL,N.datapembelianppob.ID_CODE=o.ID_CODE,N.datapembelianppob.ID_PRODUK=o.ID_PRODUK,N.datapembelianppob.KELOMPOK=o.KELOMPOK,N.datapembelianppob.KTG_ID=o.KTG_ID,N.datapembelianppob.KTG_NM=o.KTG_NM,N.datapembelianppob.NAME=o.NAME,N.datapembelianppob.TYPE_NM=o.TYPE_NM}}}]})},N.submitpembelianpulsa=function(){N.aktualsisadeposit=angular.copy(N.jumlahnilaideposit);var e=N.jumlahnilaideposit-N.datapembelianppob.HARGA_JUAL;if(e>=0){N.jumlahnilaideposit=e,N.openmodepembelian();var t=G.GetParameters();t.TRANS_DATE=y("date")(new Date,"yyyy-MM-dd HH:mm:ss"),t.GOLONGAN=N.datapembelianppob.KELOMPOK,t.PRODUCT_ID=N.datapembelianppob.ID_PRODUK,t.PRODUCT_NM=N.datapembelianppob.NAME,t.PRODUCT_PROVIDER=N.datapembelianppob.KTG_NM,t.PRODUCT_PROVIDER_NO=N.datapembelianppob.HEADER_NM,t.PRODUCT_PROVIDER_NM=N.datapembelianppob.HEADER_NM,t.UNIT_ID=N.datapembelianppob.HEADER_NM,t.UNIT_NM=N.datapembelianppob.HEADER_NM,t.TRANS_TYPE=1,t.HARGA_JUAL=Number(N.datapembelianppob.HARGA_JUAL),t.QTY_INCART=1,t.PROMO=null,t.TRANS_ID=N.nomortransaksiheader,t.DISCOUNT=0,t.STATUS=0,t.PEMBAYARAN=N.datapembelianppob.HARGA_JUAL,t.MSISDN=N.datapembelianppob.MSISDN,t.ID_PELANGGAN=N.datapembelianppob.MSISDN,t.HARGA_KG=N.datapembelianppob.HARGA_KG,t.CODE=N.datapembelianppob.CODE,t.DENOM=N.datapembelianppob.DENOM,t.HARGA_JUAL=N.datapembelianppob.HARGA_JUAL,t.ID_CODE=N.datapembelianppob.ID_CODE,t.ID_PRODUK=N.datapembelianppob.ID_PRODUK,t.KELOMPOK=N.datapembelianppob.KELOMPOK,t.KTG_ID=N.datapembelianppob.KTG_ID,t.KTG_NM=N.datapembelianppob.KTG_NM,t.NAME=N.datapembelianppob.NAME,t.TYPE_NM=N.datapembelianppob.TYPE_NM,t.PEMBAYARAN=N.datapembelianppob.HARGA_JUAL,t.STATUS_BELI=5,f.CreateShopCart(t).then(function(e){N.banyakdicart+=1,N.itemincart.push(t)},function(e){console.log(e)}),f.CreateShopCartPPOB(t).then(function(e){console.log("Data Pembelian PPOB Shop Cart")},function(e){console.log(e)})}else alert("Nilai Deposit Anda Tidak Mencukupi.Lakukan Deposit Terlebih Dahulu.Sisa Deposit = Rp. "+N.aktualsisadeposit)},N.submitinquery=function(){var e=angular.copy(N.datapembelianppob);e.ID_PELANGGAN=e.MSISDN,e.TRANS_DATE=y("date")(new Date,"yyyy-MM-dd HH:mm:ss"),e.STORE_ID="1234567890",e.TRANS_ID="1234567890",e.PEMBAYARAN=12e3,o.CreateTransaksi(e).then(function(e){N.inquerysuccess=!0,N.datapembelianppob.NAMA_PELANGGAN="Radumta Sitepu"},function(e){console.log(e)})},N.openmodepembayaran=function(){N.closepopovermenuppob(),t.ShowToast("Fitur Cicilan Dalam Pengembangan","error")},N.openmodetransfer=function(){N.closepopovermenuppob(),t.ShowToast("Fitur Setor/Transfer Dalam Pengembangan","error")},N.xxx={string:""},N.changefilter=function(e){N.filterproductbyname=e},N.hitungtotal=function(e){return G.SumPriceWithQty(e,"HARGA_JUAL","QTY_INCART")},N.openmodallistcustomer=function(){L.fromTemplateUrl("templates/sales/customers/modallistcustomers.html",{scope:N,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){G.CheckModalExistOrNot(N.modalcustomernewtransaksi)&&(N.modalcustomernewtransaksi=e,N.modalcustomernewtransaksi.show());var t=G.GetParameters();d.GetCustomers(t).then(function(e){N.customerisexist={exist:"true"},N.datacustomers=e,N.newcustomer={},c.GetTransaksiHeaderByTransID(N.nomortransaksiheader).then(function(t){if(t.length>0){N.datatransaksiheadercustomer=t[t.length-1];var o=_.findIndex(e,{NAME:N.datatransaksiheadercustomer.CONSUMER_NM});o>-1&&(N.shownGroup=N.datacustomers[o],N.customerchoose=N.datacustomers[o])}})},function(e){console.log(e)}).finally(function(){U.hide()})})},N.filtertable=function(e){N.filterValue=e},N.submitmodallistcustomer=function(){if("false"==N.customerisexist.exist){var e=G.GetParameters();T.GetMaxCustomerID(e.STORE_ID).then(function(t){N.newcustomer.CUSTOMER_ID=t,N.newcustomer.TGL_SAVE=e.TGL_SAVE,N.newcustomer.ACCESS_GROUP=e.ACCESS_GROUP,N.newcustomer.STORE_ID=e.STORE_ID,N.newcustomer.STATUS=1,T.CreateCustomers(N.newcustomer).then(function(e){N.namacustomer=N.newcustomer.NAME},function(e){console.log(e)})},function(e){console.log(e)})}N.modalcustomernewtransaksi.remove()},N.closemodallistcustomer=function(){N.modalcustomernewtransaksi.remove()},N.isGroupShown=function(e){return N.shownGroup===e},N.tapcustomer=function(e){N.customerchoose=e,N.searchpelanggan.string=e.NAME,N.isGroupShown(e)?(N.shownGroup=void 0,N.customerchoose=void 0):N.shownGroup=e},N.openmodalsavetobill=function(){L.fromTemplateUrl("templates/sales/savebill/modalsavetobill.html",{scope:N,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!0,hardwareBackButtonClose:!1,backdrop:!1}).then(function(e){G.CheckModalExistOrNot(N.savetobillmodal)&&(N.savetobillmodal=e,N.savetobillmodal.show()),N.billidentity=N.nomortransaksiheader.split(".")[4]})},N.closemodalsavetobill=function(){N.savetobillmodal&&N.savetobillmodal.remove()},N.submitmodalsavetobill=function(e){if(N.itemincart.length>0){"print"==e&&t.ShowToast("Sedang Proses Print.Silahkan Tunggu","success");var o=G.GetParameters();o.TRANS_ID=N.nomortransaksiheader,E.GetSaveToBillByNomorTrans(o).then(function(e){0==e.length&&(N.billidentity!=o.TRANS_ID?o.ALIAS_TRANS_ID=N.billidentity:o.ALIAS_TRANS_ID="",E.SetSaveToBill(o).then(function(e){console.log(e)},function(e){console.log(e)})),k.destroy("nomortransaksiyangaktif"),N.loadnomortransaksiheaders()},function(e){t.ShowToast(e,"error")})}else h.alert("Belum Ada Item Yang Dipilih.Minimal Harus Ada Satu Item.","Information","Pilih Sekarang");N.modalviewitemincart&&N.modalviewitemincart.remove(),N.savetobillmodal.remove()},N.openmodalloadfromtobill=function(){L.fromTemplateUrl("templates/sales/savebill/modalloadfrombill.html",{scope:N,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!0,hardwareBackButtonClose:!1,backdrop:!1}).then(function(e){G.CheckModalExistOrNot(N.savetobillmodal)&&(N.savetobillmodal=e,N.savetobillmodal.show()),N.billidentity=N.nomortransaksiheader;var t=G.GetParameters();E.GetSaveToBillByDate(t).then(function(e){N.listbill=e})})},N.submitloadfrombill=function(e){if(N.itemincart.length>0){var o=G.GetParameters();o.TRANS_ID=N.nomortransaksiheader,E.GetSaveToBillByNomorTrans(o).then(function(e){0==e.length&&(N.billidentity!=o.TRANS_ID?o.ALIAS_TRANS_ID=N.billidentity:o.ALIAS_TRANS_ID="",E.SetSaveToBill(o).then(function(e){console.log(e)},function(e){t.ShowToast(e,"error")}))},function(e){t.ShowToast(e,"error")})}c.GetTransaksiHeaderByTransID(e.TRANS_ID).then(function(e){e.length>0&&(N.namacustomer=e[e.length-1].CONSUMER_NM)},function(e){t.ShowToast(e,"error")}),N.nomortransaksiheader=e.TRANS_ID,N.splitnomortransaksi=N.nomortransaksiheader.split(".")[2]+"."+N.nomortransaksiheader.split(".")[3],N.loaditemincart(),N.closemodalsavetobill()}}]),angular.module("starter").controller("ControlDepositPPOBCtrl",["StoresLiteFac","StoresCombFac","SecuredFac","KaryawansCombFac","KaryawansFac","KaryawansLiteFac","MerchantsLiteFac","MerchantsCombFac","CustomersLiteFac","CustomersCombFac","ProvinsisCombFac","MerchantsFac","StoresFac","ProductStockLiteFac","ProductsFac","ProductsLiteFac","ProductsCombFac","ConstructorService","StorageService","UtilService","$cordovaImagePicker","$cordovaCamera","$ionicActionSheet","$cordovaDialogs","$cordovaToast","$ionicPopup","$ionicSlideBoxDelegate","$ionicModal","$ionicLoading","$ionicHistory","$scope","$timeout","$state","$filter",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,h,I,A,D,R,C,O,P,g,N,v,b,U,w,L,y){U.screenbesar=I.CheckScreenSize(),window.addEventListener("orientationchange",function(){U.screenbesar=I.CheckScreenSize(screen),U.$apply()},!1),U.myActiveSlide=1,U.loadstores=function(){var e=I.GetParameters();t.GetStores(e).then(function(e){U.datastores=e,w(function(){U.detailstore(U.datastores[0])},10)})},U.loadstores(),U.openmodalactive=function(e){if("MERCHANT"==e)U.modalnewmerchantopen();else if("KARYAWAN"==e)U.modalnewkaryawanopen();else if("OPERASIONAL"==e)U.modalnewuserloginopen();else if("PELANGGAN"==e)U.modalnewcustomeropen();else if("INFORMASI"==e){var t=angular.copy(U.datadetail);U.modalupdatestoreopen(t)}},U.detailstore=function(e){U.viewtoshow={valuechoose:"MERCHANT"},U.showbasic=!1,U.showproduct=!0,U.showmerchant=!1,U.showemploye=!1,U.datadetail=e,U.isGroupShown(e)||(U.shownGroup=e,v.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}));var t=I.GetParameters();t.STORE_ID=e.STORE_ID,E.GetProducts(t).then(function(e){U.dataproducts=e,g.update(),w(function(){v.hide()},2e3)},function(e){console.log(e)}),s.GetMerchants(t).then(function(e){U.datamerchants=e},function(e){console.log(e)}),u.GetCustomers(t).then(function(e){U.datacustomers=e},function(e){console.log(e)}),n.GetKaryawans(t).then(function(e){U.datakaryawans=e}),o.GetListUserOps(t).then(function(e){U.datauserops=e},function(e){console.log(e)})},U.openstorepopup=function(e){h.get("advanced-profile");U.stores=U.datastores,U.choiceview=e,U.choice={STORE_ID:U.choiceview.STORE_ID},P.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH STORE?",scope:U,cssClass:"animated bounceIn",buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){U.choice=angular.copy(U.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(U.datastores,{STORE_ID:U.choice.STORE_ID}),o=angular.copy(U.datastores[t]);U.detailstore(o)}}]})},U.openprovinsipopup=function(e){l.GetProvinsisComb().then(function(e){U.provinsis=e},function(e){alert("Error")}),"new"==e?(U.sebelumberubah={PROVINCE_ID:U.newstore.PROVINCE_ID},U.choicepropinsi={PROVINCE_ID:U.newstore.PROVINCE_ID}):(U.sebelumberubah={PROVINCE_ID:U.updatestore.PROVINCE_ID},U.choicepropinsi={PROVINCE_ID:U.updatestore.PROVINCE_ID}),P.confirm({templateUrl:"templates/control/provinsis.html",title:"PILIH PROVINSI?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){if(!_.isEqual(U.sebelumberubah,U.choicepropinsi)){var o=_.findIndex(U.provinsis,{PROVINCE_ID:Number(U.choicepropinsi.PROVINCE_ID)});"new"==e?(U.newstore.PROVINCE_NM=U.provinsis[o].PROVINCE,U.newstore.PROVINCE_ID=U.provinsis[o].PROVINCE_ID,U.newstore.CITY_NAME=null,U.newstore.CITY_ID=null):(U.updatestore.PROVINCE_NM=U.provinsis[o].PROVINCE,U.updatestore.PROVINCE_ID=U.provinsis[o].PROVINCE_ID,U.updatestore.CITY_NAME=null,U.updatestore.CITY_ID=null)}}}]})},U.openkotapopup=function(e){U.choicepropinsi||(U.choicepropinsi=U.updatestore),l.GetKotasComb(U.choicepropinsi).then(function(e){U.kotas=e},function(e){console.log(e)}),U.choicekota="new"==e?{CITY_ID:U.newstore.CITY_ID}:{CITY_ID:U.updatestore.CITY_ID},P.confirm({templateUrl:"templates/control/kota.html",title:"PILIH KOTA?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.kotas,{CITY_ID:Number(U.choicekota.CITY_ID)});"new"==e?(U.newstore.CITY_NAME=U.kotas[o].CITY_NAME,U.newstore.CITY_ID=U.kotas[o].CITY_ID):(U.updatestore.CITY_NAME=U.kotas[o].CITY_NAME,U.updatestore.CITY_ID=U.kotas[o].CITY_ID)}}]})},U.opengroupindustripopup=function(e){m.GetProductIndustriGroups().then(function(e){U.industrigroups=e}),"new"==e?(U.sebelumberubah={INDUSTRY_GRP_ID:U.newstore.INDUSTRY_GRP_ID},U.choiceindustrigroups={INDUSTRY_GRP_ID:U.newstore.INDUSTRY_GRP_ID}):(U.sebelumberubah={INDUSTRY_GRP_ID:U.updatestore.INDUSTRY_GRP_ID},U.choiceindustrigroups={INDUSTRY_GRP_ID:U.updatestore.INDUSTRY_GRP_ID}),P.confirm({templateUrl:"templates/control/products/popupindustrigroups.html",title:"PILIH GROUP INDUSTRI?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){if(!_.isEqual(U.sebelumberubah,U.choiceindustrigroups)){var o=_.findIndex(U.industrigroups,{INDUSTRY_GRP_ID:Number(U.choiceindustrigroups.INDUSTRY_GRP_ID)});"new"==e?(U.newstore.INDUSTRY_GRP_NM=U.industrigroups[o].INDUSTRY_GRP_NM,U.newstore.INDUSTRY_GRP_ID=U.industrigroups[o].INDUSTRY_GRP_ID,U.newstore.INDUSTRY_NM=null,U.newstore.INDUSTRY_ID=null):(U.updatestore.INDUSTRY_GRP_NM=U.industrigroups[o].INDUSTRY_GRP_NM,U.updatestore.INDUSTRY_GRP_ID=U.industrigroups[o].INDUSTRY_GRP_ID,U.updatestore.INDUSTRY_NM=null,U.updatestore.INDUSTRY_ID=null)}}}]})},U.openindustripopup=function(e){console.log(U.choiceindustrigroups),U.choiceindustrigroups||(U.choiceindustrigroups={},U.choiceindustrigroups.INDUSTRY_GRP_ID=U.updatestore.INDUSTRY_GRP_ID),m.GetProductIndustris(U.choiceindustrigroups).then(function(e){U.productindustris=e}),U.choiceproductindustris="new"==e?{INDUSTRY_ID:U.newstore.INDUSTRY_ID}:{INDUSTRY_ID:U.updatestore.INDUSTRY_ID},P.confirm({templateUrl:"templates/control/products/popupproductindustris.html",title:"PILIH INDUSTRI?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){if(!_.isEqual(U.sebelumberubah,U.choiceproductindustris)){var o=_.findIndex(U.productindustris,{INDUSTRY_ID:Number(U.choiceproductindustris.INDUSTRY_ID)});"new"==e?(U.newstore.INDUSTRY_NM=U.productindustris[o].INDUSTRY_NM,U.newstore.INDUSTRY_ID=U.productindustris[o].INDUSTRY_ID):(U.updatestore.INDUSTRY_NM=U.productindustris[o].INDUSTRY_NM,U.updatestore.INDUSTRY_ID=U.productindustris[o].INDUSTRY_ID)}}}]})},U.modalnewstoreopen=function(){N.fromTemplateUrl("templates/control/stores/modalnewstore.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){var o=I.GetParameters();e.GetMaxStoreID(o.ACCESS_GROUP).then(function(e){U.newstore=S.StoreConstructor(),U.newstore.STORE_ID=e,U.newstore.STORE_NM="",U.newstore.STATUS=1}).then(function(){I.CheckModalExistOrNot(U.newstoremodal)&&(U.newstoremodal=t,U.newstoremodal.show())},function(e){alert("Get Max Store Error")})})},U.modalnewstoresubmit=function(){console.log(U.newstore),e.CreateStores(U.newstore).then(function(e){U.newstore.ID_LOCAL=e.ID_LOCAL,U.datastores.unshift(U.newstore),U.detailstore(U.newstore),U.newstoremodal.remove()}).then(function(){var e={};e.ACCESS_GROUP=U.newstore.ACCESS_GROUP,e.STORE_ID=U.newstore.STORE_ID,e.GROUP_ID=U.newstore.STORE_ID+".00001",e.GROUP_NM="LAIN-LAIN",e.STATUS=1,e.NOTE="LAIN-LAIN",f.CreateProductGroups(e).then(function(e){O.show("Toko Baru Berhasil Disimpan!","long","bottom")},function(e){console.log(e)})},function(e){O.show("Toko Baru Gagal Disimpan!","long","bottom")})},U.modalnewstoreclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newstoremodal.remove()})},U.modalupdatestoreopen=function(e){N.fromTemplateUrl("templates/control/stores/modalupdatestore.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){console.log(e),U.updatestore=angular.copy(e),I.CheckModalExistOrNot(U.updatestoremodal)&&(U.updatestoremodal=t,U.updatestoremodal.show())})},U.modalupdatestoresubmit=function(){console.log(U.updatestore),_.isEqual(U.datadetail,U.updatestore)||(U.updatestore.LONGITUDE="BASFASF",U.updatestore.LATITUDE="GFGF",e.UpdateStores(U.updatestore).then(function(e){var t=_.findIndex(U.datastores,{STORE_ID:U.updatestore.STORE_ID});U.datastores[t]=U.updatestore,U.datadetail=U.updatestore,U.detailstore(U.updatestore),O.show("Data Toko Berhasil Diubah","long","bottom")},function(e){O.show("Data Toko Gagal Diubah","long","bottom")})),U.updatestoremodal.remove()},U.modalupdatestoreclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.updatestoremodal.remove()})},U.openproductunitspop=function(e){var t=h.get("basic-parameters");t.STORE_ID=U.datadetail.STORE_ID,t.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),m.GetProductUnits(t).then(function(e){U.productunits=e},function(e){console.log(e)}),U.choiceproductunits="new"==e?{UNIT_ID:U.newproduct.UNIT_ID}:{UNIT_ID:U.updateitemproduct.UNIT_ID},P.confirm({templateUrl:"templates/control/products/popupproductunits.html",title:"PILIH UNIT PRODUK?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.productunits,{UNIT_ID:U.choiceproductunits.UNIT_ID});"new"==e?(U.newproduct.UNIT_ID=U.productunits[o].UNIT_ID,U.newproduct.UNIT_NM=U.productunits[o].UNIT_NM):(U.updateitemproduct.UNIT_ID=U.productunits[o].UNIT_ID,U.updateitemproduct.UNIT_NM=U.productunits[o].UNIT_NM)}}]})},U.openproductgroupspop=function(e){var t=h.get("basic-parameters");t.STORE_ID=U.datadetail.STORE_ID,t.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),f.GetProductGroups(t).then(function(e){U.productgroups=e}),U.choiceproductgroups="new"==e?{GROUP_ID:U.newproduct.GROUP_ID}:{GROUP_ID:U.updateitemproduct.GROUP_ID},P.confirm({templateUrl:"templates/control/products/popupproductgroups.html",title:"PILIH GROUP PRODUK?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.productgroups,{GROUP_ID:U.choiceproductgroups.GROUP_ID});"new"==e?(U.newproduct.GROUP_ID=U.productgroups[o].GROUP_ID,U.newproduct.GROUP_NM=U.productgroups[o].GROUP_NM):(U.updateitemproduct.GROUP_ID=U.productgroups[o].GROUP_ID,U.updateitemproduct.GROUP_NM=U.productgroups[o].GROUP_NM)}}]})},U.tambahproductgroup=function(){C.prompt("Group Baru","Tambah Produk Group",["Simpan","Cancel"],"").then(function(e){var t=e.input1;1==e.buttonIndex&&t.length>3&&f.GetMaxProductGroups(U.datadetail.STORE_ID).then(function(e){var o={};return o.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,o.STORE_ID=U.datadetail.STORE_ID,o.STATUS=1,o.GROUP_ID=e,o.GROUP_NM=t,o.NOTE="Catatan Untuk Product Group",o}).then(function(e){f.CreateProductGroups(e).then(function(t){e.ID_LOCAL=t.insertId,U.productgroups.push(e)},function(e){console.log(error)})},function(e){console.log(e)})})},U.modaltambahproductopen=function(){N.fromTemplateUrl("templates/control/products/modalnewproduct.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){f.GetMaxProductID(U.datadetail.STORE_ID).then(function(e){U.newproduct={},U.newproduct.PRODUCT_ID=e,U.newproduct.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),U.newproduct.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newproduct.STORE_ID=U.datadetail.STORE_ID,U.newproduct.PROMO="Belum Ada Promo",U.newproduct.STATUS=1,U.newproduct.IS_FAVORITE=0}).then(function(){I.CheckModalExistOrNot(U.tambahproduct)&&(U.tambahproduct=e,U.tambahproduct.show())},function(e){alert("Get Max ProductID Error")})})},U.modaltambahproductsubmit=function(e){e.$invalid=!0,f.CreateProducts(U.newproduct).then(function(e){U.dataproducts.unshift(U.newproduct),g.update(),U.tambahproduct.remove(),O.show("Produk Baru Berhasil Disimpan!","long","bottom")},function(e){O.show("Produk Baru Gagal Disimpan!","long","bottom")})},U.modaltambahproductclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.tambahproduct.remove()})},U.modalupdateproductopen=function(e,t){U.updateproducts=e,U.indexproduct=t,N.fromTemplateUrl("templates/control/products/modalupdateproduct.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.updateitemproduct=angular.copy(e[t]),U.newstock={},U.newstock.CURRENT_STOCK=Number(U.updateitemproduct.CURRENT_STOCK),console.log(U.newstock);var n=I.GetParameters();n.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,m.GetProductHargas(n).then(function(e){U.producthargas=[],angular.isDefined(e[n.STORE_ID])&&(U.producthargas=e[n.STORE_ID])},function(e){console.log(e)}),m.GetProductStocks(n).then(function(e){U.productstocks=e},function(e){console.log(e)}),m.GetProductDiscounts(n).then(function(e){U.productdiscounts=e},function(e){console.log(e)}),f.GetProductImagesByProductID(n).then(function(e){console.log(e),e.length>0?U.productimages=e[0]:m.GetProductImagesByProductID(n).then(function(e){U.productimages=e},function(e){U.productimages=void 0})},function(e){console.log(e)}),I.CheckModalExistOrNot(U.modalupdateproduct)&&(U.modalupdateproduct=o,U.modalupdateproduct.show())})},U.modalupdateproductsubmit=function(){_.isEqual(U.updateproducts[U.indexproduct],U.updateitemproduct)?U.modalupdateproduct.remove():f.UpdateProducts(U.updateitemproduct).then(function(e){U.updateproducts[U.indexproduct]=U.updateitemproduct,U.modalupdateproduct.remove(),O.show("Data Produk Berhasil Diubah!","long","bottom")},function(e){O.show("Data Produk Gagal Diubah!","long","bottom")})},U.modalupdateproductclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.modalupdateproduct.remove()})},U.showformstock={show:!1},U.tambahstock=function(){I.CheckProperyObjectNullOrNotNull(U.newstock)||0==U.newstock.INPUT_STOCK?C.alert("Quantity Stock Tidak Boleh Kosong."):(U.newstock.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),U.newstock.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,U.newstock.STORE_ID=U.updateitemproduct.STORE_ID,U.newstock.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,U.newstock.INPUT_DATE=y("date")(new Date,"yyyy-MM-dd"),U.newstock.INPUT_TIME=y("date")(new Date,"HH:mm:ss"),U.newstock.CURRENT_DATE=y("date")(new Date,"yyyy-MM-dd"),U.newstock.CURRENT_TIME=y("date")(new Date,"HH:mm:ss"),U.newstock.SISA_STOCK=0,U.newstock.LAST_STOCK=0,U.newstock.STATUS=1,U.newstock.DCRP_DETIL="ada ada saja",p.CreateProductStocks(U.newstock).then(function(e){U.newstock.ID_LOCAL=e.ID_LOCAL,U.productstocks.unshift(angular.copy(U.newstock)),U.newstock.CURRENT_STOCK=Number(U.newstock.CURRENT_STOCK)+Number(U.newstock.INPUT_STOCK);var t=_.findIndex(U.dataproducts,{PRODUCT_ID:U.newstock.PRODUCT_ID});U.dataproducts[t].CURRENT_STOCK=U.newstock.CURRENT_STOCK,f.UpdateProductsQuantity(U.newstock).then(function(e){U.newstock.INPUT_STOCK=0,O.show("Penambahan Stok Berhasil Disimpan!","long","bottom")},function(e){console.log(e)})},function(e){O.show("Penambahan Stok Gagal Disimpan!","long","bottom")}))},U.showformharga={show:!1},U.tambahharga=function(e){I.CheckProperyObjectNullOrNotNull(e)?alert("Masih Ada Yang Kosong"):(e.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,e.STORE_ID=U.updateitemproduct.STORE_ID,e.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,e.PERIODE_TGL1=y("date")(new Date(e.PERIODE_TGL1),"yyyy-MM-dd"),e.PERIODE_TGL2=y("date")(new Date(e.PERIODE_TGL2),"yyyy-MM-dd"),e.START_TIME=y("date")(new Date,"HH:mm:ss"),e.STATUS=0,e.DCRP_DETIL="ada ada saja",m.CreateProductHargas(e).then(function(t){U.producthargas.unshift(e),O.show("Penambahan Harga Berhasil Disimpan!","long","bottom")},function(e){O.show("Penambahan Harga Gagal Disimpan!","long","bottom")}))},U.tambahdiskon=function(e){I.CheckProperyObjectNullOrNotNull(e)?alert("Masih Ada Yang Kosong"):(e.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,e.STORE_ID=U.updateitemproduct.STORE_ID,e.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,e.PERIODE_TGL1=y("date")(new Date(e.PERIODE_TGL1),"yyyy-MM-dd"),e.PERIODE_TGL2=y("date")(new Date(e.PERIODE_TGL2),"yyyy-MM-dd"),e.START_TIME=y("date")(new Date,"HH:mm:ss"),e.STATUS=0,e.DCRP_DETIL="ada ada saja",m.CreateProductDiscounts(e).then(function(t){U.productdiscounts.unshift(e),O.show("Penambahan Diskon Berhasil Disimpan!","long","bottom")},function(e){O.show("Penambahan Diskon Gagal Disimpan!","long","bottom")}))},U.tambahgambar=function(e){R.show({titleText:"Ambil Gambar Produk Melalui?",buttons:[{text:'<i class="icon ion-image"></i> Galeri'},{text:'<i class="icon ion-ios-camera-outline"></i> Kamera'}],buttonClicked:function(e){var t={};return t.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,t.STORE_ID=U.updateitemproduct.STORE_ID,t.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,t.STATUS=1,t.DCRP_DETIL="ada ada saja",0==e?document.addEventListener("deviceready",function(){A.getPictures({maximumImagesCount:1,width:800,height:800,quality:80}).then(function(e){for(var o=0;o<e.length;o++)U.userimages=e[o],window.plugins.Base64.encodeFile(U.userimages,function(e){v.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){t.PRODUCT_IMAGE=e,U.productimages?(f.UpdateProductImages(t),m.UpdateProductImages(t).then(function(e){U.productimages=t,C.alert("Gambar Produk Berhasil Diubah","Information","Ok")},function(e){C.alert("Gambar Produk Gagal Diubah","Information","Ok")}).finally(function(){v.hide()})):(f.CreateProductImages(t),m.CreateProductImages(t).then(function(e){U.productimages=t,O.show("Gambar Produk Berhasil Diupload!","long","bottom")},function(e){O.show("Gambar Produk Gagal Diupload!","long","bottom")}).finally(function(){v.hide()}))})})},function(e){console.log("Error: "+JSON.stringify(e))})},!1):1==e&&document.addEventListener("deviceready",function(){var e=I.CameraOptions();D.getPicture(e).then(function(e){v.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){t.PRODUCT_IMAGE="data:image/jpeg;base64,"+e,U.productimages?(f.UpdateProductImages(t),m.UpdateProductImages(t).then(function(e){U.productimages=t,C.alert("Gambar Produk Berhasil Diubah","Information","Ok")},function(e){C.alert("Gambar Produk Gagal Diubah","Information","Ok")}).finally(function(){v.hide()})):(f.CreateProductImages(t),m.CreateProductImages(t).then(function(e){U.productimages=t,O.show("Gambar Produk Berhasil Diupload!","long","bottom")},function(e){O.show("Gambar Produk Gagal Diupload!","long","bottom")}).finally(function(){v.hide()}))})})},!1),!0}})},U.mode={valuechoose:"INFO"},U.titleup=U.mode.valuechoose,U.changemode=function(e){U.titleup=U.mode.valuechoose},U.openmerchantbankpop=function(e){d.GetMerchantBanks().then(function(e){U.merchantsbanks=e}),U.choicemerchantsbank="new"==e?{BANK_ID:U.newmerchant.BANK_ID}:{BANK_ID:U.updatemerchant.BANK_ID},P.confirm({templateUrl:"templates/control/merchants/popupmerchantsbank.html",title:"PILIH BANK?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.merchantsbanks,{BANK_ID:U.choicemerchantsbank.BANK_ID});"new"==e?(U.newmerchant.BANK_ID=U.merchantsbanks[o].BANK_ID,U.newmerchant.BANK_NM=U.merchantsbanks[o].BANK_NM):(U.updatemerchant.BANK_ID=U.merchantsbanks[o].BANK_ID,U.updatemerchant.BANK_NM=U.merchantsbanks[o].BANK_NM)}}]})},U.openmerchanttypepop=function(e){i.GetMerchantTypes().then(function(e){U.merchantstypes=e}),U.choicemerchantstype="new"==e?{TYPE_PAY_ID:U.newmerchant.TYPE_PAY_ID}:{TYPE_PAY_ID:U.updatemerchant.TYPE_PAY_ID},P.confirm({templateUrl:"templates/control/merchants/popupmerchantstype.html",title:"PILIH TYPE PEMBAYARAN?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.merchantstypes,{TYPE_PAY_ID:U.choicemerchantstype.TYPE_PAY_ID});"new"==e?(U.newmerchant.TYPE_PAY_ID=U.merchantstypes[o].TYPE_PAY_ID,U.newmerchant.TYPE_PAY_NM=U.merchantstypes[o].TYPE_PAY_NM):(U.updatemerchant.TYPE_PAY_ID=U.merchantstypes[o].TYPE_PAY_ID,U.updatemerchant.TYPE_PAY_NM=U.merchantstypes[o].TYPE_PAY_NM)}}]})},U.modalnewmerchantopen=function(){N.fromTemplateUrl("templates/control/merchants/modalnewmerchant.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){i.GetMaxMerchantID(U.datadetail.STORE_ID).then(function(e){U.newmerchant={},U.newmerchant.MERCHANT_ID=e,U.newmerchant.STORE_ID=U.datadetail.STORE_ID,U.newmerchant.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newmerchant.STORE_ID=U.datadetail.STORE_ID,U.newmerchant.STATUS=1,U.newmerchant.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd")}).then(function(){I.CheckModalExistOrNot(U.modalnewmerchant)&&(U.modalnewmerchant=e,U.modalnewmerchant.show())},function(e){console.log(e)})})},U.modalnewmerchantsubmit=function(){i.CreateMerchants(U.newmerchant).then(function(e){U.newmerchant.ID_LOCAL=e.ID_LOCAL,U.datamerchants.unshift(U.newmerchant),U.modalnewmerchant.remove(),O.show("Penambahan Merchant Berhasil.","long","bottom")},function(e){O.show("Penambahan Merchant Gagal.","long","bottom")})},U.modalnewmerchantclose=function(){U.modalnewmerchant.remove()},U.modalupdatemerchantopen=function(e,t){N.fromTemplateUrl("templates/control/merchants/modalupdatemerchant.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.datamerchantsebelumdiupdate=angular.copy(e),U.updatemerchant=angular.copy(e),U.indexmerchant=angular.copy(t),I.CheckModalExistOrNot(U.modalupdatemerchant)&&(U.modalupdatemerchant=o,U.modalupdatemerchant.show())})},U.modalupdatemerchantsubmit=function(){_.isEqual(U.datamerchantsebelumdiupdate,U.updatemerchant)||(U.datamerchants[U.indexmerchant]=U.updatemerchant,i.UpdateMerchants(U.updatemerchant).then(function(e){U.datamerchants[U.indexmerchant]=U.updatemerchant,O.show("Data Merchant Berhasil Diupdate!","long","bottom")},function(e){O.show("Data Merchant Gagal Diupdate!","long","bottom")})),U.modalupdatemerchant.remove()},U.modalupdatemerchantclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.modalupdatemerchant.remove()})},U.modalnewcustomeropen=function(){N.fromTemplateUrl("templates/control/customers/modalnewcustomer.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){c.GetMaxCustomerID(U.datadetail.STORE_ID).then(function(e){U.newcustomer={},U.newcustomer.CUSTOMER_ID=e,U.newcustomer.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newcustomer.STORE_ID=U.datadetail.STORE_ID,U.newcustomer.STATUS=1,U.newcustomer.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd")},function(e){console.log(e)}),I.CheckModalExistOrNot(U.newcustomermodal)&&(U.newcustomermodal=e,U.newcustomermodal.show())})},U.modalnewcustomersubmit=function(){c.CreateCustomers(U.newcustomer).then(function(e){U.newcustomer.ID_LOCAL=e.ID_LOCAL,U.datacustomers.unshift(U.newcustomer),U.newcustomermodal.remove(),O.show("Pelanggan Baru Berhasil Disimpan!","long","bottom")},function(e){O.show("Pelanggan Baru Gagal Disimpan!","long","bottom")})},U.modalnewcustomerclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newcustomermodal.remove()})},U.modalupdatecustomeropen=function(e,t){N.fromTemplateUrl("templates/control/customers/modalupdatecustomer.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.updatecustomer=angular.copy(e),U.datacustomersblmdiupdate=angular.copy(e),U.indexcustomer=angular.copy(t),I.CheckModalExistOrNot(U.updatecustomermodal)&&(U.updatecustomermodal=o,U.updatecustomermodal.show())})},U.modalupdatecustomersubmit=function(){_.isEqual(U.datacustomersblmdiupdate,U.updatecustomer)||c.UpdateCustomers(U.updatecustomer).then(function(e){U.datacustomers[U.indexcustomer]=U.updatecustomer,U.updatecustomermodal.remove(),O.show("Data Pelanggan Berhasil Diubah!","long","bottom")},function(e){O.show("Data Pelanggan Gagal Diubah!","long","bottom")})},U.modalupdatecustomerclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.updatecustomermodal.remove()})},U.modalnewkaryawanopen=function(){N.fromTemplateUrl("templates/control/karyawans/modalnewkaryawan.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){r.GetMaxKaryawanID(U.datadetail.STORE_ID).then(function(e){U.newkaryawan={},U.newkaryawan.KARYAWAN_ID=e,U.newkaryawan.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newkaryawan.STORE_ID=U.datadetail.STORE_ID,U.newkaryawan.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),U.newkaryawan.STATUS=1}),I.CheckModalExistOrNot(U.newkaryawanmodal)&&(U.newkaryawanmodal=e,U.newkaryawanmodal.show())})},U.modalnewkaryawansubmit=function(){N.fromTemplateUrl("templates/control/karyawans/modalnewkaryawan.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){r.CreateKaryawans(U.newkaryawan).then(function(e){U.newkaryawan.ID_LOCAL=e.ID_LOCAL,U.datakaryawans.unshift(U.newkaryawan),O.show("Penambahan Karyawan Berhasil.","long","bottom")},function(e){O.show("Penambahan Karyawan Gagal.Periksa Form Inputan Karyawan Dengan Teliti","long","bottom")}).finally(function(){v.hide(),U.newkaryawanmodal.remove()})})},U.modalnewkaryawanclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newkaryawanmodal.remove()})},U.modalupdatekaryawanopen=function(e,t){N.fromTemplateUrl("templates/control/karyawans/modalupdatekaryawan.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.datakaryawansebelumdiupdate=angular.copy(e),U.updatekaryawan=angular.copy(e),U.indexkaryawan=angular.copy(t),I.CheckModalExistOrNot(U.modalupdatekaryawan)&&(U.modalupdatekaryawan=o,U.modalupdatekaryawan.show())})},U.modalupdatekaryawansubmit=function(){_.isEqual(U.datakaryawansebelumdiupdate,U.updatekaryawan)?O.show("Tidak Ada Data Yang Berubah.","long","bottom"):(U.updatekaryawan.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),r.UpdateKaryawans(U.updatekaryawan).then(function(e){U.datakaryawans[U.indexkaryawan]=U.updatekaryawan,U.modalupdatekaryawan.remove(),O.show("Pengubahan Data Karyawan Berhasil.","long","bottom")},function(e){O.show("Pengubahan Data Karyawan Gagal.Periksa Form Inputan Anda.","long","bottom")}))},U.modalupdatekaryawanclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.modalupdatekaryawan.remove()})},U.modalnewuserloginopen=function(){N.fromTemplateUrl("templates/control/userlogins/modalnewuserlogin.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){U.newuserlogin={},I.CheckModalExistOrNot(U.newuserloginmodal)&&(U.newuserloginmodal=e,U.newuserloginmodal.show())})},U.modalnewuserloginsubmit=function(){U.newuserlogin.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newuserlogin.STORE_ID=U.datadetail.STORE_ID,o.RegistrationLoginOps(U.newuserlogin).then(function(e){U.datauserops.unshift(e),O.show("Penambahan Operasional Berhasil Disimpan!","long","bottom")},function(e){O.show("Penambahan Operasional Gagal Disimpan!","long","bottom")}),U.newuserloginmodal.remove()},U.modalnewuserloginclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newuserloginmodal.remove()})},U.modalupdateuserloginopen=function(e){N.fromTemplateUrl("templates/control/userlogins/modalupdateuserlogin.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){U.updateuserlogin=angular.copy(e),U.updateuserloginmodal=t,U.updateuserloginmodal.show()})},U.modalupdateuserloginsubmit=function(){o.UpdateLoginOps(U.updateuserlogin).then(function(e){console.log(e),U.newuserloginmodal.remove(),O.show("Data Operasional Berhasil Diubah!","long","bottom")},function(e){O.show("Data Operasional Gagal Diubah!","long","bottom")})},U.modalupdateuserloginclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.updateuserloginmodal.remove()})},U.toggleGroup=function(e){"basic"==e?(U.showmerchant=!1,U.showproduct=!1,U.showemploye=!1,U.showbasic=!U.showbasic,U.showuserlogin=!1,U.showcustomers=!1):"product"==e?(U.showbasic=!1,U.showmerchant=!1,U.showemploye=!1,U.showproduct=!U.showproduct,U.showuserlogin=!1,U.showcustomers=!1):"merchant"==e?(U.showbasic=!1,U.showproduct=!1,U.showemploye=!1,U.showmerchant=!U.showmerchant,U.showuserlogin=!1,U.showcustomers=!1):"employe"==e?(U.showbasic=!1,U.showproduct=!1,U.showmerchant=!1,U.showemploye=!U.showemploye,U.showuserlogin=!1,U.showcustomers=!1):"userlogin"==e?(U.showbasic=!1,U.showproduct=!1,U.showmerchant=!1,U.showemploye=!1,U.showuserlogin=!U.showuserlogin,U.showcustomers=!1):"customers"==e&&(U.showbasic=!1,U.showproduct=!1,U.showmerchant=!1,U.showemploye=!1,U.showuserlogin=!1,U.showcustomers=!U.showcustomers)},U.isGroupShown=function(e){return U.shownGroup===e}}]),angular.module("starter").controller("ControlGroupProductCtrl",["ConstructorService","StoresCombFac","ProductsLiteFac","SecuredFac","CustomersCombFac","ProvinsisCombFac","MerchantsFac","StoresFac","ProductsFac","ProductsCombFac","StorageService","UtilService","$ionicActionSheet","$cordovaImagePicker","$cordovaCamera","$cordovaDialogs","$cordovaToast","$ionicPopup","$ionicSlideBoxDelegate","$ionicModal","$ionicLoading","$ionicHistory","$scope","$timeout","$state","$filter","$location",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,h,I,A,D,R,C,O,P,g){R.listCanSwipe=!0,R.screenbesar=d.CheckScreenSize(),window.addEventListener("orientationchange",function(){R.screenbesar=d.CheckScreenSize(screen),R.$apply()},!1),R.changesearchshow=function(){R.showsearch=!R.showsearch},R.xxx={string:""},R.changefilter=function(e){R.filterproduct=e},R.$on("$ionicView.beforeEnter",function(){var e=d.GetParameters();t.GetStores(e).then(function(e){R.stores=e,R.store=e[0]})}),R.openstorepopup=function(e){R.choiceview=e,R.choice={STORE_ID:R.choiceview.STORE_ID},S.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH STORE?",scope:R,cssClass:"animated bounceIn",buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){R.choice=angular.copy(R.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(R.stores,{STORE_ID:R.choice.STORE_ID}),o=angular.copy(R.stores[t]);R.store=o,R.dataproducts=void 0,R.loadgroupproduct(o)}}]})},R.loadgroupproduct=function(e){var t=d.GetParameters();e&&(t.STORE_ID=e.STORE_ID),u.GetProductGroups(t).then(function(e){R.groupsproducts=e,e.length>0?R.detailgroupproduct(e[0]):document.addEventListener("deviceready",function(){E.show("Group Produk Untuk Toko Ini Masih Kosong.","long","bottom")})})},R.loadgroupproduct(),R.detailgroupproduct=function(e){A.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),R.showinfoproduct=!0,R.datadetailgroup=e,R.isGroupShown(e)||(R.shownGroup=e),e.TGL_SAVE=P("date")(new Date,"yyyy-MM-dd"),o.GetProductsByGroupID(e).then(function(e){R.dataproducts=e,0==R.dataproducts.length&&document.addEventListener("deviceready",function(){E.show("Produk Untuk Group Ini Masih Kosong.Tambahkan Produk Melalui Menu Produk","long","bottom")}),h.update(),C(function(){A.hide()},2e3)},function(e){console.log(e)})},R.detailgroupproductlayarkecil=function(e){g.path("/tab/control/groupproduct/"+e.STORE_ID+"/"+e.GROUP_ID)},R.modaltambahgroupopen=function(){I.fromTemplateUrl("templates/control/products-group/modalnewgroup.html",{scope:R,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){o.GetMaxProductGroups(R.store.STORE_ID).then(function(t){var o=t[0].MAX_GROUP_ID;R.newgroupproduct=e.ProductGroupConstructor(R.store,o),R.newgroupproduct.STATUS=1},function(e){console.log(e)}),d.CheckModalExistOrNot(R.tambahgroupproduct)&&(R.tambahgroupproduct=t,R.tambahgroupproduct.show())})},R.modaltambahgroupsubmit=function(e){e.$invalid=!0,o.CreateProductGroups(R.newgroupproduct).then(function(e){R.newgroupproduct.ID_LOCAL=e.insertId,R.groupsproducts.unshift(R.newgroupproduct),R.detailgroupproduct(R.newgroupproduct),E.show("Penambahan Grup Produk Berhasil Disimpan!","long","bottom")},function(e){E.show("Penambahan Grup Produk Gagal Disimpan!","long","bottom")}),R.tambahgroupproduct&&R.tambahgroupproduct.remove()},R.modaltambahgroupclose=function(){R.tambahgroupproduct.remove()},R.modalupdategroupopen=function(e,t){I.fromTemplateUrl("templates/control/products-group/modalupdategroup.html",{scope:R,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){R.updategroup=angular.copy(e),R.groupsebelumdiupdate=angular.copy(e),R.indexgroupproduct=angular.copy(t),d.CheckModalExistOrNot(R.modalupdategroup)&&(R.modalupdategroup=o,R.modalupdategroup.show())})},R.modalupdategroupsubmit=function(){_.isEqual(R.groupsebelumdiupdate,R.updategroup)||o.UpdateProductGroups(R.updategroup).then(function(e){C(function(){R.groupsproducts[R.indexgroupproduct]=R.updategroup,R.detailgroupproduct(R.updategroup),R.isGroupShown(R.updategroup)||(R.shownGroup=R.updategroup)},10),E.show("Data Grup Produk Berhasil Diubah!","long","bottom")},function(e){E.show("Data Grup Produk Gagal Diubah!","long","bottom")}),R.modalupdategroup&&R.modalupdategroup.remove()},R.modalupdategroupclose=function(){R.modalupdategroup.remove()},R.toggleGroup=function(e){"infogroup"==e&&(R.showinfoproduct=!1,R.showinfogroup=!R.showinfogroup),"infoproduct"==e&&(h.update(),R.showinfogroup=!1,R.showinfoproduct=!R.showinfoproduct)},R.isGroupShown=function(e){return R.shownGroup===e}}]).controller("ControlGroupProductDetailCtrl",["$stateParams","StoresCombFac","ProductsLiteFac","SecuredFac","CustomersCombFac","ProvinsisCombFac","MerchantsFac","StoresFac","ProductsFac","ProductsCombFac","StorageService","UtilService","$ionicActionSheet","$cordovaImagePicker","$cordovaCamera","$cordovaDialogs","$cordovaToast","$ionicPopup","$ionicSlideBoxDelegate","$ionicModal","$ionicLoading","$ionicHistory","$scope","$timeout","$state","$filter","$location",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,_,h,I,A,D,R,C,O,P){var g={};g.STORE_ID=e.storeid,g.GROUP_ID=e.groupid,g.TGL_SAVE=O("date")(new Date,"yyyy-MM-dd"),o.GetProductsByGroupID(g).then(function(e){D.dataproducts=e,0==D.dataproducts.length&&document.addEventListener("deviceready",function(){E.show("Produk Untuk Group Ini Masih Kosong.Tambahkan Produk Melalui Menu Produk","long","bottom")}),_.update(),R(function(){I.hide()},2e3)},function(e){console.log(e)})}]),angular.module("starter").controller("ControlPembayaranIuranCtrl",["StoresLiteFac","StoresCombFac","SecuredFac","KaryawansCombFac","KaryawansFac","KaryawansLiteFac","MerchantsLiteFac","MerchantsCombFac","CustomersLiteFac","CustomersCombFac","ProvinsisCombFac","MerchantsFac","StoresFac","ProductStockLiteFac","ProductsFac","ProductsLiteFac","ProductsCombFac","ConstructorService","StorageService","UtilService","$cordovaImagePicker","$cordovaCamera","$ionicActionSheet","$cordovaDialogs","$cordovaToast","$ionicPopup","$ionicSlideBoxDelegate","$ionicModal","$ionicLoading","$ionicHistory","$scope","$timeout","$state","$filter",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,_,h,I,A,D,R,C,O,P,g,N,v,b,U,w,L){b.screenbesar=h.CheckScreenSize(),window.addEventListener("orientationchange",function(){b.screenbesar=h.CheckScreenSize(screen),b.$apply()},!1),b.myActiveSlide=1,b.loadstores=function(){var e=h.GetParameters();t.GetStores(e).then(function(e){b.datastores=e,U(function(){b.detailstore(b.datastores[0])},10)})},b.loadstores(),b.openmodalactive=function(e){if("MERCHANT"==e)b.modalnewmerchantopen();else if("KARYAWAN"==e)b.modalnewkaryawanopen();else if("OPERASIONAL"==e)b.modalnewuserloginopen();else if("PELANGGAN"==e)b.modalnewcustomeropen();else if("INFORMASI"==e){var t=angular.copy(b.datadetail);b.modalupdatestoreopen(t)}},b.detailstore=function(e){b.viewtoshow={valuechoose:"MERCHANT"},b.showbasic=!1,b.showproduct=!0,b.showmerchant=!1,b.showemploye=!1,b.datadetail=e,b.isGroupShown(e)||(b.shownGroup=e,N.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}));var t=h.GetParameters();t.STORE_ID=e.STORE_ID,E.GetProducts(t).then(function(e){b.dataproducts=e,P.update(),U(function(){N.hide()},2e3)},function(e){console.log(e)}),s.GetMerchants(t).then(function(e){b.datamerchants=e},function(e){console.log(e)}),u.GetCustomers(t).then(function(e){b.datacustomers=e},function(e){console.log(e)}),n.GetKaryawans(t).then(function(e){b.datakaryawans=e}),o.GetListUserOps(t).then(function(e){b.datauserops=e},function(e){console.log(e)})},b.toggleGroup=function(e){"basic"==e?(b.showmerchant=!1,b.showproduct=!1,b.showemploye=!1,b.showbasic=!b.showbasic,b.showuserlogin=!1,b.showcustomers=!1):"product"==e?(b.showbasic=!1,b.showmerchant=!1,b.showemploye=!1,b.showproduct=!b.showproduct,b.showuserlogin=!1,b.showcustomers=!1):"merchant"==e?(b.showbasic=!1,b.showproduct=!1,b.showemploye=!1,b.showmerchant=!b.showmerchant,b.showuserlogin=!1,b.showcustomers=!1):"employe"==e?(b.showbasic=!1,b.showproduct=!1,b.showmerchant=!1,b.showemploye=!b.showemploye,b.showuserlogin=!1,b.showcustomers=!1):"userlogin"==e?(b.showbasic=!1,b.showproduct=!1,b.showmerchant=!1,b.showemploye=!1,b.showuserlogin=!b.showuserlogin,b.showcustomers=!1):"customers"==e&&(b.showbasic=!1,b.showproduct=!1,b.showmerchant=!1,b.showemploye=!1,b.showuserlogin=!1,b.showcustomers=!b.showcustomers)},b.isGroupShown=function(e){return b.shownGroup===e}}]),angular.module("starter").controller("ControlProductsCtrl",["ToastService","StoresCombFac","ProductsLiteFac","ProductStockLiteFac","SecuredFac","CustomersCombFac","ProvinsisCombFac","MerchantsFac","StoresFac","ProductsFac","ProductsCombFac","StorageService","ConstructorService","UtilService","$ionicListDelegate","$ionicActionSheet","$cordovaImagePicker","$cordovaCamera","$cordovaDialogs","$ionicPopup","$ionicSlideBoxDelegate","$ionicModal","$ionicLoading","$ionicHistory","$scope","$timeout","$state","$filter",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,h,I,A,D,R,C,O,P,g,N){O.screenbesar=p.CheckScreenSize(),window.addEventListener("orientationchange",function(){O.screenbesar=p.CheckScreenSize(screen),O.$apply()},!1),O.changeunitproduct=function(e){O.productunitdetails=N("filter")(O.productunitall,{UNIT_ID_GRP:parseInt(e.UNIT_ID_GRP)}),O.choiceproductunitdetail={},I.confirm({templateUrl:"templates/control/products/popupproductunitdetail.html",title:"PILIH DETAIL UNIT PRODUK?",scope:O,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(e){O.popup1.close();var t=_.findIndex(O.productunitall,{UNIT_ID:O.choiceproductunitdetail.UNIT_ID});"new"==O.modeupdateorcreate?(O.newproduct.UNIT_ID=O.productunitall[t].UNIT_ID,O.newproduct.UNIT_NM=O.productunitall[t].UNIT_NM):(O.updateitemproduct.UNIT_ID=O.productunitall[t].UNIT_ID,O.updateitemproduct.UNIT_NM=O.productunitall[t].UNIT_NM)}}]})},O.changesearchshow=function(){O.showsearch=!O.showsearch},O.xxx={string:""},O.changefilter=function(e){O.filterproduct=e},O.$on("$ionicView.beforeEnter",function(){O.showsearch=!1;var e=p.GetParameters();t.GetStores(e).then(function(e){O.stores=e,O.store=e[0]})}),O.openmodalactive=function(e){var t=O.datadetailproduct;"RADIOINFORMASI"==e?O.modalupdateproductopen(t):"RADIOHARGA"==e?O.modaltambahproducthargaopen(t):"RADIOSTOCK"==e?O.modaltambahproductstockopen(t):"RADIODISKON"==e?O.modaltambahproductdiscountopen(t):"RADIOGAMBAR"==e&&O.tambahgambar(t)},O.openstorepopup=function(e){O.choiceview=e,O.choice={STORE_ID:O.choiceview.STORE_ID},I.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH STORE?",scope:O,cssClass:"animated bounceIn",buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){O.choice=angular.copy(O.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(O.stores,{STORE_ID:O.choice.STORE_ID}),o=angular.copy(O.stores[t]);O.store=o,O.loadproducts(o)}}]})},O.loadproducts=function(e){var t=p.GetParameters();e&&(t.STORE_ID=e.STORE_ID),l.GetProducts(t).then(function(e){O.dataproducts=e,P(function(){O.detailproduct(O.dataproducts[0])},10)},function(e){console.log(e)})},O.loadproducts(),O.detailproduct=function(e){O.viewtoshow={valuechoose:"RADIOINFORMASI"},R.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>',duration:1500}),O.showinfoproduct=!1,O.showhargaproduct=!1,O.showstockproduct=!1,O.showdiscountproduct=!1,O.showgambarproduct=!0,O.datadetailproduct=e,O.isGroupShown(e)||(O.shownGroup=e);var t=p.GetParameters();t.PRODUCT_ID=e.PRODUCT_ID,l.GetProductStocks(t).then(function(e){O.productstocks=e},function(e){console.log(e)}),u.GetProductHargas(t).then(function(e){O.producthargas=[],angular.isDefined(e[t.STORE_ID])&&(O.producthargas=e[t.STORE_ID])},function(e){console.log(e)}),u.GetProductDiscounts(t).then(function(e){O.productdiscounts=e},function(e){console.log(e)})},O.modaldetailproductlayarkecilopen=function(e){O.isGroupShown(e)||(O.shownGroup=e),D.fromTemplateUrl("templates/control/products/modalupdateproductlayarkecil.html",{scope:O,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){O.productssebelumdiupdate=angular.copy(e),O.updateitemproduct=angular.copy(e),O.newstock={CURRENT_STOCK:O.updateitemproduct.CURRENT_STOCK,FORM_INPUT_STOCK:null},O.datadetailproduct=angular.copy(e),O.indexproductyangdiubah=_.findIndex(O.dataproducts,{PRODUCT_ID:O.datadetailproduct.PRODUCT_ID});var o=p.GetParameters();o.PRODUCT_ID=O.updateitemproduct.PRODUCT_ID,l.GetProductStocks(o).then(function(e){O.productstocks=e},function(e){console.log(e)}),u.GetProductHargas(o).then(function(e){O.producthargas=[],angular.isDefined(e[o.STORE_ID])&&(O.producthargas=e[o.STORE_ID])},function(e){console.log(e)}),u.GetProductDiscounts(o).then(function(e){O.productdiscounts=e},function(e){console.log(e)}),p.CheckModalExistOrNot(O.modalupdateproductlayarkecil)&&(O.modalupdateproductlayarkecil=t,O.modalupdateproductlayarkecil.show())})},O.modaldetailproductlayarkecilclose=function(e){O.modalupdateproductlayarkecil.remove()},O.openproductunitspop=function(e){O.modeupdateorcreate=angular.copy(e);var t=p.GetParameters();if(u.GetProductUnits(t).then(function(e){O.productunitall=angular.copy(e),O.productunits=_.uniq(e,"UNIT_ID_GRP")},function(e){console.log(e)}),"new"==O.modeupdateorcreate){var o=_.find(O.productunitall,{UNIT_ID:O.newproduct.UNIT_ID});O.choiceproductunits=o?{UNIT_ID_GRP:o.UNIT_ID_GRP}:{UNIT_ID_GRP:void 0}}else{o=_.find(O.productunitall,{UNIT_ID:O.updateitemproduct.UNIT_ID});O.choiceproductunits={UNIT_ID_GRP:o.UNIT_ID_GRP}}O.popup1=I.confirm({templateUrl:"templates/control/products/popupproductunits.html",title:"PILIH UNIT PRODUK?",scope:O,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}}]})},O.openproductgroupspop=function(e){var t=p.GetParameters();t.STORE_ID=O.store.STORE_ID,o.GetProductGroups(t).then(function(e){O.productgroups=e}),O.choiceproductgroups="new"==e?{GROUP_ID:O.newproduct.GROUP_ID}:{GROUP_ID:O.updateitemproduct.GROUP_ID},I.confirm({templateUrl:"templates/control/products/popupproductgroups.html",title:"PILIH KATEGORI PRODUK?",scope:O,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){console.log(O.choiceproductgroups)}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(O.productgroups,{GROUP_ID:O.choiceproductgroups.GROUP_ID});"new"==e?(O.newproduct.GROUP_ID=O.productgroups[o].GROUP_ID,O.newproduct.GROUP_NM=O.productgroups[o].GROUP_NM):(O.updateitemproduct.GROUP_ID=O.productgroups[o].GROUP_ID,O.updateitemproduct.GROUP_NM=O.productgroups[o].GROUP_NM)}}]})},O.tambahproductgroup=function(){h.prompt("","Tambah Kategori",["Simpan","Cancel"],"").then(function(t){var n=t.input1;1==t.buttonIndex&&n.length>3&&o.GetMaxProductGroups(O.store.STORE_ID).then(function(e){var t={};return t.ACCESS_GROUP=O.store.ACCESS_GROUP,t.STORE_ID=O.store.STORE_ID,t.STATUS=1,t.GROUP_ID=e,t.GROUP_NM=n,t.NOTE="Catatan Untuk Product Group",t}).then(function(t){o.CreateProductGroups(t).then(function(o){t.ID_LOCAL=o.insertId,O.productgroups.push(t),e.ShowToast("Kategori Produk Berhasil Ditambahkan!","success")},function(t){e.ShowToast("Kategori Produk Gagal Ditambahkan!","error")})},function(e){console.log(e)})})},O.updateproductgroup=function(t,n){h.prompt("","Ubah Kategori",["Simpan","Cancel"],t.GROUP_NM).then(function(a){var r=a.input1;1==a.buttonIndex&&r.length>3&&(t.GROUP_NM=r,O.productgroups[n]=t,o.UpdateProductGroups(t).then(function(t){e.ShowToast("Kategori Produk Berhasil Diubah!","success")},function(t){e.ShowToast("Kategori Produk Gagal Diubah!","error")}))})},O.modaltambahproductopen=function(){D.fromTemplateUrl("templates/control/products/modalnewproduct.html",{scope:O,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){o.GetMaxProductID(O.store.STORE_ID).then(function(t){O.newproduct={},O.newproduct.PRODUCT_ID=t,O.newproduct.TGL_SAVE=N("date")(new Date,"yyyy-MM-dd"),O.newproduct.ACCESS_GROUP=O.store.ACCESS_GROUP,O.newproduct.STORE_ID=O.store.STORE_ID,O.newproduct.PROMO="Belum Ada Promo",O.newproduct.STATUS=1,O.newproduct.IS_FAVORITE=0,p.CheckModalExistOrNot(O.tambahproduct)&&(O.tambahproduct=e,O.tambahproduct.show())},function(e){console.log(e)})})},O.modaltambahproductsubmit=function(t){t.$invalid=!0,O.tambahproduct.remove(),O.newproduct.GROUP_ID||(O.newproduct.GROUP_ID=O.store.STORE_ID+".00001",O.newproduct.GROUP_NM="LAIN-LAIN"),O.newproduct.PRODUCT_SIZE||(O.newproduct.PRODUCT_SIZE=0),O.newproduct.STOCK_LEVEL||(O.newproduct.STOCK_LEVEL=0),o.CreateProducts(O.newproduct).then(function(t){O.newproduct.ID_LOCAL=t.ID_LOCAL,O.dataproducts.unshift(O.newproduct),O.detailproduct(O.newproduct),e.ShowToast("Penambahan Produk Berhasil Disimpan!","success")},function(t){e.ShowToast("Penambahan Produk Gagal Disimpan!","error")})},O.modaltambahproductclose=function(){h.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&O.tambahproduct.remove()})},O.modalupdateproductopen=function(e){m.closeOptionButtons(),O.productssebelumdiupdate=angular.copy(e),D.fromTemplateUrl("templates/control/products/modalupdateproductlayarbesar.html",{scope:O,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){O.updateitemproduct=angular.copy(e),p.CheckModalExistOrNot(O.modalupdateproduct)&&(O.modalupdateproduct=t,O.modalupdateproduct.show())})},O.modalupdateproductsubmit=function(){_.isEqual(O.productssebelumdiupdate,O.updateitemproduct)||(O.updateitemproduct.GROUP_ID||(O.updateitemproduct.GROUP_ID=O.store.STORE_ID+".00001",O.updateitemproduct.GROUP_NM="LAIN-LAIN"),o.UpdateProducts(O.updateitemproduct).then(function(t){var o=_.findIndex(O.dataproducts,{PRODUCT_ID:O.updateitemproduct.PRODUCT_ID});P(function(){O.dataproducts[o]=O.updateitemproduct,O.detailproduct(O.updateitemproduct),O.isGroupShown(O.updateitemproduct)||(O.shownGroup=O.updateitemproduct)},10),e.ShowToast("Data Produk Berhasil Diubah!","success")},function(t){e.ShowToast("Data Produk Gagal Diubah!","error")})),O.modalupdateproduct?O.modalupdateproduct.remove():O.modalupdateproductlayarkecil.remove()},O.modalupdateproductclose=function(){h.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&O.modalupdateproduct.remove()})},O.modaltambahproductstockopen=function(){D.fromTemplateUrl("templates/control/products/modalnewproductstock.html",{scope:O,backdropClickToClose:!0,hardwareBackButtonClose:!1}).then(function(e){O.newstock=p.GetParameters(),O.newstock.CURRENT_STOCK=O.datadetailproduct.CURRENT_STOCK,O.newstock.FORM_INPUT_STOCK=void 0,O.indexproductyangdiubah=_.findIndex(O.dataproducts,{PRODUCT_ID:O.datadetailproduct.PRODUCT_ID}),p.CheckModalExistOrNot(O.modaltambahproductstock)&&(O.modaltambahproductstock=e,O.modaltambahproductstock.show())})},O.tambahstock=function(t){t=angular.copy(t);p.CheckProperyObjectNullOrNotNull(t)?alert("Masih Ada Yang Kosong"):(t.TGL_SAVE=N("date")(new Date,"yyyy-MM-dd"),t.ACCESS_GROUP=O.datadetailproduct.ACCESS_GROUP,t.STORE_ID=O.datadetailproduct.STORE_ID,t.PRODUCT_ID=O.datadetailproduct.PRODUCT_ID,t.INPUT_STOCK=t.FORM_INPUT_STOCK,t.LAST_STOCK=0,t.SISA_STOCK=0,t.INPUT_DATE=N("date")(new Date,"yyyy-MM-dd"),t.INPUT_TIME=N("date")(new Date,"HH:mm:ss"),t.CURRENT_DATE=N("date")(new Date,"yyyy-MM-dd"),t.CURRENT_TIME=N("date")(new Date,"HH:mm:ss"),t.STATUS=1,t.DCRP_DETIL="ada ada saja",n.CreateProductStocks(t).then(function(n){t.ID_LOCAL=n.ID_LOCAL,t.CURRENT_STOCK=Number(O.dataproducts[O.indexproductyangdiubah].CURRENT_STOCK)+Number(t.INPUT_STOCK),O.dataproducts[O.indexproductyangdiubah].CURRENT_STOCK=t.CURRENT_STOCK,O.productstocks.unshift(t),o.UpdateProductsQuantity(t).then(function(e){O.newstock={},O.newstock.CURRENT_STOCK=t.CURRENT_STOCK,O.newstock.FORM_INPUT_STOCK=void 0},function(e){console.log(e)}),O.modaltambahproductstock&&O.modaltambahproductstock.remove(),e.ShowToast("Penambahan Stok Berhasil Disimpan!","success")},function(t){e.ShowToast("Penambahan Stok Gagal Disimpan!","error")}))},O.modaltambahproductstockclose=function(){h.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&O.modaltambahproductstock.remove()})},O.modaltambahproducthargaopen=function(){D.fromTemplateUrl("templates/control/products/modalnewproductharga.html",{scope:O,backdropClickToClose:!0,hardwareBackButtonClose:!1}).then(function(e){O.newproductharga={},p.CheckModalExistOrNot(O.tambahproductharga)&&(O.tambahproductharga=e,O.tambahproductharga.show())})},O.tambahharga=function(t){p.CheckProperyObjectNullOrNotNull(t)?alert("Masih Ada Yang Kosong"):(t.ACCESS_GROUP=O.datadetailproduct.ACCESS_GROUP,t.STORE_ID=O.datadetailproduct.STORE_ID,t.PRODUCT_ID=O.datadetailproduct.PRODUCT_ID,t.PERIODE_TGL1=N("date")(new Date(t.PERIODE_TGL1),"yyyy-MM-dd"),t.PERIODE_TGL2=N("date")(new Date(t.PERIODE_TGL2),"yyyy-MM-dd"),t.START_TIME=N("date")(new Date,"HH:mm:ss"),t.STATUS=0,t.DCRP_DETIL="ada ada saja",u.CreateProductHargas(t).then(function(o){O.producthargas.unshift(t),O.tambahproductharga.remove(),e.ShowToast("Penambahan Harga Berhasil Disimpan!","success")},function(t){e.ShowToast("Penambahan Harga Gagal Disimpan!","error")}))},O.modaltambahproducthargaclose=function(){h.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&O.tambahproductharga.remove()})},O.modaltambahproductdiscountopen=function(){D.fromTemplateUrl("templates/control/products/modalnewproductdiscount.html",{scope:O,backdropClickToClose:!0,hardwareBackButtonClose:!1}).then(function(e){O.newproductdiscount={},p.CheckModalExistOrNot(O.tambahproductdiscount)&&(O.tambahproductdiscount=e,O.tambahproductdiscount.show())})},O.tambahdiskon=function(t){p.CheckProperyObjectNullOrNotNull(t)?alert("Masih Ada Yang Kosong"):(t.ACCESS_GROUP=O.datadetailproduct.ACCESS_GROUP,t.STORE_ID=O.datadetailproduct.STORE_ID,t.PRODUCT_ID=O.datadetailproduct.PRODUCT_ID,t.PERIODE_TGL1=N("date")(new Date(t.PERIODE_TGL1),"yyyy-MM-dd"),t.PERIODE_TGL2=N("date")(new Date(t.PERIODE_TGL2),"yyyy-MM-dd"),t.START_TIME=N("date")(new Date,"HH:mm:ss"),t.STATUS=0,t.DCRP_DETIL="ada ada saja",u.CreateProductDiscounts(t).then(function(o){O.productdiscounts.unshift(t),O.tambahproductdiscount.remove(),e.ShowToast("Penambahan Diskon Berhasil Disimpan!","success")},function(t){e.ShowToast("Penambahan Diskon Gagal Disimpan!","error")}))},O.modaltambahproductdiscountclose=function(){h.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&O.tambahproductdiscount.remove()})},O.tambahgambar=function(t){t&&(O.updateitemproduct=angular.copy(t)),f.show({titleText:"Ambil Gambar Produk Melalui?",buttons:[{text:'<i class="icon ion-image"></i> Galeri'},{text:'<i class="icon ion-ios-camera-outline"></i> Kamera'}],buttonClicked:function(t){var n={};return n.ACCESS_GROUP=O.updateitemproduct.ACCESS_GROUP,n.STORE_ID=O.updateitemproduct.STORE_ID,n.PRODUCT_ID=O.updateitemproduct.PRODUCT_ID,n.STATUS=1,n.DCRP_DETIL="ada ada saja",0==t?document.addEventListener("deviceready",function(){E.getPictures({maximumImagesCount:1,width:800,height:800,quality:80}).then(function(t){for(var a=0;a<t.length;a++)O.userimages=t[a],window.plugins.Base64.encodeFile(O.userimages,function(t){R.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){n.PRODUCT_IMAGE=t,O.productimages?(o.UpdateProductImages(n),u.UpdateProductImages(n).then(function(e){O.productimages=n,h.alert("Gambar Produk Berhasil Diubah","Information","Ok")},function(e){h.alert("Gambar Produk Gagal Diubah","Information","Ok")}).finally(function(){R.hide()})):(o.CreateProductImages(n).then(function(e){console.log(e)},function(e){console.log(e)}),u.CreateProductImages(n).then(function(t){O.productimages=n,e.ShowToast("Gambar Produk Berhasil Diupload!","success")},function(t){e.ShowToast("Gambar Produk Gagal Diupload!","error")}).finally(function(){R.hide()}))})})},function(e){console.log("Error: "+JSON.stringify(e))})},!1):1==t&&document.addEventListener("deviceready",function(){var t=p.CameraOptions();S.getPicture(t).then(function(t){R.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){n.PRODUCT_IMAGE="data:image/jpeg;base64,"+t,O.productimages?(o.UpdateProductImages(n),u.UpdateProductImages(n).then(function(e){O.productimages=n,h.alert("Gambar Produk Berhasil Diubah","Information","Ok")},function(e){h.alert("Gambar Produk Gagal Diubah","Information","Ok")}).finally(function(){R.hide()})):(o.CreateProductImages(n).then(function(e){console.log(e)},function(e){console.log(e)}),u.CreateProductImages(n).then(function(t){O.productimages=n,e.ShowToast("Gambar Produk Berhasil Diupload!","success")},function(t){e.ShowToast("Gambar Produk Gagal Diupload!","error")}).finally(function(){R.hide()}))})})},!1),!0}})},O.modalviewgambaropen=function(){D.fromTemplateUrl("templates/control/products/modalviewgambarproduct.html",{scope:O,animation:"slide-in-up"}).then(function(e){p.CheckModalExistOrNot(O.modalviewigambar)&&(O.modalviewigambar=e,O.modalviewigambar.show())})},O.modalviewgambarclose=function(){O.modalviewigambar.remove()},O.mode={valuechoose:"INFO"},O.titleup=O.mode.valuechoose,O.changemode=function(e){O.titleup=O.mode.valuechoose},O.toggleGroup=function(e){"infoproduct"==e?(O.showhargaproduct=!1,O.showstockproduct=!1,O.showdiscountproduct=!1,O.showgambarproduct=!1,O.showinfoproduct=!O.showinfoproduct):"hargaproduct"==e?(O.showinfoproduct=!1,O.showstockproduct=!1,O.showdiscountproduct=!1,O.showhargaproduct=!O.showhargaproduct):"stockproduct"==e?(O.showinfoproduct=!1,O.showhargaproduct=!1,O.showdiscountproduct=!1,O.showgambarproduct=!1,O.showstockproduct=!O.showstockproduct):"discountproduct"==e?(O.showinfoproduct=!1,O.showhargaproduct=!1,O.showstockproduct=!1,O.showgambarproduct=!1,O.showdiscountproduct=!O.showdiscountproduct):"gambarproduct"==e&&(O.showinfoproduct=!1,O.showhargaproduct=!1,O.showstockproduct=!1,O.showdiscountproduct=!1,O.showgambarproduct=!O.showgambarproduct)},O.isGroupShown=function(e){return O.shownGroup===e}}]),angular.module("starter").controller("ControlStoresCtrl",["StoresLiteFac","StoresCombFac","SecuredFac","KaryawansCombFac","KaryawansFac","KaryawansLiteFac","MerchantsLiteFac","MerchantsCombFac","CustomersLiteFac","CustomersCombFac","ProvinsisCombFac","MerchantsFac","StoresFac","ProductStockLiteFac","ProductsFac","ProductsLiteFac","ProductsCombFac","ConstructorService","StorageService","UtilService","$cordovaImagePicker","$cordovaCamera","$ionicActionSheet","$cordovaDialogs","$cordovaToast","$ionicPopup","$ionicSlideBoxDelegate","$ionicModal","$ionicLoading","$ionicHistory","$scope","$timeout","$state","$filter",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,h,I,A,D,R,C,O,P,g,N,v,b,U,w,L,y){U.screenbesar=I.CheckScreenSize(),window.addEventListener("orientationchange",function(){U.screenbesar=I.CheckScreenSize(screen),U.$apply()},!1),U.myActiveSlide=1,U.loadstores=function(){var e=I.GetParameters();t.GetStores(e).then(function(e){U.datastores=e,w(function(){U.detailstore(U.datastores[0])},10)})},U.loadstores(),U.openmodalactive=function(e){if("MERCHANT"==e)U.modalnewmerchantopen();else if("KARYAWAN"==e)U.modalnewkaryawanopen();else if("OPERASIONAL"==e)U.modalnewuserloginopen();else if("PELANGGAN"==e)U.modalnewcustomeropen();else if("INFORMASI"==e){var t=angular.copy(U.datadetail);U.modalupdatestoreopen(t)}},U.detailstore=function(e){U.viewtoshow={valuechoose:"MERCHANT"},U.showbasic=!1,U.showproduct=!0,U.showmerchant=!1,U.showemploye=!1,U.datadetail=e,U.isGroupShown(e)||(U.shownGroup=e,v.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}));var t=I.GetParameters();t.STORE_ID=e.STORE_ID,E.GetProducts(t).then(function(e){U.dataproducts=e,g.update(),w(function(){v.hide()},2e3)},function(e){console.log(e)}),s.GetMerchants(t).then(function(e){U.datamerchants=e},function(e){console.log(e)}),u.GetCustomers(t).then(function(e){U.datacustomers=e},function(e){console.log(e)}),n.GetKaryawans(t).then(function(e){U.datakaryawans=e}),o.GetListUserOps(t).then(function(e){U.datauserops=e},function(e){console.log(e)})},U.openstorepopup=function(e){h.get("advanced-profile");U.stores=U.datastores,U.choiceview=e,U.choice={STORE_ID:U.choiceview.STORE_ID},P.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH STORE?",scope:U,cssClass:"animated bounceIn",buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){U.choice=angular.copy(U.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(U.datastores,{STORE_ID:U.choice.STORE_ID}),o=angular.copy(U.datastores[t]);U.detailstore(o)}}]})},U.openprovinsipopup=function(e){l.GetProvinsisComb().then(function(e){U.provinsis=e},function(e){alert("Error")}),"new"==e?(U.sebelumberubah={PROVINCE_ID:U.newstore.PROVINCE_ID},U.choicepropinsi={PROVINCE_ID:U.newstore.PROVINCE_ID}):(U.sebelumberubah={PROVINCE_ID:U.updatestore.PROVINCE_ID},U.choicepropinsi={PROVINCE_ID:U.updatestore.PROVINCE_ID}),P.confirm({templateUrl:"templates/control/provinsis.html",title:"PILIH PROVINSI?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){if(!_.isEqual(U.sebelumberubah,U.choicepropinsi)){var o=_.findIndex(U.provinsis,{PROVINCE_ID:Number(U.choicepropinsi.PROVINCE_ID)});"new"==e?(U.newstore.PROVINCE_NM=U.provinsis[o].PROVINCE,U.newstore.PROVINCE_ID=U.provinsis[o].PROVINCE_ID,U.newstore.CITY_NAME=null,U.newstore.CITY_ID=null):(U.updatestore.PROVINCE_NM=U.provinsis[o].PROVINCE,U.updatestore.PROVINCE_ID=U.provinsis[o].PROVINCE_ID,U.updatestore.CITY_NAME=null,U.updatestore.CITY_ID=null)}}}]})},U.openkotapopup=function(e){U.choicepropinsi||(U.choicepropinsi=U.updatestore),l.GetKotasComb(U.choicepropinsi).then(function(e){U.kotas=e},function(e){console.log(e)}),U.choicekota="new"==e?{CITY_ID:U.newstore.CITY_ID}:{CITY_ID:U.updatestore.CITY_ID},P.confirm({templateUrl:"templates/control/kota.html",title:"PILIH KOTA?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.kotas,{CITY_ID:Number(U.choicekota.CITY_ID)});"new"==e?(U.newstore.CITY_NAME=U.kotas[o].CITY_NAME,U.newstore.CITY_ID=U.kotas[o].CITY_ID):(U.updatestore.CITY_NAME=U.kotas[o].CITY_NAME,U.updatestore.CITY_ID=U.kotas[o].CITY_ID)}}]})},U.opengroupindustripopup=function(e){m.GetProductIndustriGroups().then(function(e){U.industrigroups=e}),"new"==e?(U.sebelumberubah={INDUSTRY_GRP_ID:U.newstore.INDUSTRY_GRP_ID},U.choiceindustrigroups={INDUSTRY_GRP_ID:U.newstore.INDUSTRY_GRP_ID}):(U.sebelumberubah={INDUSTRY_GRP_ID:U.updatestore.INDUSTRY_GRP_ID},U.choiceindustrigroups={INDUSTRY_GRP_ID:U.updatestore.INDUSTRY_GRP_ID}),P.confirm({templateUrl:"templates/control/products/popupindustrigroups.html",title:"PILIH GROUP INDUSTRI?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){if(!_.isEqual(U.sebelumberubah,U.choiceindustrigroups)){var o=_.findIndex(U.industrigroups,{INDUSTRY_GRP_ID:Number(U.choiceindustrigroups.INDUSTRY_GRP_ID)});"new"==e?(U.newstore.INDUSTRY_GRP_NM=U.industrigroups[o].INDUSTRY_GRP_NM,U.newstore.INDUSTRY_GRP_ID=U.industrigroups[o].INDUSTRY_GRP_ID,U.newstore.INDUSTRY_NM=null,U.newstore.INDUSTRY_ID=null):(U.updatestore.INDUSTRY_GRP_NM=U.industrigroups[o].INDUSTRY_GRP_NM,U.updatestore.INDUSTRY_GRP_ID=U.industrigroups[o].INDUSTRY_GRP_ID,U.updatestore.INDUSTRY_NM=null,U.updatestore.INDUSTRY_ID=null)}}}]})},U.openindustripopup=function(e){console.log(U.choiceindustrigroups),U.choiceindustrigroups||(U.choiceindustrigroups={},U.choiceindustrigroups.INDUSTRY_GRP_ID=U.updatestore.INDUSTRY_GRP_ID),m.GetProductIndustris(U.choiceindustrigroups).then(function(e){U.productindustris=e}),U.choiceproductindustris="new"==e?{INDUSTRY_ID:U.newstore.INDUSTRY_ID}:{INDUSTRY_ID:U.updatestore.INDUSTRY_ID},P.confirm({templateUrl:"templates/control/products/popupproductindustris.html",title:"PILIH INDUSTRI?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){if(!_.isEqual(U.sebelumberubah,U.choiceproductindustris)){var o=_.findIndex(U.productindustris,{INDUSTRY_ID:Number(U.choiceproductindustris.INDUSTRY_ID)});"new"==e?(U.newstore.INDUSTRY_NM=U.productindustris[o].INDUSTRY_NM,U.newstore.INDUSTRY_ID=U.productindustris[o].INDUSTRY_ID):(U.updatestore.INDUSTRY_NM=U.productindustris[o].INDUSTRY_NM,U.updatestore.INDUSTRY_ID=U.productindustris[o].INDUSTRY_ID)}}}]})},U.modalnewstoreopen=function(){N.fromTemplateUrl("templates/control/stores/modalnewstore.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){var o=I.GetParameters();e.GetMaxStoreID(o.ACCESS_GROUP).then(function(e){U.newstore=S.StoreConstructor(),U.newstore.STORE_ID=e,U.newstore.STORE_NM="",U.newstore.STATUS=1}).then(function(){I.CheckModalExistOrNot(U.newstoremodal)&&(U.newstoremodal=t,U.newstoremodal.show())},function(e){alert("Get Max Store Error")})})},U.modalnewstoresubmit=function(){console.log(U.newstore),e.CreateStores(U.newstore).then(function(e){U.newstore.ID_LOCAL=e.ID_LOCAL,U.datastores.unshift(U.newstore),U.detailstore(U.newstore),U.newstoremodal.remove()}).then(function(){var e={};e.ACCESS_GROUP=U.newstore.ACCESS_GROUP,e.STORE_ID=U.newstore.STORE_ID,e.GROUP_ID=U.newstore.STORE_ID+".00001",e.GROUP_NM="LAIN-LAIN",e.STATUS=1,e.NOTE="LAIN-LAIN",f.CreateProductGroups(e).then(function(e){O.show("Toko Baru Berhasil Disimpan!","long","bottom")},function(e){console.log(e)})},function(e){O.show("Toko Baru Gagal Disimpan!","long","bottom")})},U.modalnewstoreclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newstoremodal.remove()})},U.modalupdatestoreopen=function(e){N.fromTemplateUrl("templates/control/stores/modalupdatestore.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){console.log(e),U.updatestore=angular.copy(e),I.CheckModalExistOrNot(U.updatestoremodal)&&(U.updatestoremodal=t,U.updatestoremodal.show())})},U.modalupdatestoresubmit=function(){console.log(U.updatestore),_.isEqual(U.datadetail,U.updatestore)||(U.updatestore.LONGITUDE="BASFASF",U.updatestore.LATITUDE="GFGF",e.UpdateStores(U.updatestore).then(function(e){var t=_.findIndex(U.datastores,{STORE_ID:U.updatestore.STORE_ID});U.datastores[t]=U.updatestore,U.datadetail=U.updatestore,U.detailstore(U.updatestore),O.show("Data Toko Berhasil Diubah","long","bottom")},function(e){O.show("Data Toko Gagal Diubah","long","bottom")})),U.updatestoremodal.remove()},U.modalupdatestoreclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.updatestoremodal.remove()})},U.openproductunitspop=function(e){var t=h.get("basic-parameters");t.STORE_ID=U.datadetail.STORE_ID,t.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),m.GetProductUnits(t).then(function(e){U.productunits=e},function(e){console.log(e)}),U.choiceproductunits="new"==e?{UNIT_ID:U.newproduct.UNIT_ID}:{UNIT_ID:U.updateitemproduct.UNIT_ID},P.confirm({templateUrl:"templates/control/products/popupproductunits.html",title:"PILIH UNIT PRODUK?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.productunits,{UNIT_ID:U.choiceproductunits.UNIT_ID});"new"==e?(U.newproduct.UNIT_ID=U.productunits[o].UNIT_ID,U.newproduct.UNIT_NM=U.productunits[o].UNIT_NM):(U.updateitemproduct.UNIT_ID=U.productunits[o].UNIT_ID,U.updateitemproduct.UNIT_NM=U.productunits[o].UNIT_NM)}}]})},U.openproductgroupspop=function(e){var t=h.get("basic-parameters");t.STORE_ID=U.datadetail.STORE_ID,t.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),f.GetProductGroups(t).then(function(e){U.productgroups=e}),U.choiceproductgroups="new"==e?{GROUP_ID:U.newproduct.GROUP_ID}:{GROUP_ID:U.updateitemproduct.GROUP_ID},P.confirm({templateUrl:"templates/control/products/popupproductgroups.html",title:"PILIH GROUP PRODUK?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.productgroups,{GROUP_ID:U.choiceproductgroups.GROUP_ID});"new"==e?(U.newproduct.GROUP_ID=U.productgroups[o].GROUP_ID,U.newproduct.GROUP_NM=U.productgroups[o].GROUP_NM):(U.updateitemproduct.GROUP_ID=U.productgroups[o].GROUP_ID,U.updateitemproduct.GROUP_NM=U.productgroups[o].GROUP_NM)}}]})},U.tambahproductgroup=function(){C.prompt("Group Baru","Tambah Produk Group",["Simpan","Cancel"],"").then(function(e){var t=e.input1;1==e.buttonIndex&&t.length>3&&f.GetMaxProductGroups(U.datadetail.STORE_ID).then(function(e){var o={};return o.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,o.STORE_ID=U.datadetail.STORE_ID,o.STATUS=1,o.GROUP_ID=e,o.GROUP_NM=t,o.NOTE="Catatan Untuk Product Group",o}).then(function(e){f.CreateProductGroups(e).then(function(t){e.ID_LOCAL=t.insertId,U.productgroups.push(e)},function(e){console.log(error)})},function(e){console.log(e)})})},U.modaltambahproductopen=function(){N.fromTemplateUrl("templates/control/products/modalnewproduct.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){f.GetMaxProductID(U.datadetail.STORE_ID).then(function(e){U.newproduct={},U.newproduct.PRODUCT_ID=e,U.newproduct.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),U.newproduct.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newproduct.STORE_ID=U.datadetail.STORE_ID,U.newproduct.PROMO="Belum Ada Promo",U.newproduct.STATUS=1,U.newproduct.IS_FAVORITE=0}).then(function(){I.CheckModalExistOrNot(U.tambahproduct)&&(U.tambahproduct=e,U.tambahproduct.show())},function(e){alert("Get Max ProductID Error")})})},U.modaltambahproductsubmit=function(e){e.$invalid=!0,f.CreateProducts(U.newproduct).then(function(e){U.dataproducts.unshift(U.newproduct),g.update(),U.tambahproduct.remove(),O.show("Produk Baru Berhasil Disimpan!","long","bottom")},function(e){O.show("Produk Baru Gagal Disimpan!","long","bottom")})},U.modaltambahproductclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.tambahproduct.remove()})},U.modalupdateproductopen=function(e,t){U.updateproducts=e,U.indexproduct=t,N.fromTemplateUrl("templates/control/products/modalupdateproduct.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.updateitemproduct=angular.copy(e[t]),U.newstock={},U.newstock.CURRENT_STOCK=Number(U.updateitemproduct.CURRENT_STOCK),console.log(U.newstock);var n=I.GetParameters();n.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,m.GetProductHargas(n).then(function(e){U.producthargas=[],angular.isDefined(e[n.STORE_ID])&&(U.producthargas=e[n.STORE_ID])},function(e){console.log(e)}),m.GetProductStocks(n).then(function(e){U.productstocks=e},function(e){console.log(e)}),m.GetProductDiscounts(n).then(function(e){U.productdiscounts=e},function(e){console.log(e)}),f.GetProductImagesByProductID(n).then(function(e){console.log(e),e.length>0?U.productimages=e[0]:m.GetProductImagesByProductID(n).then(function(e){U.productimages=e},function(e){U.productimages=void 0})},function(e){console.log(e)}),I.CheckModalExistOrNot(U.modalupdateproduct)&&(U.modalupdateproduct=o,U.modalupdateproduct.show())})},U.modalupdateproductsubmit=function(){_.isEqual(U.updateproducts[U.indexproduct],U.updateitemproduct)?U.modalupdateproduct.remove():f.UpdateProducts(U.updateitemproduct).then(function(e){U.updateproducts[U.indexproduct]=U.updateitemproduct,U.modalupdateproduct.remove(),O.show("Data Produk Berhasil Diubah!","long","bottom")},function(e){O.show("Data Produk Gagal Diubah!","long","bottom")})},U.modalupdateproductclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.modalupdateproduct.remove()})},U.showformstock={show:!1},U.tambahstock=function(){I.CheckProperyObjectNullOrNotNull(U.newstock)||0==U.newstock.INPUT_STOCK?C.alert("Quantity Stock Tidak Boleh Kosong."):(U.newstock.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),U.newstock.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,U.newstock.STORE_ID=U.updateitemproduct.STORE_ID,U.newstock.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,U.newstock.INPUT_DATE=y("date")(new Date,"yyyy-MM-dd"),U.newstock.INPUT_TIME=y("date")(new Date,"HH:mm:ss"),U.newstock.CURRENT_DATE=y("date")(new Date,"yyyy-MM-dd"),U.newstock.CURRENT_TIME=y("date")(new Date,"HH:mm:ss"),U.newstock.SISA_STOCK=0,U.newstock.LAST_STOCK=0,U.newstock.STATUS=1,U.newstock.DCRP_DETIL="ada ada saja",p.CreateProductStocks(U.newstock).then(function(e){U.newstock.ID_LOCAL=e.ID_LOCAL,U.productstocks.unshift(angular.copy(U.newstock)),U.newstock.CURRENT_STOCK=Number(U.newstock.CURRENT_STOCK)+Number(U.newstock.INPUT_STOCK);var t=_.findIndex(U.dataproducts,{PRODUCT_ID:U.newstock.PRODUCT_ID});U.dataproducts[t].CURRENT_STOCK=U.newstock.CURRENT_STOCK,f.UpdateProductsQuantity(U.newstock).then(function(e){U.newstock.INPUT_STOCK=0,O.show("Penambahan Stok Berhasil Disimpan!","long","bottom")},function(e){console.log(e)})},function(e){O.show("Penambahan Stok Gagal Disimpan!","long","bottom")}))},U.showformharga={show:!1},U.tambahharga=function(e){I.CheckProperyObjectNullOrNotNull(e)?alert("Masih Ada Yang Kosong"):(e.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,e.STORE_ID=U.updateitemproduct.STORE_ID,e.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,e.PERIODE_TGL1=y("date")(new Date(e.PERIODE_TGL1),"yyyy-MM-dd"),e.PERIODE_TGL2=y("date")(new Date(e.PERIODE_TGL2),"yyyy-MM-dd"),e.START_TIME=y("date")(new Date,"HH:mm:ss"),e.STATUS=0,e.DCRP_DETIL="ada ada saja",m.CreateProductHargas(e).then(function(t){U.producthargas.unshift(e),O.show("Penambahan Harga Berhasil Disimpan!","long","bottom")},function(e){O.show("Penambahan Harga Gagal Disimpan!","long","bottom")}))},U.tambahdiskon=function(e){I.CheckProperyObjectNullOrNotNull(e)?alert("Masih Ada Yang Kosong"):(e.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,e.STORE_ID=U.updateitemproduct.STORE_ID,e.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,e.PERIODE_TGL1=y("date")(new Date(e.PERIODE_TGL1),"yyyy-MM-dd"),e.PERIODE_TGL2=y("date")(new Date(e.PERIODE_TGL2),"yyyy-MM-dd"),e.START_TIME=y("date")(new Date,"HH:mm:ss"),e.STATUS=0,e.DCRP_DETIL="ada ada saja",m.CreateProductDiscounts(e).then(function(t){U.productdiscounts.unshift(e),O.show("Penambahan Diskon Berhasil Disimpan!","long","bottom")},function(e){O.show("Penambahan Diskon Gagal Disimpan!","long","bottom")}))},U.tambahgambar=function(e){R.show({titleText:"Ambil Gambar Produk Melalui?",buttons:[{text:'<i class="icon ion-image"></i> Galeri'},{text:'<i class="icon ion-ios-camera-outline"></i> Kamera'}],buttonClicked:function(e){var t={};return t.ACCESS_GROUP=U.updateitemproduct.ACCESS_GROUP,t.STORE_ID=U.updateitemproduct.STORE_ID,t.PRODUCT_ID=U.updateitemproduct.PRODUCT_ID,t.STATUS=1,t.DCRP_DETIL="ada ada saja",0==e?document.addEventListener("deviceready",function(){A.getPictures({maximumImagesCount:1,width:800,height:800,quality:80}).then(function(e){for(var o=0;o<e.length;o++)U.userimages=e[o],window.plugins.Base64.encodeFile(U.userimages,function(e){v.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){t.PRODUCT_IMAGE=e,U.productimages?(f.UpdateProductImages(t),m.UpdateProductImages(t).then(function(e){U.productimages=t,C.alert("Gambar Produk Berhasil Diubah","Information","Ok")},function(e){C.alert("Gambar Produk Gagal Diubah","Information","Ok")}).finally(function(){v.hide()})):(f.CreateProductImages(t),m.CreateProductImages(t).then(function(e){U.productimages=t,O.show("Gambar Produk Berhasil Diupload!","long","bottom")},function(e){O.show("Gambar Produk Gagal Diupload!","long","bottom")}).finally(function(){v.hide()}))})})},function(e){console.log("Error: "+JSON.stringify(e))})},!1):1==e&&document.addEventListener("deviceready",function(){var e=I.CameraOptions();D.getPicture(e).then(function(e){v.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){t.PRODUCT_IMAGE="data:image/jpeg;base64,"+e,U.productimages?(f.UpdateProductImages(t),m.UpdateProductImages(t).then(function(e){U.productimages=t,C.alert("Gambar Produk Berhasil Diubah","Information","Ok")},function(e){C.alert("Gambar Produk Gagal Diubah","Information","Ok")}).finally(function(){v.hide()})):(f.CreateProductImages(t),m.CreateProductImages(t).then(function(e){U.productimages=t,O.show("Gambar Produk Berhasil Diupload!","long","bottom")},function(e){O.show("Gambar Produk Gagal Diupload!","long","bottom")}).finally(function(){v.hide()}))})})},!1),!0}})},U.mode={valuechoose:"INFO"},U.titleup=U.mode.valuechoose,U.changemode=function(e){U.titleup=U.mode.valuechoose},U.openmerchantbankpop=function(e){d.GetMerchantBanks().then(function(e){U.merchantsbanks=e}),U.choicemerchantsbank="new"==e?{BANK_ID:U.newmerchant.BANK_ID}:{BANK_ID:U.updatemerchant.BANK_ID},P.confirm({templateUrl:"templates/control/merchants/popupmerchantsbank.html",title:"PILIH BANK?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.merchantsbanks,{BANK_ID:U.choicemerchantsbank.BANK_ID});"new"==e?(U.newmerchant.BANK_ID=U.merchantsbanks[o].BANK_ID,U.newmerchant.BANK_NM=U.merchantsbanks[o].BANK_NM):(U.updatemerchant.BANK_ID=U.merchantsbanks[o].BANK_ID,U.updatemerchant.BANK_NM=U.merchantsbanks[o].BANK_NM)}}]})},U.openmerchanttypepop=function(e){i.GetMerchantTypes().then(function(e){U.merchantstypes=e}),U.choicemerchantstype="new"==e?{TYPE_PAY_ID:U.newmerchant.TYPE_PAY_ID}:{TYPE_PAY_ID:U.updatemerchant.TYPE_PAY_ID},P.confirm({templateUrl:"templates/control/merchants/popupmerchantstype.html",title:"PILIH TYPE PEMBAYARAN?",scope:U,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){}},{text:"Yes",type:"button-positive",onTap:function(t){var o=_.findIndex(U.merchantstypes,{TYPE_PAY_ID:U.choicemerchantstype.TYPE_PAY_ID});"new"==e?(U.newmerchant.TYPE_PAY_ID=U.merchantstypes[o].TYPE_PAY_ID,U.newmerchant.TYPE_PAY_NM=U.merchantstypes[o].TYPE_PAY_NM):(U.updatemerchant.TYPE_PAY_ID=U.merchantstypes[o].TYPE_PAY_ID,U.updatemerchant.TYPE_PAY_NM=U.merchantstypes[o].TYPE_PAY_NM)}}]})},U.modalnewmerchantopen=function(){N.fromTemplateUrl("templates/control/merchants/modalnewmerchant.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){i.GetMaxMerchantID(U.datadetail.STORE_ID).then(function(e){U.newmerchant={},U.newmerchant.MERCHANT_ID=e,U.newmerchant.STORE_ID=U.datadetail.STORE_ID,U.newmerchant.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newmerchant.STORE_ID=U.datadetail.STORE_ID,U.newmerchant.STATUS=1,U.newmerchant.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd")}).then(function(){I.CheckModalExistOrNot(U.modalnewmerchant)&&(U.modalnewmerchant=e,U.modalnewmerchant.show())},function(e){console.log(e)})})},U.modalnewmerchantsubmit=function(){i.CreateMerchants(U.newmerchant).then(function(e){U.newmerchant.ID_LOCAL=e.ID_LOCAL,U.datamerchants.unshift(U.newmerchant),U.modalnewmerchant.remove(),O.show("Penambahan Merchant Berhasil.","long","bottom")},function(e){O.show("Penambahan Merchant Gagal.","long","bottom")})},U.modalnewmerchantclose=function(){U.modalnewmerchant.remove()},U.modalupdatemerchantopen=function(e,t){N.fromTemplateUrl("templates/control/merchants/modalupdatemerchant.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.datamerchantsebelumdiupdate=angular.copy(e),U.updatemerchant=angular.copy(e),U.indexmerchant=angular.copy(t),I.CheckModalExistOrNot(U.modalupdatemerchant)&&(U.modalupdatemerchant=o,U.modalupdatemerchant.show())})},U.modalupdatemerchantsubmit=function(){_.isEqual(U.datamerchantsebelumdiupdate,U.updatemerchant)||(U.datamerchants[U.indexmerchant]=U.updatemerchant,i.UpdateMerchants(U.updatemerchant).then(function(e){U.datamerchants[U.indexmerchant]=U.updatemerchant,O.show("Data Merchant Berhasil Diupdate!","long","bottom")},function(e){O.show("Data Merchant Gagal Diupdate!","long","bottom")})),U.modalupdatemerchant.remove()},U.modalupdatemerchantclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.modalupdatemerchant.remove()})},U.modalnewcustomeropen=function(){N.fromTemplateUrl("templates/control/customers/modalnewcustomer.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){c.GetMaxCustomerID(U.datadetail.STORE_ID).then(function(e){U.newcustomer={},U.newcustomer.CUSTOMER_ID=e,U.newcustomer.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newcustomer.STORE_ID=U.datadetail.STORE_ID,U.newcustomer.STATUS=1,U.newcustomer.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd")},function(e){console.log(e)}),I.CheckModalExistOrNot(U.newcustomermodal)&&(U.newcustomermodal=e,U.newcustomermodal.show())})},U.modalnewcustomersubmit=function(){c.CreateCustomers(U.newcustomer).then(function(e){U.newcustomer.ID_LOCAL=e.ID_LOCAL,U.datacustomers.unshift(U.newcustomer),U.newcustomermodal.remove(),O.show("Pelanggan Baru Berhasil Disimpan!","long","bottom")},function(e){O.show("Pelanggan Baru Gagal Disimpan!","long","bottom")})},U.modalnewcustomerclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newcustomermodal.remove()})},U.modalupdatecustomeropen=function(e,t){N.fromTemplateUrl("templates/control/customers/modalupdatecustomer.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.updatecustomer=angular.copy(e),U.datacustomersblmdiupdate=angular.copy(e),U.indexcustomer=angular.copy(t),I.CheckModalExistOrNot(U.updatecustomermodal)&&(U.updatecustomermodal=o,U.updatecustomermodal.show())})},U.modalupdatecustomersubmit=function(){_.isEqual(U.datacustomersblmdiupdate,U.updatecustomer)||c.UpdateCustomers(U.updatecustomer).then(function(e){U.datacustomers[U.indexcustomer]=U.updatecustomer,U.updatecustomermodal.remove(),O.show("Data Pelanggan Berhasil Diubah!","long","bottom")},function(e){O.show("Data Pelanggan Gagal Diubah!","long","bottom")})},U.modalupdatecustomerclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.updatecustomermodal.remove()})},U.modalnewkaryawanopen=function(){N.fromTemplateUrl("templates/control/karyawans/modalnewkaryawan.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){r.GetMaxKaryawanID(U.datadetail.STORE_ID).then(function(e){U.newkaryawan={},U.newkaryawan.KARYAWAN_ID=e,U.newkaryawan.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newkaryawan.STORE_ID=U.datadetail.STORE_ID,U.newkaryawan.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),U.newkaryawan.STATUS=1}),I.CheckModalExistOrNot(U.newkaryawanmodal)&&(U.newkaryawanmodal=e,U.newkaryawanmodal.show())})},U.modalnewkaryawansubmit=function(){N.fromTemplateUrl("templates/control/karyawans/modalnewkaryawan.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){r.CreateKaryawans(U.newkaryawan).then(function(e){U.newkaryawan.ID_LOCAL=e.ID_LOCAL,U.datakaryawans.unshift(U.newkaryawan),O.show("Penambahan Karyawan Berhasil.","long","bottom")},function(e){O.show("Penambahan Karyawan Gagal.Periksa Form Inputan Karyawan Dengan Teliti","long","bottom")}).finally(function(){v.hide(),U.newkaryawanmodal.remove()})})},U.modalnewkaryawanclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newkaryawanmodal.remove()})},U.modalupdatekaryawanopen=function(e,t){N.fromTemplateUrl("templates/control/karyawans/modalupdatekaryawan.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){U.datakaryawansebelumdiupdate=angular.copy(e),U.updatekaryawan=angular.copy(e),U.indexkaryawan=angular.copy(t),I.CheckModalExistOrNot(U.modalupdatekaryawan)&&(U.modalupdatekaryawan=o,U.modalupdatekaryawan.show())})},U.modalupdatekaryawansubmit=function(){_.isEqual(U.datakaryawansebelumdiupdate,U.updatekaryawan)?O.show("Tidak Ada Data Yang Berubah.","long","bottom"):(U.updatekaryawan.TGL_SAVE=y("date")(new Date,"yyyy-MM-dd"),r.UpdateKaryawans(U.updatekaryawan).then(function(e){U.datakaryawans[U.indexkaryawan]=U.updatekaryawan,U.modalupdatekaryawan.remove(),O.show("Pengubahan Data Karyawan Berhasil.","long","bottom")},function(e){O.show("Pengubahan Data Karyawan Gagal.Periksa Form Inputan Anda.","long","bottom")}))},U.modalupdatekaryawanclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.modalupdatekaryawan.remove()})},U.modalnewuserloginopen=function(){N.fromTemplateUrl("templates/control/userlogins/modalnewuserlogin.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){U.newuserlogin={},I.CheckModalExistOrNot(U.newuserloginmodal)&&(U.newuserloginmodal=e,U.newuserloginmodal.show())})},U.modalnewuserloginsubmit=function(){U.newuserlogin.ACCESS_GROUP=U.datadetail.ACCESS_GROUP,U.newuserlogin.STORE_ID=U.datadetail.STORE_ID,o.RegistrationLoginOps(U.newuserlogin).then(function(e){U.datauserops.unshift(e),O.show("Penambahan Operasional Berhasil Disimpan!","long","bottom")},function(e){O.show("Penambahan Operasional Gagal Disimpan!","long","bottom")}),U.newuserloginmodal.remove()},U.modalnewuserloginclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.newuserloginmodal.remove()})},U.modalupdateuserloginopen=function(e){N.fromTemplateUrl("templates/control/userlogins/modalupdateuserlogin.html",{scope:U,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){U.updateuserlogin=angular.copy(e),U.updateuserloginmodal=t,U.updateuserloginmodal.show()})},U.modalupdateuserloginsubmit=function(){o.UpdateLoginOps(U.updateuserlogin).then(function(e){console.log(e),U.newuserloginmodal.remove(),O.show("Data Operasional Berhasil Diubah!","long","bottom")},function(e){O.show("Data Operasional Gagal Diubah!","long","bottom")})},U.modalupdateuserloginclose=function(){C.confirm("Data Tidak Akan Tersimpan. Apakah Kamu Yakin Untuk Keluar?",["Yakin","Cancel"]).then(function(e){1==e&&U.updateuserloginmodal.remove()})},U.toggleGroup=function(e){"basic"==e?(U.showmerchant=!1,U.showproduct=!1,U.showemploye=!1,U.showbasic=!U.showbasic,U.showuserlogin=!1,U.showcustomers=!1):"product"==e?(U.showbasic=!1,U.showmerchant=!1,U.showemploye=!1,U.showproduct=!U.showproduct,U.showuserlogin=!1,U.showcustomers=!1):"merchant"==e?(U.showbasic=!1,U.showproduct=!1,U.showemploye=!1,U.showmerchant=!U.showmerchant,U.showuserlogin=!1,U.showcustomers=!1):"employe"==e?(U.showbasic=!1,U.showproduct=!1,U.showmerchant=!1,U.showemploye=!U.showemploye,U.showuserlogin=!1,U.showcustomers=!1):"userlogin"==e?(U.showbasic=!1,U.showproduct=!1,U.showmerchant=!1,U.showemploye=!1,U.showuserlogin=!U.showuserlogin,U.showcustomers=!1):"customers"==e&&(U.showbasic=!1,U.showproduct=!1,U.showmerchant=!1,U.showemploye=!1,U.showuserlogin=!1,U.showcustomers=!U.showcustomers)},U.isGroupShown=function(e){return U.shownGroup===e}}]),angular.module("starter").controller("AbsensiCtrl",["$cordovaGeolocation","ToastService","KaryawansCombFac","KaryawansLiteFac","KaryawansFac","UtilService","StorageService","ConstructorService","$ionicPopup","$filter","$scope","$state","$location","$timeout","$ionicLoading","$ionicModal","$ionicHistory","$cordovaCamera",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S){l.screenbesar=r.CheckScreenSize(),window.addEventListener("orientationchange",function(){l.screenbesar=r.CheckScreenSize(screen),l.$apply()},!1),l.$on("$ionicView.beforeEnter",function(){e.getCurrentPosition({maximumAge:0,timeout:1e4,enableHighAccuracy:!0}).then(function(e){var t={};t.LATITUDE=e.coords.latitude,t.LONGITUDE=e.coords.longitude,t.statusgps="Bekerja",l.currentLocation=t},function(e){var o={LATITUDE:0,LONGITUDE:0,statusgps:"Undefined"};e&&(1==e.code||"1"==e.code?o.statusgps="EC:1":2==e.code||"2"==e.code?o.statusgps="EC:2":3!=e.code&&"3"!=e.code||(o.statusgps="Timeout Expired")),l.currentLocation=o,t.ShowToast("Posisi GPS Saat Ini Tidak Tersedia. Error "+o.statusgps,"error")});var n=r.GetParameters();o.GetKaryawans(n).then(function(e){l.datakaryawans=e},function(e){console.log(e)}),l.namatokoyangaktive=n.STORE_NM}),l.openmodalabsensi=function(e){f.fromTemplateUrl("templates/employe/modalabsensi.html",{scope:l,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){m.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),l.dataemployedetail=angular.copy(e);var n=r.GetParameters();n.KARYAWAN_ID=l.dataemployedetail.KARYAWAN_ID,o.GetKaryawanAbsensis(n).then(function(e){angular.isArray(e)&&e.length>0?0==e[e.length-1].STATUS?(l.disablemasuk=!0,l.disablekeluar=!1):(l.disablemasuk=!0,l.disablekeluar=!0,l.notifikasiabsensi()):(l.disablemasuk=!1,l.disablekeluar=!0)}).then(function(){r.CheckModalExistOrNot(l.modalabsensi)&&(l.modalabsensi=t,l.modalabsensi.show())}).finally(function(){m.hide()})})},l.closemodalabsensi=function(){l.modalabsensi.remove()},l.funcabsensi=function(e){var o=s.AbsensiContructor(l.dataemployedetail);o.LATITUDE=l.currentLocation.LATITUDE,o.LONGITUDE=l.currentLocation.LONGITUDE,o.STATUS=e,o.DCRP_DETIL="ABSENSI MASUK",1==e&&(o.DCRP_DETIL="ABSENSI KELUAR"),o.ABSEN_IMAGE="data:image/jpeg;base64,imageData",m.show({template:"Loading"}).then(function(){n.CreateKaryawanAbsensis(o).then(function(o){0==e?(l.disablemasuk=!0,l.disablekeluar=!1,t.ShowToast("Terima Kasih.Absensi Masuk Berhasil.","success")):(l.disablemasuk=!0,l.disablekeluar=!0,l.notifikasiabsensi())},function(e){console.log(e)}).finally(function(){m.show({template:"Loading",duration:500})})})},l.notifikasiabsensi=function(){f.fromTemplateUrl("templates/employe/notifikasiabsensi.html",{scope:l,animation:"animated zoomInUp",hideDelay:500,hardwareBackButtonClose:!1}).then(function(e){r.CheckModalExistOrNot(l.notifikasiabsensimodal)&&(l.notifikasiabsensimodal=e,l.notifikasiabsensimodal.show())})},l.tutupnotifikasi=function(){l.modalabsensi&&l.modalabsensi.remove(),l.notifikasiabsensimodal.remove()}}]).controller("LaporanAbsensiDailyCtrl",["KaryawansCombFac","StoresCombFac","StoresFac","UtilService","$ionicPopup","$filter","$scope","$timeout","$ionicLoading","$ionicModal",function(e,t,o,n,a,r,i,s,c,u){i.$on("$ionicView.beforeEnter",function(){i.screenbesar=n.CheckScreenSize(),window.addEventListener("orientationchange",function(){i.screenbesar=n.CheckScreenSize(screen),i.$apply()},!1);var e=n.GetParameters();t.GetStores(e).then(function(e){i.stores=e,i.store=e[0]})}),i.openstorepopup=function(e){i.choiceview=e,i.choice={STORE_ID:i.choiceview.STORE_ID},a.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH TOKO?",scope:i,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){i.choice=angular.copy(i.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(i.stores,{STORE_ID:i.choice.STORE_ID}),o=angular.copy(i.stores[t]);i.store=o,s(function(){i.loaddataabsensidaily(i.store)},10)}}]})},i.loaddataabsensidaily=function(e){var t=n.GetParameters();t.TGL=t.TGL_SAVE,e&&(t.STORE_ID=e.STORE_ID),o.GetLaporanAbsensi(t).then(function(e){i.databasensikaryawan=e},function(e){console.log(e)}).finally(function(){c.hide()})},i.loaddataabsensidaily(),i.openmodalposisiabsensi=function(e,t){u.fromTemplateUrl("templates/employe/modalposisiabsensi.html",{scope:i,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){n.CheckModalExistOrNot(i.modalposisiabsensi)&&(i.longitude=angular.copy(t),i.latitude=angular.copy(e),i.modalposisiabsensi=o,i.modalposisiabsensi.show())})},i.closemodalposisiabsensi=function(){i.modalposisiabsensi.remove()}}]).controller("LaporanAbsensiMonthlyCtrl",["KaryawansCombFac","StoresCombFac","StoresFac","UtilService","$ionicPopup","$filter","$scope","$timeout","$ionicLoading","$ionicModal",function(e,t,o,n,a,r,i,s,c,u){i.$on("$ionicView.beforeEnter",function(){i.screenbesar=n.CheckScreenSize(),window.addEventListener("orientationchange",function(){i.screenbesar=n.CheckScreenSize(screen),i.$apply()},!1);var e=n.GetParameters();t.GetStores(e).then(function(e){i.stores=e,i.store=e[0]})}),i.openstorepopup=function(e){i.choiceview=e,i.choice={STORE_ID:i.choiceview.STORE_ID},a.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH TOKO?",scope:i,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){i.choice=angular.copy(i.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(i.stores,{STORE_ID:i.choice.STORE_ID}),o=angular.copy(i.stores[t]);i.store=o,s(function(){i.loaddataabsensimonthly(i.store)},10)}}]})},i.loaddataabsensimonthly=function(e){var t=n.GetParameters();t.BULAN=r("date")(new Date(t.TGL_SAVE),"MM"),e&&(t.STORE_ID=e.STORE_ID),o.GetLaporanAbsensi(t).then(function(e){var t=n.MakeUnflatterArray(e,"TGL");i.databasensikaryawan=t},function(e){console.log(e)}).finally(function(){c.hide()})},i.loaddataabsensimonthly(),i.openmodalposisiabsensi=function(e,t){u.fromTemplateUrl("templates/employe/modalposisiabsensi.html",{scope:i,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(o){n.CheckModalExistOrNot(i.modalposisiabsensi)&&(i.longitude=angular.copy(t),i.latitude=angular.copy(e),i.modalposisiabsensi=o,i.modalposisiabsensi.show())})},i.closemodalposisiabsensi=function(){i.modalposisiabsensi.remove()}}]).controller("LaporanAbsensiPerKaryawanCtrl",["KaryawansCombFac","StoresCombFac","StoresFac","UtilService","$ionicPopup","$filter","$scope","$timeout","$ionicLoading","$ionicModal",function(e,t,o,n,a,r,i,s,c,u){i.$on("$ionicView.beforeEnter",function(){i.screenbesar=n.CheckScreenSize(),window.addEventListener("orientationchange",function(){i.screenbesar=n.CheckScreenSize(screen),i.$apply()},!1);var e=n.GetParameters();t.GetStores(e).then(function(e){i.stores=e,i.store=e[0]})}),i.openstorepopup=function(e){i.choiceview=e,i.choice={STORE_ID:i.choiceview.STORE_ID},a.confirm({templateUrl:"templates/sales/popupstore.html",title:"PILIH TOKO?",scope:i,buttons:[{text:"Cancel",type:"button-assertive",onTap:function(e){i.choice=angular.copy(i.choiceview)}},{text:"Yes",type:"button-positive",onTap:function(e){var t=_.findIndex(i.stores,{STORE_ID:i.choice.STORE_ID}),o=angular.copy(i.stores[t]);i.store=o}}]})};var l=n.GetParameters();e.GetKaryawans(l).then(function(e){i.datakaryawans=e}),i.openmodallaporanabsensi=function(e){u.fromTemplateUrl("templates/employe/modallaporanabsensiperkaryawan.html",{scope:i,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){c.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'});var a=n.GetParameters();a.TGL=a.TGL_SAVE,a.KARYAWAN_ID=e.KARYAWAN_ID,o.GetLaporanAbsensi(a).then(function(t){i.datakaryawan=e,i.databasensikaryawan=t},function(e){console.log(e)}).finally(function(){c.hide()}),n.CheckModalExistOrNot(i.modalbsensiperkaryawan)&&(i.modalbsensiperkaryawan=t,i.modalbsensiperkaryawan.show())})},i.closemodallaporanabsensi=function(e){i.modalbsensiperkaryawan.remove()}}]),angular.module("starter").controller("LogOfflineCtrl",["OfflineLiteFac","$filter","$scope","$ionicLoading",function(e,t,o,n){n.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}).then(function(){e.SumOfflinePerTableName().then(function(e){console.log(e),o.dataofflines=e},function(e){console.log(e)}).finally(function(){n.hide()})}),o.$on("syncofflinetoserver",function(e,t){var n=_.findIndex(o.dataofflines,{ID_LOCAL:t.ID_LOCAL});o.dataofflines[n].STATUS_SYNC=1})}]),angular.module("starter").controller("MaintenanceCtrl",["MaintenanceService","MenuService","$filter","$scope",function(e,t,o,n){n.menumaintenances=t.GetMenuMaintenance(),console.log(n.menumaintenances),n.openfunction=function(t){e.TestMaintenance(t)}}]),angular.module("starter").controller("OpenBookCtrl",["ToastService","OpenCloseBookCombFac","OpenCloseBookLiteFac","UtilService","ConstructorService","StorageService","$cordovaDialogs","$filter","$ionicLoading","$ionicHistory","$timeout","$scope","$state","$location",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p){d.$on("$ionicView.beforeEnter",function(i){d.screenbesar=n.CheckScreenSize(),window.addEventListener("orientationchange",function(){d.screenbesar=n.CheckScreenSize(screen),d.$apply()},!1);i=n.GetParameters();t.GetOpenCloseBook(i).then(function(t){0==t.length?(d.openbookdata=a.OpenCloseBookConstructor(),d.openbookdata.OPENCLOSE_ID=i.STORE_ID+"."+s("date")(new Date,"yyMMddHHmmss"),d.openbookdata.SPLIT_OPENCLOSE_ID=d.openbookdata.OPENCLOSE_ID.split(".")[2]):(i.STATUS=2,o.GetOpenCloseBookWithStatus(i).then(function(t){if(console.log(t),angular.isArray(t)&&t.length>0){d.openbookdata=t[t.length-1],d.sudahopen=!0,(o=n.GetParameters()).OPENCLOSE_ID=d.openbookdata.OPENCLOSE_ID,r.set("basic-parameters",o),e.ShowToast("Kamu Sudah Melakukan Buka Buka.Fitur Dapat Anda Akses Kembali Setelah Melakukan Tutup Buku.","success")}else{d.openbookdata=a.OpenCloseBookConstructor();var o=n.GetParameters();d.openbookdata.OPENCLOSE_ID=o.STORE_ID+"."+s("date")(new Date,"yyMMddHHmmss"),d.openbookdata.SPLIT_OPENCLOSE_ID=d.openbookdata.OPENCLOSE_ID.split(".")[2]}},function(e){console.log(e)}))},function(e){console.log(e)})}),d.openbooksubmit=function(){c.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),o.CreateOpenCloseBook(d.openbookdata).then(function(e){d.openbookdata.ID_LOCAL=e.ID_LOCAL,d.sudahopen=!0,i.alert("Open Book Sukses")},function(e){console.log(e)}).finally(function(){c.hide()})}}]).controller("CloseBookCtrl",["ToastService","OpenCloseBookCombFac","OpenCloseBookLiteFac","SummaryLiteFac","UtilService","ConstructorService","StorageService","$cordovaDialogs","$filter","$ionicLoading","$ionicHistory","$ionicModal","$timeout","$scope","$state",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m){p.$on("$ionicView.beforeEnter",function(t){p.screenbesar=a.CheckScreenSize(),window.addEventListener("orientationchange",function(){p.screenbesar=a.CheckScreenSize(screen),p.$apply()},!1),(t=a.GetParameters()).STATUS=2,o.GetOpenCloseBookWithStatus(t).then(function(o){console.log(o),o.length>0?(p.belumopen=!1,p.dataclosebook=angular.copy(o[o.length-1]),t.STATUS=1,n.SumTransHeaderCompletePerShift(t).then(function(e){angular.isArray(e)&&e.length>0&&(p.dataclosebook.SELLCASH+=e[0].TOTAL),p.dataclosebook.TOTALCASH=Number(p.dataclosebook.SELLCASH)+Number(p.dataclosebook.ADDCASH)+Number(p.dataclosebook.CASHINDRAWER),p.dataclosebook.TOTALCASH_ACTUAL=p.dataclosebook.TOTALCASH,p.dataclosebook.TGL_CLOSE=c("date")(new Date,"yyyy-MM-dd HH:mm:ss"),p.dataclosebook.STATUS=1,p.dataclosebook.IS_ONSERVER=0})):(p.belumopen=!0,e.ShowToast("Nothing To Close.Kamu Harus Melakukan Open Book Terlebih Dahulu","success"))},function(e){console.log(e)}).finally(function(){u.hide()})}),p.submitclosebook=function(){u.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),o.UpdateOpenCloseBook(p.dataclosebook).then(function(e){p.sudahclose=!0,s.alert("Close Book Sukses.")},function(e){console.log(e)}).finally(function(){u.hide()}),o.GetSetoranBookByOpenCloseID(p.dataclosebook).then(function(e){if(e.length>0){var t=r.SetoranConstructor(p.dataclosebook);o.UpdateSetoranBook(t).then(function(e){console.log(e)},function(e){console.log(e)})}else{t=r.SetoranConstructor(p.dataclosebook);o.CreateSetoranBook(t).then(function(e){t.ID_LOCAL=e.ID_LOCAL,console.log(e)},function(e){console.log(e)})}})}}]).controller("SetoranCtrl",["OpenCloseBookCombFac","OpenCloseBookLiteFac","StoresCombFac","ConstructorService","UtilService","$ionicPopup","$cordovaDialogs","$filter","$ionicLoading","$ionicHistory","$ionicModal","$timeout","$scope","$state","$cordovaCamera",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m){T.$on("$ionicView.beforeEnter",function(){T.screenbesar=a.CheckScreenSize(),window.addEventListener("orientationchange",function(){T.screenbesar=a.CheckScreenSize(screen),T.$apply()},!1);var t=a.GetParameters();e.GetSetoranBook(t).then(function(e){console.log(e),T.datasetorans=e,e.length>0&&T.showdetail(T.datasetorans[0])})}),T.showdetail=function(e){T.isGroupShown(e)||(T.shownGroup=e,c.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){T.setoran=e}).finally(function(){c.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',duration:100})}))},T.showmodadetailsetoran=function(e){T.shownGroup=e,l.fromTemplateUrl("templates/openclosebook/modaldetailsetoran.html",{scope:T,animation:"animated zoomInUp",hideDelay:1020}).then(function(t){T.setoran=angular.copy(e),a.CheckModalExistOrNot(T.modaldetailsetoran)&&(T.modaldetailsetoran=t,T.modaldetailsetoran.show())})},T.closemodaldetailsetoran=function(){T.modaldetailsetoran.remove()},T.isGroupShown=function(e){return T.shownGroup===e},T.fotobuktisetoran=function(){2==T.setoran.STATUS?document.addEventListener("deviceready",function(){var e=a.CameraOptions();m.getPicture(e).then(function(e){c.show({template:'<ion-spinner icon="spiral" class="spinner-energized"></ion-spinner>',noBackdrop:!0}).then(function(){T.setoran.STORAN_IMAGE="data:image/jpeg;base64,"+e,T.setoran.STATUS=1,T.setoran.SISA_STORAN=Number(T.setoran.TOTALCASH)-Number(T.setoran.NOMINAL_STORAN),T.setoran.TGL_STORAN=s("date")(new Date,"yyyy-MM-dd HH:mm:ss"),t.UpdateSetoranBook(T.setoran).then(function(e){i.alert("Bukti Setoran Telah Berhasil Diupload Ke Server","Berhasil"),T.disablesubmit=!0},function(e){console.log(e)}).finally(function(){c.hide()})})})},!1):T.showmodalimage()},T.showmodalimage=function(){l.fromTemplateUrl("templates/openclosebook/modalimage.html",{scope:T,animation:"slide-in-up"}).then(function(e){T.modalimage=e,T.modalimage.show()})},T.closemodalimage=function(){T.modalimage.remove()}}]),angular.module("starter").controller("LoginCtrl",["SecuredFac","auth","$cordovaDevice","$cordovaToast","$cordovaDialogs","$ionicHistory","$filter","$ionicModal","$timeout","$scope","$state","$ionicPopup","$ionicLoading","StorageService",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p){u.datauserlogin={},document.addEventListener("deviceready",function(){u.devicemodel=o.getModel(),u.deviceplatform=o.getPlatform(),u.deviceuuid=o.getUUID(),u.deviceversion=o.getVersion()},!1),u.login=function(){T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),u.disableInput=!0,u.deviceuuid?u.datauserlogin.UUID=u.deviceuuid:"radumta@gmail.com"==u.datauserlogin.username?u.datauserlogin.UUID="84e4948fb680e655":"raizetacorp@gmail.com"==u.datauserlogin.username?u.datauserlogin.UUID="84e4948fb680e655":u.datauserlogin.UUID="84e4948fb680e6336",e.Login(u.datauserlogin).then(function(e){c(function(){r.nextViewOptions({disableAnimate:!0,disableBack:!0}),l.go("auth.wellcome",{},{reload:!1})},100)},function(e){"password_salah"==e?a.alert("Password Salah!","Login Gagal","Ok"):"username_salah"==e?a.alert("Username Salah!","Login Gagal","Ok"):"Active-Code"==e?u.openmodalregistrationconfirmation(u.datauserlogin):a.alert("Jaringan Bermasalah!Silahkan Coba Login Kembali.","Login Gagal","Ok"),T.hide()})},u.loginWithGoogle=function(){T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),window.plugins.googleplus.login({},function(t){var o={};o.SOSMED_PROVIDER=i("uppercase")("GOOGLE"),o.SOSMED_ID=t.userId,o.UUID=u.deviceuuid,e.Login(o).then(function(e){c(function(){r.nextViewOptions({disableAnimate:!0,disableBack:!0}),l.go("tab.sales",{},{reload:!0})},1e3)},function(e){if("wrong-sosmed"==e)d.alert({title:"Login failed!",template:"Account Anda Belum Terdaftar!"});else{d.alert({title:"Login failed!",template:"Jaringan Bermasalah!Silahkan Coba Lagi."});focus("focusUsername")}T.hide()})},function(e){swal({title:"Login failed",text:"Please check your credentials.",allowOutsideClick:!0,showConfirmButton:!0}),a.alert("Jaringan Bermasalah!Silahkan Coba Login Kembali.","Login Gagal","Ok"),T.hide()})},u.loginWithSocmed=function(o){if(T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),"yahoo"==o)var n="openid offline_access";else n="openid name email offline_access";t.signin({popup:!0,connection:o,scope:n,device:"Mobile device"},function(t,o){var n={};n.SOSMED_PROVIDER=i("uppercase")(t.identities[0].provider),n.SOSMED_ID=t.identities[0].user_id,n.UUID=u.deviceuuid,e.Login(n).then(function(e){c(function(){r.nextViewOptions({disableAnimate:!0,disableBack:!0}),l.go("auth.wellcome",{},{reload:!1})},1e3)},function(e){if("wrong-sosmed"==e)d.alert({title:"Login failed!",template:"Account Anda Belum Terdaftar!"});else{d.alert({title:"Login failed!",template:"Jaringan Bermasalah!Silahkan Coba Lagi."});focus("focusUsername")}T.hide()})},function(e){T.hide()})},u.signupnewuser=function(){s.fromTemplateUrl("templates/secured/register.html",{scope:u,animation:"animated zoomInUp",hideDelay:1020,backdropClickToClose:!1,hideOnStateChange:!0,hardwareBackButtonClose:!0}).then(function(e){u.datauserbaru={},u.modalnewuser=e,u.modalnewuser.show()})},u.submitnewuser=function(){T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),u.datauserbaru.UUID=u.deviceuuid,u.datauserbaru.username=angular.copy(u.datauserbaru.email),e.Registration(u.datauserbaru).then(function(e){u.openmodalregistrationconfirmation(u.datauserbaru)},function(e){"Email-Already-Exist"==e?a.alert("Email Yang Anda Gunakan Sudah Pernah Terdaftar Sebelumnya.","Pendaftaran Gagal","Ok"):"Username-Already-Exist"==e?a.alert("Username Yang Anda Gunakan Sudah Pernah Terdaftar Sebelumnya.","Pendaftaran Gagal","Ok"):a.alert("Mohon Maaf.Server Kami Sedang Mengalami Gangguan","Server Error","Ok")}).finally(function(){T.hide()})},u.signupmodalcancel=function(){u.modalnewuser.remove()},u.openmodalregistrationconfirmation=function(e){s.fromTemplateUrl("templates/secured/registrationconfirmation.html",{scope:u,animation:"slide-in-up",backdropClickToClose:!1,hardwareBackButtonClose:!0}).then(function(t){u.dataregistrasi=e,u.modalregistrationconfirmation=t,u.modalregistrationconfirmation.show()})},u.submitregistrationconfirmation=function(){var t=u.dataregistrasi.x1+u.dataregistrasi.x2+u.dataregistrasi.x3+u.dataregistrasi.x4;u.dataregistrasi.ACTIVE_CODE=t.toString(),T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),e.Login(u.dataregistrasi).then(function(e){u.modalregistrationconfirmation&&u.modalregistrationconfirmation.remove(),u.modalnewuser&&u.modalnewuser.remove(),c(function(){r.nextViewOptions({disableAnimate:!0,disableBack:!0}),l.go("auth.wellcome",{},{reload:!1})},100)},function(e){"wrong-code"==e?a.alert("Silahkan Masukkan Kode Aktifasi Yang Benar!","Kode Aktifasi Salah!","Ok"):a.alert("Jaringan Anda Mengalami Gangguan, Silahkan Coba Lagi.","Login Gagal","Ok")}).finally(function(){T.hide()})},u.closeregistrationconfirmation=function(){u.modalregistrationconfirmation.remove()},u.SignUpWithSocmed=function(o){if(T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),"yahoo"==o)var n="openid offline_access";else n="openid name email offline_access";t.signin({popup:!0,connection:o,scope:n,device:"Mobile device"},function(t,o){console.log(t);var n={};n.SOSMED_PROVIDER=i("uppercase")(t.identities[0].provider),n.SOSMED_ID=t.identities[0].user_id,n.email=t.email,n.username=t.email,e.Registration(n).then(function(e){u.modalnewuser.remove(),c(function(){r.nextViewOptions({disableAnimate:!0,disableBack:!0}),l.go("auth.wellcome",{},{reload:!1})},1e3)},function(e){if("Email-Already-Exist"==e)d.alert({title:"Login failed!",template:"Email-Already-Exist.Please Login!"});else if("Username-Already-Exist"==e)d.alert({title:"Login failed!",template:"Username-Already-Exist!"});else if("Sosmed-Provider-Already-Exist"==e)d.alert({title:"Login failed!",template:"Sosmed-Provider-Already-Exist!"});T.hide()})},function(e){T.hide(),a.alert("Please check your credentials.","Login Gagal","Ok")})},u.SignUpWithGoogle=function(){T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'}),window.plugins.googleplus.login({},function(t){var o={};o.SOSMED_PROVIDER=i("uppercase")("GOOGLE"),o.SOSMED_ID=t.userId,o.email=t.email,o.username=t.email,e.Registration(o).then(function(e){u.modalnewuser.remove(),c(function(){r.nextViewOptions({disableAnimate:!0,disableBack:!0}),l.go("auth.wellcome",{},{reload:!1})},1e3)},function(e){if("Email-Already-Exist"==e)d.alert({title:"Login failed!",template:"Email-Already-Exist.Please Login!"});else if("Username-Already-Exist"==e)d.alert({title:"Login failed!",template:"Username-Already-Exist!"});else if("Sosmed-Provider-Already-Exist"==e)d.alert({title:"Login failed!",template:"Sosmed-Provider-Already-Exist!"});T.hide()})},function(e){swal({title:"Login failed",text:"Please check your credentials.",allowOutsideClick:!0,showConfirmButton:!0}),T.hide()})},u.resetpassword=function(){swal({title:"Reset Password",text:"",type:"input",inputType:"email",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Input Email Anda Disini",showLoaderOnConfirm:!0},function(t){if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t))var o=!0;if(!1===t)return!1;if(""===t||o)return swal.showInputError("Wrong Format.Please Enter Valid Email!"),!1;var n={};n.email=t,e.ResetOldPassword(n).then(function(e){c(function(){swal.close(),p.set("reset-password-email",t),u.modalnewpassopen()},50)},function(e){if("Email-Not-Exist"==e)return swal.showInputError("Email Anda Tidak Ditemukan Di Server Kami!"),!1})})},u.modalnewpassopen=function(){s.fromTemplateUrl("templates/secured/resetpassword.html",{scope:u,animation:"slide-in-up",backdropClickToClose:!1,hardwareBackButtonClose:!0}).then(function(e){u.datanewpassword={},u.modalresetpass=e,u.modalresetpass.show()})},u.submitresetpass=function(){T.show({noBackdrop:!1,hideOnStateChange:!0,template:'<p class="item-icon-left"><span class="title">Loading</span><ion-spinner icon="lines"/></p>'});var t=u.datanewpassword.x1+u.datanewpassword.x2+u.datanewpassword.x3+u.datanewpassword.x4;u.datanewpassword.ACTIVE_CODE=t.toString(),u.datanewpassword.email=p.get("reset-password-email"),e.SetNewPassword(u.datanewpassword).then(function(e){u.modalresetpass.hide(),n.show("Reset Password Berhasil.Silahkan Login Dengan Password Terbaru Anda.","long","bottom")},function(e){"wrong-code"==e&&a.alert("Reset Kode Yang Anda Masukkan Salah.","Error","Ok")}).finally(function(){T.hide()})}}]),angular.module("starter").controller("SettingCtrl",["SecuredFac","UtilService","StorageService","TemplateService","$ionicModal","$cordovaDialogs","$cordovaToast","$rootScope","$window","$scope","$state","$location","$timeout","$ionicLoading","$ionicHistory",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m){u.mode={valuechoose:"PROFIL"};var f=o.get("advanced-profile");u.datauserlogin=o.get("advanced-profile"),u.datauserprofile=o.get("advanced-profile").PROFILE,u.ubahprofile=function(t){e.UpdateProfileOps(t).then(function(e){f.PROFILE=t,o.set("advanced-profile",f),r.alert("Data Profile Berhasil Diubah.","Information","Ok")},function(e){r.alert("Data Profile Gagal Diubah.","Information","Ok")})},u.arraytemplate=[{name:"assertive",headerstyle:"bar-assertive",itemstyle:"item-assertive",buttonstyle:"button-assertive",img_display:"img/assertive.png"},{name:"positive",headerstyle:"bar-positive",itemstyle:"item-positive",buttonstyle:"button-positive",img_display:"img/positive.png"},{name:"balanced",headerstyle:"bar-balanced",itemstyle:"item-balanced",buttonstyle:"button-balanced",img_display:"img/balanced.png"},{name:"dark",headerstyle:"bar-dark",itemstyle:"item-dark",buttonstyle:"button-dark",img_display:"img/dark.png"},{name:"calm",headerstyle:"bar-calm",itemstyle:"item-calm",itemdividerstyle:"item-assertive",buttonstyle:"button-calm",img_display:"img/calm.png"}],u.showmodalimage=function(e){a.fromTemplateUrl("templates/settings/modalimage.html",{scope:u,animation:"slide-in-up"}).then(function(o){t.CheckModalExistOrNot(u.modalimage)&&(u.modalimage=o,u.modalimage.show()),u.viewtemplate=e})},u.pilihtemplate=function(){r.confirm("Apakah Kamu Yakin Memilih Template Ini Sebagai Template Default ?",["Delete","Cancel"]).then(function(e){1==e&&(o.set("template",u.viewtemplate),n.ChangeTemplate(),u.modalimage.remove(),i.show("Template Yang Anda Pilih Berhasil Diterapkan.","long","bottom"))})},u.closemodalimage=function(){u.modalimage.remove()}}]).controller("SettingTokoCtrl",["StorageService","$scope",function(e,t){t.settingsList=e.get("settingconfiguration"),t.settingsList||(t.settingsList=[{name:"ppnsetting",text:"PPN (10%)",checked:!1},{name:"bukabukusetting",text:"Buka/Tutup Buku",checked:!1},{name:"soundsetting",text:"Suara",checked:!0},{name:"gridsetting",text:"Mode Grid",checked:!0}]),t.toggleChange=function(o,n){0==o.checked?t.settingsList[n].checked=!1:t.settingsList[n].checked=!0,e.set("settingconfiguration",t.settingsList)}}]).controller("SettingDeviceCtrl",["$ionicPlatform","$cordovaDevice","$scope",function(e,t,o){e.ready(function(){o.devicemodel=t.getModel(),o.deviceplatform=t.getPlatform(),o.deviceuuid=t.getUUID(),o.deviceversion=t.getVersion()})}]),angular.module("starter").controller("WellComeCtrl",["InitStoresFac","$filter","$scope","$ionicHistory","$ionicLoading","$state","$timeout",function(e,t,o,n,a,r,i){o.$on("$ionicView.beforeEnter",function(t){o.sudahikutipanduan=!1,o.datasukses="Mutasi",e.InitStores().then(function(e){o.sudahikutipanduan=!0,o.sudahikutipanduan&&i(function(){n.nextViewOptions({disableAnimate:!0,disableBack:!0}),r.go("tab.sales",{},{reload:!0})},1e4)},function(e){console.log(e)}),o.$on("loading-stores",function(e,t){o.datasukses=t})})}]),angular.module("starter").directive("autoTabTo",[function(){return{restrict:"A",link:function(e,t,o){t.bind("keyup",function(e){if(this.value.length===this.maxLength){var t=document.getElementById(o.autoTabTo);t&&t.focus()}})}}}]),angular.module("starter").directive("format",["$filter",function(e){return{require:"?ngModel",link:function(t,o,n,a){a&&(a.$formatters.unshift(function(t){return e(n.format)(a.$modelValue)}),a.$parsers.unshift(function(t){var a=t.replace(/[^\d|\-+|\.+]/g,"");return o.val(e(n.format)(a)),a}))}}}]),angular.module("starter").directive("groupedRadio",[function(){return{restrict:"A",require:"ngModel",scope:{model:"=ngModel",value:"=groupedRadio"},link:function(e,t,o,n){t.addClass("button"),t.on("click",function(t){e.$apply(function(){n.$setViewValue(e.value)})}),e.$watch("model",function(o){t.removeClass("button-balanced"),o===e.value&&t.addClass("button-balanced")})}}}]),angular.module("starter").directive("imageonload",["$timeout",function(e){function t(t,o){e(function(){o.imageLoaded=t})}return{restrict:"A",link:function(e,o,n){o.bind("load",function(){t(!0,e)}),o.bind("error",function(){o.attr("src","img/save-image.png"),t(!1,e)})}}}]),angular.module("starter").directive("sameAs",[function(){return{require:"ngModel",link:function(e,t,o,n){var a=o.sameAs;e.$watch(o.sameAs,function(){n.$validate()}),n.$validators.match=function(t,o){return o===e.$eval(a)}}}}]).directive("uiShowPassword",[function(){return{restrict:"A",scope:!0,link:function(e,t,o){var n=angular.element('<button class="button button-stable button-clear"><i class="icon ion-eye"></i></button>'),a=t.attr("type");n.on("touchstart",function(e){t.attr("type")===a?t.attr("type","text"):t.attr("type",a),n.toggleClass("button-positive"),e.stopPropagation()}),n.on("touchend",function(e){var t=new Event("mousedown");e.currentTarget.dispatchEvent(t),e.stopPropagation()}),"password"===t.attr("type")&&t.after(n)}}}]),angular.module("starter").directive("scrollWatch",["$rootScope",function(e){return function(t,o,n){o.bind("scroll",function(t){t.detail.scrollTop-0>150?e.slideHeader=!0:e.slideHeader=!1,e.slideHeaderPrevious>=t.detail.scrollTop-0&&(e.slideHeader=!1),e.slideHeaderPrevious=t.detail.scrollTop-0,e.$apply()})}}]).directive("searchBar",[function(){return{scope:{ngModel:"="},require:["^ionNavBar","?ngModel"],restrict:"E",replace:!0,template:'<ion-nav-buttons side="right"><div class="searchBar"><div class="searchTxt" ng-show="ngModel.show"><div class="bgdiv"></div><div class="bgtxt"><input type="text" placeholder="Procurar..." ng-model="ngModel.txt"></div></div><i class="icon placeholder-icon" ng-click="ngModel.txt=\'\';ngModel.show=!ngModel.show"></i></div></ion-nav-buttons>',compile:function(e,t){var o=t.icon||ionic.Platform.isAndroid()&&"ion-android-search"||ionic.Platform.isIOS()&&"ion-ios7-search"||"ion-search";return angular.element(e[0].querySelector(".icon")).addClass(o),function(e,t,o,n){var a=n[0];e.navElement="right"===o.side?a.rightButtonsElement:a.leftButtonsElement}},controller:["$scope","$ionicNavBarDelegate",function(e,t){var o;e.$watch("ngModel.show",function(n,a,r){if(n!==a)if(n){var i=e.navElement.children().length;angular.element(e.navElement[0].querySelector(".searchBar")).addClass("numicons"+i),o=t.getTitle(),t.setTitle("")}else t.setTitle(o);else o||(o=t.getTitle())})}]}}]),angular.module("starter").filter("capitalize",function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}}),angular.module("starter").filter("chunked",function(){return e=function(e,t){var o=[];if(angular.isArray(e)){isNaN(t)&&(t=16);for(var n=0;n<e.length;n+=t)o.push(e.slice(n,n+t))}else console.log("items is not an array: "+angular.toJson(e));return o},cache={},function(t){return cache[t]?cache[t]:cache[t]=e(t)};var e}),angular.module("starter").filter("cuttext",function(){return function(e,t,o,n){if(!e)return"";if(!(o=parseInt(o,10)))return e;if(e.length<=o)return e;if(e=e.substr(0,o),t){var a=e.lastIndexOf(" ");-1!==a&&("."!==e.charAt(a-1)&&","!==e.charAt(a-1)||(a-=1),e=e.substr(0,a))}return e+(n||" ")}}),angular.module("starter").filter("split",function(){return function(e,t,o){return e.split(t)[o]}}).filter("sumByKey",function(){return function(e,t){if(void 0===e||void 0===t)return 0;for(var o=0,n=e.length-1;n>=0;n--)o+=Number(e[n][t]);return o}}).filter("sumArray",function(){return function(e){if(void 0===e)return 0;for(var t=0,o=e.length-1;o>=0;o--)t+=Number(e[o]);return t}}).filter("ktoNumber",["$filter",function(e){e("number");var t={k:1e3,l:1e5},o=/^([-+]?[0-9]*\.?[0-9]+)([kl])$/;return function(e,n){var a;return angular.isString(e)&&(a=e.match(o))&&(e=a[1]*t[a[2]]),e}}]).filter("nrFormat",function(){return function(e){return void 0===e?0:void 0!==e?((t=Math.abs(e))>=Math.pow(10,12)?e=(e/Math.pow(10,12)).toFixed(1)+" t":t<Math.pow(10,12)&&t>=Math.pow(10,9)?e=(e/Math.pow(10,9)).toFixed(1)+" b":t<Math.pow(10,9)&&t>=Math.pow(10,6)?e=(e/Math.pow(10,6)).toFixed(1)+" Juta":t<Math.pow(10,6)&&t>=Math.pow(10,3)&&(e=(e/Math.pow(10,3)).toFixed(1)+" Ribu"),e):void 0;var t}}),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab.accounting-summary",{url:"/accounting-summary",views:{"view-content":{templateUrl:"templates/accounting/summary.html",controller:"AccountingSummaryCtrl"}}}),e.state("tab.accounting-transaksi",{url:"/accounting-transaksi",views:{"view-content":{templateUrl:"templates/accounting/transaksi.html",controller:"AccountingTransaksiCtrl"}}}),e.state("tab.accounting-setoran",{url:"/accounting-setoran",views:{"view-content":{templateUrl:"templates/accounting/setoran.html",controller:"AccountingSetoranCtrl"}}}),e.state("tab.accounting-refund",{url:"/accounting-refund",views:{"view-content":{templateUrl:"templates/accounting/refund.html",controller:"AccountingRefundCtrl"}}}),e.state("tab.accounting-refund-detail",{url:"/accounting-refund/detail",views:{"view-content":{templateUrl:"templates/accounting/refund-detail.html",controller:"ControlGroupProductDetailCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab.newstores",{url:"/control/stores",views:{"view-content":{templateUrl:"templates/control/stores.html",controller:"ControlStoresCtrl"}}}),e.state("tab.newpembayaraniuran",{url:"/control/iuran",views:{"view-content":{templateUrl:"templates/control/pembayaraniuran.html",controller:"ControlPembayaranIuranCtrl"}}}),e.state("tab.newdepositppbob",{url:"/control/depositppob",views:{"view-content":{templateUrl:"templates/control/depositppob.html",controller:"ControlDepositPPOBCtrl"}}}),e.state("tab.newemploye",{url:"/control/employe",views:{"view-content":{templateUrl:"templates/control/employe.html",controller:"EmployeCtrl"}}}),e.state("tab.newproduct",{url:"/control/product",views:{"view-content":{templateUrl:"templates/control/product.html",controller:"ControlProductsCtrl"}}}),e.state("tab.groupproduct",{url:"/control/groupproduct",views:{"view-content":{templateUrl:"templates/control/groupproduct.html",controller:"ControlGroupProductCtrl"}}}),e.state("tab.groupproduct-detail",{url:"/control/groupproduct/:storeid/:groupid",views:{"view-content":{templateUrl:"templates/control/products-group/detailgroupproduct.html",controller:"ControlGroupProductDetailCtrl"}}}),e.state("tab.newmerchant",{url:"/control/merchant",views:{"view-content":{templateUrl:"templates/control/merchant.html",controller:"AbsensiCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab.employe-absensi",{url:"/employe/absensi",views:{"view-content":{templateUrl:"templates/employe/absensi.html",controller:"AbsensiCtrl"}}}),e.state("tab.employe-laporandaily",{url:"/employe/laporan-daily",views:{"view-content":{templateUrl:"templates/employe/laporandaily.html",controller:"LaporanAbsensiDailyCtrl"}}}),e.state("tab.employe-laporanmonthly",{url:"/employe/laporan-monthly",views:{"view-content":{templateUrl:"templates/employe/laporanmonthly.html",controller:"LaporanAbsensiMonthlyCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab",{url:"/tab",abstract:!0,templateUrl:"templates/tabs.html",controller:"AppCtrl"}),e.state("tab.maintenance",{url:"/maintenance",views:{"view-content":{templateUrl:"templates/maintenance/index.html",controller:"MaintenanceCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab.openbook",{url:"/openbook",views:{"view-content":{templateUrl:"templates/openclosebook/openbook.html",controller:"OpenBookCtrl"}}}),e.state("tab.closebook",{url:"/closebook",views:{"view-content":{templateUrl:"templates/openclosebook/closebook.html",controller:"CloseBookCtrl"}}}),e.state("tab.setoranbook",{url:"/setoranbook",views:{"view-content":{templateUrl:"templates/openclosebook/setoran.html",controller:"SetoranCtrl"}}}),e.state("tab.notifikasiclosebook",{url:"/notifikasiclosebook",views:{"view-content":{templateUrl:"templates/openclosebook/notifikasiclosebook.html",controller:"NotifikasiCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab.sales",{url:"/sales",views:{"view-content":{templateUrl:"templates/sales/index.html",controller:"CashierCtrl"}}}),e.state("tab.promise",{url:"/promise",views:{"view-content":{templateUrl:"templates/testing/promise.html",controller:"PromiseCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("auth",{url:"/auth",templateUrl:"templates/secured/mainlogin.html",abstract:!0}),e.state("auth.login",{url:"/login",views:{"login-tab":{templateUrl:"templates/secured/login.html",controller:"LoginCtrl"}},resolve:{userinformation:["$q","StorageService","$injector","$location",function(e,t,o,n){t.get("advanced-profile")&&(n.path("/tab/sales"),$apply())}]}}),e.state("auth.wellcome",{url:"/wellcome",views:{"login-tab":{templateUrl:"templates/wellcome/index.html",controller:"WellComeCtrl"}}}),t.otherwise("/tab/sales")}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab.settingsprofile",{url:"/settings/profile",views:{"view-content":{templateUrl:"templates/settings/profile.html",controller:"SettingCtrl"}}}),e.state("tab.settingtsemplate",{url:"/settings/template",views:{"view-content":{templateUrl:"templates/settings/template.html",controller:"SettingCtrl"}}}),e.state("tab.settingttoko",{url:"/settings/toko",views:{"view-content":{templateUrl:"templates/settings/toko.html",controller:"SettingTokoCtrl"}}}),e.state("tab.settingdevice",{url:"/settings/device",views:{"view-content":{templateUrl:"templates/settings/device.html",controller:"SettingDeviceCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("init",{url:"/init",templateUrl:"templates/stores/mainstores.html",abstract:!0,resolve:{auth:["$q","StorageService","$injector","$location",function(e,t,o,n){var a=t.get("advanced-profile");if(a)return a;n.path("/auth/login"),console.log()}]}}),e.state("init.stores",{url:"/stores",views:{"stores-tab":{templateUrl:"templates/stores/index.html",controller:"StoresCtrl"}}})}]),angular.module("starter").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){e.state("tab.testingstores",{url:"/testing/stores",views:{"view-content":{templateUrl:"templates/testing/stores.html",controller:"TestingStoresCtrl"}}}),e.state("tab.testingcustomers",{url:"/testing/customers",views:{"view-content":{templateUrl:"templates/testing/customers.html",controller:"TestingCustomersCtrl"}}}),e.state("tab.testingproducts",{url:"/testing/products",views:{"view-content":{templateUrl:"templates/testing/products.html",controller:"TestingProductsCtrl"}}}),e.state("tab.testingproductgroups",{url:"/testing/productgroups",views:{"view-content":{templateUrl:"templates/testing/productgroups.html",controller:"TestingProductGroupsCtrl"}}}),e.state("tab.testingproductunits",{url:"/testing/productunits",views:{"view-content":{templateUrl:"templates/testing/productunits.html",controller:"TestingProductUnitsCtrl"}}}),e.state("tab.testingproductgroupindustris",{url:"/testing/productgroupindustris",views:{"view-content":{templateUrl:"templates/testing/productgroupindustris.html",controller:"TestingProductGroupIndustrisCtrl"}}}),e.state("tab.testingproductindustris",{url:"/testing/productindustris",views:{"view-content":{templateUrl:"templates/testing/productindustris.html",controller:"TestingProductIndustrisCtrl"}}}),e.state("tab.testingmerchants",{url:"/testing/merchants",views:{"view-content":{templateUrl:"templates/testing/merchants.html",controller:"TestingMerchantsCtrl"}}}),e.state("tab.testingmerchanttypes",{url:"/testing/merchanttypes",views:{"view-content":{templateUrl:"templates/testing/merchanttypes.html",controller:"TestingMerchantTypesCtrl"}}}),e.state("tab.testingmerchantbanks",{url:"/testing/merchantbanks",views:{"view-content":{templateUrl:"templates/testing/merchantbanks.html",controller:"TestingMerchantBanksCtrl"}}}),e.state("tab.testingkaryawans",{url:"/testing/karyawans",views:{"view-content":{templateUrl:"templates/testing/karyawans.html",controller:"TestingKaryawansCtrl"}}}),e.state("tab.testingtransaksiheaders",{url:"/testing/transaksiheaders",views:{"view-content":{templateUrl:"templates/testing/transaksis/transaksiheaders.html",controller:"TestingTransaksiHeadersCtrl"}}}),e.state("tab.logoffline",{url:"/logoffline",views:{"view-content":{templateUrl:"templates/log/offline.html",controller:"LogOfflineCtrl"}}})}]),angular.module("starter").factory("ConnectivityMonitor",["UtilService","SyncPollingFac","PollingService","PollingFac","$rootScope","$timeout","$cordovaNetwork","$cordovaToast",function(e,t,o,n,a,r,i,s){var c,u;return a.startsyncservertolocal=function(){c=r(function(){r.cancel(c);var t=e.GetParameters();n.GetPolling(t).then(function(e){e.length>0&&o.SyncServerToLocal(e),a.startsyncservertolocal()})},8e3)},a.startsyncofflinelocal=function(){u=r(function(){r.cancel(u),t.SyncOfflineToServer().then(function(e){a.startsyncofflinelocal()},function(e){a.startsyncofflinelocal(),s.show(JSON.parse(e),"long","bottom")})},6e3)},{isOnline:function(){ionic.Platform.isWebView()?i.isOnline()&&(a.startsyncservertolocal(),a.startsyncofflinelocal()):navigator.onLine&&(a.startsyncservertolocal(),a.startsyncofflinelocal())},startWatching:function(){ionic.Platform.isWebView()?(a.$on("$cordovaNetwork:online",function(e,t){a.startsyncservertolocal(),a.startsyncofflinelocal()}),a.$on("$cordovaNetwork:offline",function(e,t){r.cancel(c),r.cancel(u)})):(window.addEventListener("online",function(e){a.startsyncservertolocal(),a.startsyncofflinelocal()},!1),window.addEventListener("offline",function(e){console.log("Ofline"),r.cancel(c),r.cancel(u)},!1))}}}]),angular.module("starter").factory("InitStoresFac",["PPOBCombFac","ProvinsisCombFac","KaryawansCombFac","MerchantsCombFac","CustomersCombFac","ProductsCombFac","TransaksiCombFac","OpenCloseBookCombFac","$rootScope","$timeout","$http","$q","$filter","$window","$cordovaSQLite","UtilService",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f){return{InitStores:function(){var l=d.defer(),T=f.GetParameters(),p=2e3,m=1;return s.GetOpenCloseBook(T).then(function(e){return e}).then(function(){u(function(){return c.$broadcast("loading-stores","Transaksi Header"),i.GetTransaksiHeaders(T)},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","Produk Group"),r.GetProductGroups(T)},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","Pelanggan"),a.GetCustomers(T)},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","Type Pembayaran"),n.GetMerchantTypes()},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","Merchant"),n.GetMerchants(T)},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","Karyawan"),o.GetKaryawans(T)},p*m++)}).then(function(){return t.GetProvinsisComb()}).then(function(){u(function(){return c.$broadcast("loading-stores","Produk"),r.GetProducts(T)},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","PPOB Group"),e.GetGroups()},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","PPOB Kategori"),e.GetKategoris()},p*m++)}).then(function(){u(function(){return c.$broadcast("loading-stores","PPOB Produk"),e.GetProducts()},p*m++)}).then(function(){u(function(){c.$broadcast("loading-stores","Sukses"),l.resolve("Sukses")},p*m++)},function(e){l.reject(e)}),l.promise}}}]),angular.module("starter").factory("OfflineLiteFac",["$rootScope","$q","$cordovaSQLite","UtilService",function(e,t,o,n){return{CreateOffline:function(n){var a=t.defer(),r=[n.NAMA_TABEL,n.PRIMARY_KEY,n.TYPE_ACTION,0];return o.execute(e.db,"INSERT INTO Tbl_SyncLocal (NAMA_TABEL,PRIMARY_KEY,TYPE_ACTION,STATUS_SYNC) VALUES (?,?,?,?)",r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},GetLogOffline:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_SyncLocal",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetOffline:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_SyncLocal WHERE STATUS_SYNC= 0 LIMIT 20",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},UpdateOffline:function(a){var r=t.defer();return o.execute(e.db,"UPDATE Tbl_SyncLocal SET STATUS_SYNC = 1 WHERE ID_LOCAL= ?",[a.ID_LOCAL]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},SumOfflinePerTableName:function(){var a=t.defer();return o.execute(e.db,"SELECT NAMA_TABEL,COUNT(ID_LOCAL)AS JUMLAH FROM Tbl_SyncLocal WHERE STATUS_SYNC=0 GROUP BY NAMA_TABEL",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("SyncPollingFac",["PPOBFac","OfflineLiteFac","OpenCloseBookLiteFac","OpenCloseBookFac","MerchantsFac","MerchantsLiteFac","StoresLiteFac","StoresFac","CustomersLiteFac","CustomersFac","KaryawansLiteFac","KaryawansFac","ShopCartLiteFac","TransaksiCombFac","TransaksisFac","TransaksisLiteFac","ProductStockLiteFac","ProductsFac","ProductsLiteFac","$rootScope","$q","UtilService",function(e,t,o,n,a,r,i,s,c,u,l,d,T,p,m,f,E,S,_,h,I,A){return{SyncOfflineToServer:function(){var p=I.defer();return t.GetOffline().then(function(A){var D=[];angular.forEach(A,function(I,A){if("Tbl_Transaksis"==I.NAMA_TABEL){var R=f.GetTransaksiHeaderByTransID(I.PRIMARY_KEY).then(function(e){m.CreateTransaksiHeaders(e[0]).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){"data-exist"==e?t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)}):p.reject(e)})},function(e){p.reject(e)});D.push(R)}else"Tbl_ShopCart"==I.NAMA_TABEL?(R=T.GetShopCartByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];o.PRODUCT_QTY=o.QTY_INCART,o.STATUS=1,m.CreateTranskasiDetails(o).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Product_Stocks"==I.NAMA_TABEL?(R=E.GetProductStockByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];S.CreateProductStocks(o).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_KaryawanAbsensis"==I.NAMA_TABEL?(R=l.GetKaryawanAbsensisByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];d.CreateKaryawanAbsensis(o).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Products"==I.NAMA_TABEL?(R=_.GetProductByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];o.CURRENT_PRICE=o.HARGA_JUAL,1==I.TYPE_ACTION?S.CreateProducts(o).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION?S.UpdateProducts(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):S.DeleteProducts(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Product_Groups"==I.NAMA_TABEL?(R=_.GetProductGroupsByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?S.CreateProductGroups(o).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION?S.UpdateProductGroups(o).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):S.DeleteProductGroups(o).then(function(e){h.$broadcast("syncofflinetoserver",I),t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Karyawans"==I.NAMA_TABEL?(R=l.GetKaryawanByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?d.CreateKaryawans(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION?d.UpdateKaryawans(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):d.DeleteKaryawans(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Customers"==I.NAMA_TABEL?(R=c.GetCustomerByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?u.CreateCustomers(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION?u.UpdateCustomers(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):u.DeleteCustomers(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Stores"==I.NAMA_TABEL?(R=i.GetStoreByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?s.CreateStores(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION?s.UpdateStores(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):s.DeleteStores(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Merchants"==I.NAMA_TABEL?(R=r.GetMerchantByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?a.CreateMerchants(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION?a.UpdateMerchants(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):a.DeleteMerchants(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_MerchantTypes"==I.NAMA_TABEL?(R=r.GetMerchantTypeByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?a.CreateMerchantTypes(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION?a.UpdateMerchantTypes(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):a.DeleteMerchantTypes(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_OpenCloseBook"==I.NAMA_TABEL?(R=o.GetOpenCloseBookByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?n.CreateOpenCloseBook(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION&&n.UpdateOpenCloseBook(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_Setoran"==I.NAMA_TABEL?(R=o.GetSetoranBookByIDLocal(I.PRIMARY_KEY).then(function(e){var o=e[0];1==I.TYPE_ACTION?n.CreateSetoranBook(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)}):2==I.TYPE_ACTION&&n.UpdateSetoranBook(o).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R)):"Tbl_ShopCartPPOB"==I.NAMA_TABEL&&(R=T.GetShopCartPPOBByIDLocal(I.PRIMARY_KEY).then(function(o){var n=o[0];1==I.TYPE_ACTION&&e.CreateTransaksi(n).then(function(e){t.UpdateOffline(I).then(function(e){p.resolve(e)},function(e){p.reject(e)})},function(e){p.reject(e)})},function(e){p.reject(e)}),D.push(R))}),I.all(D).then(function(e){p.resolve("Sukses")},function(e){p.resolve("Gagal")})},function(e){console.log(e),p.reject(e)}),p.promise}}}]),angular.module("starter").factory("CustomersCombFac",["CustomersLiteFac","CustomersFac","$q","$filter",function(e,t,o,n){return{GetCustomers:function(a){var r=o.defer();return e.GetCustomers(a).then(function(o){angular.isArray(o)&&o.length>0?r.resolve(o):t.GetCustomers(a).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),e.CreateCustomers(t,"FROM-SERVER")}),r.resolve(t)):r.resolve([])},function(e){r.reject(e)})}),r.promise}}}]),angular.module("starter").factory("KaryawansCombFac",["KaryawansLiteFac","KaryawansFac","$q","$filter",function(e,t,o,n){return{GetKaryawans:function(a){var r=o.defer();return e.GetKaryawans(a).then(function(o){angular.isArray(o)&&o.length>0?r.resolve(o):t.GetKaryawans(a).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),e.CreateKaryawans(t,"FROM-SERVER")}),r.resolve(t)):r.resolve([])},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},GetKaryawanAbsensis:function(a){var r=o.defer();return e.GetKaryawanAbsensis(a).then(function(o){angular.isArray(o)&&o.length>0?r.resolve(o):t.GetKaryawanAbsensis(a).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),e.CreateKaryawanAbsensis(t,"FROM-SERVER")}),r.resolve(t)):r.resolve([])},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("MerchantsCombFac",["MerchantsLiteFac","MerchantsFac","$q","$filter","UtilService",function(e,t,o,n,a){return{GetMerchants:function(r){var i=o.defer();return e.GetMerchants(r).then(function(o){angular.isArray(o)&&o.length>0?i.resolve(o):t.GetMerchants(r).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),t.ACCESS_GROUP=r.ACCESS_GROUP,t.STATUS=a.SwitchStatus(t.STATUS),e.CreateMerchants(t,"FROM-SERVER")}),i.resolve(t)):i.resolve([])},function(e){i.reject(e)})}),i.promise},GetMerchantTypes:function(r){var i=o.defer();return e.GetMerchantTypes(r).then(function(o){angular.isArray(o)&&o.length>0?i.resolve(o):t.GetMerchantTypes(r).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),t.STATUS=a.SwitchStatus(t.STATUS),e.CreateMerchantTypes(t,"FROM-SERVER")}),i.resolve(t)):i.resolve([])},function(e){i.reject(e)})}),i.promise},GetMerchantBanks:function(r){var i=o.defer();return e.GetMerchantBanks(r).then(function(o){angular.isArray(o)&&o.length>0?i.resolve(o):t.GetMerchantBanks(r).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),t.STATUS=a.SwitchStatus(t.STATUS),t.IS_ONSERVER=1,e.CreateMerchantBanks(t)}),i.resolve(t)):i.resolve([])},function(e){i.reject(e)})}),i.promise}}}]),angular.module("starter").factory("OpenCloseBookCombFac",["OpenCloseBookLiteFac","OpenCloseBookFac","UtilService","$q","$filter",function(e,t,o,n,a){return{GetOpenCloseBook:function(o){var r=n.defer();return e.GetOpenCloseBook(o).then(function(n){angular.isArray(n)&&n.length>0?r.resolve(n):t.GetOpenCloseBook(o).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.TGL_SAVE=a("date")(new Date,"yyyy-MM-dd"),t.SPLIT_OPENCLOSE_ID=t.OPENCLOSE_ID.split(".")[2],t.ADDCASH||(t.ADDCASH=0),t.CASHINDRAWER||(t.CASHINDRAWER=0),e.CreateOpenCloseBook(t,"FROM-SERVER")}),r.resolve(t)):r.resolve([])},function(e){r.reject(e)})}),r.promise},GetSetoranBook:function(o){var r=n.defer();return e.GetSetoranBook(o).then(function(n){angular.isArray(n)&&n.length>0?r.resolve(n):t.GetSetoranBook(o).then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(t,o){t.SPLIT_OPENCLOSE_ID=t.OPENCLOSE_ID.split(".")[2],t.TGL_SAVE=a("date")(new Date(t.TGL_STORAN),"yyyy-MM-dd"),t.STORAN_IMAGE||(t.STORAN_IMAGE="img/save-image.png"),e.CreateSetoranBook(t,"FROM-SERVER")}),r.resolve(t)):r.resolve([])},function(e){r.reject(e)})}),r.promise}}}]),angular.module("starter").factory("PPOBCombFac",["$rootScope","$http","$q","$filter","$window","$cordovaSQLite","UtilService","PPOBLiteFac","PPOBFac",function(e,t,o,n,a,r,i,s,c){return{GetHeaders:function(e){var t=o.defer();return s.GetHeaders(e).then(function(e){angular.isArray(e)&&e.length>0?t.resolve(e):c.GetHeaders().then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){s.SetHeaders(e,"FROM-SERVER")}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise},GetGroups:function(e){var t=o.defer();return s.GetGroups(e).then(function(e){angular.isArray(e)&&e.length>0?t.resolve(e):c.GetGroups().then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){e.KELOMPOK_ID=e.ID,s.CreateGroups(e,"FROM-SERVER")}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise},GetKategoris:function(e){var t=o.defer();return s.GetKategoris(e).then(function(e){angular.isArray(e)&&e.length>0?t.resolve(e):c.GetKategoris().then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){s.CreateKategoris(e,"FROM-SERVER")}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise},GetProducts:function(e){var t=o.defer();return s.GetProducts(e).then(function(e){angular.isArray(e)&&e.length>0?t.resolve(e):c.GetProducts().then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){s.CreateProducts(e,"FROM-SERVER")}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise},GetDetails:function(e){var t=o.defer();return s.GetDetails(e).then(function(e){angular.isArray(e)&&e.length>0?t.resolve(e):c.GetDetails().then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){s.SetDetails(e,"FROM-SERVER")}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise},GetNominals:function(e){var t=o.defer();return s.GetNominals(e).then(function(e){angular.isArray(e)&&e.length>0?t.resolve(e):c.GetNominals().then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){e.ID_SERVER=e.ID,s.SetNominals(e,"FROM-SERVER")}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise}}}]),angular.module("starter").factory("ProductsCombFac",["ProductStockLiteFac","ProductsLiteFac","ProductsFac","UtilService","$rootScope","$http","$q","$filter","$cordovaSQLite",function(e,t,o,n,a,r,i,s,c){return{GetProducts:function(e){var n=i.defer();return t.GetProducts(e).then(function(a){angular.isArray(a)&&a.length>0?n.resolve(a):o.GetProducts(e).then(function(o){if(angular.isArray(o)&&o.length>0){var a=[];angular.forEach(o,function(o,n){o.ACCESS_GROUP=e.ACCESS_GROUP,o.STORE_ID=e.STORE_ID,o.TGL_SAVE=e.TGL_SAVE,o.CURRENT_STOCK<0&&(o.CURRENT_STOCK=0),o.HARGA_JUAL=o.CURRENT_PRICE,o.DISCOUNT=o.CURRENT_DISCOUNT,o.PROMO=o.CURRENT_PROMO,o.IS_FAVORITE=0;var r=t.CreateProducts(o,"FROM-SERVER");a.push(r)}),i.all(a).then(function(e){n.resolve(o)},function(e){n.resolve(o)})}else n.resolve([])},function(e){n.reject(e)})},function(e){console.log(e)}),n.promise},GetProductImages:function(e){var n=i.defer();return t.GetProductImages(e).then(function(a){angular.isArray(a)&&a.length>0?n.resolve(a):o.GetProductImages(e).then(function(o){angular.isArray(o)&&o.length>0?(angular.forEach(o,function(o,n){o.TGL_SAVE=e.TGL_SAVE,o.IS_ONSERVER=1,t.CreateProductImages(o)}),n.resolve(o)):n.resolve([])})}),n.promise},GetProductGroups:function(e){var n=i.defer();return t.GetProductGroups(e).then(function(a){angular.isArray(a)&&a.length>0?n.resolve(a):o.GetProductGroups(e).then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,o){t.CreateProductGroups(e,"FROM-SERVER")}),n.resolve(e)):n.resolve([])})}),n.promise},GetProductStocks:function(t){var a=i.defer();return e.GetProductStocks(t).then(function(r){angular.isArray(r)&&r.length>0?a.resolve(r):o.GetProductStocks(t).then(function(t){if(angular.isArray(t)&&t.length>0){var o=[];angular.forEach(t,function(t,a){t.TGL_SAVE=s("date")(new Date,"yyyy-MM-dd"),t.STATUS=n.SwitchStatus(t.STATUS);var r=e.CreateProductStocks(t,"FROM-SERVER");o.push(r)}),i.all(o).then(function(e){a.resolve(t)},function(e){a.resolve(t)})}else a.resolve([])},function(e){a.reject(e)})}),a.promise}}}]),angular.module("starter").factory("ProvinsisCombFac",["$rootScope","$http","$q","$filter","$cordovaSQLite","ProvinsisLiteFac","ProvinsisFac",function(e,t,o,n,a,r,i){return{GetProvinsisComb:function(){var e=o.defer();return r.GetProvinsis().then(function(t){angular.isArray(t)&&t.length>0?e.resolve(t):i.GetProvinsis().then(function(t){angular.isArray(t)&&t.length>0?(angular.forEach(t,function(e,t){r.SetProvinsis(e)}),e.resolve(t)):e.resolve([])},function(t){e.reject(t)})}),e.promise},GetKotasComb:function(e){var t=o.defer();return r.GetKotas(e).then(function(o){angular.isArray(o)&&o.length>0?t.resolve(o):i.GetKotas(e).then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){r.SetKotas(e)}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise}}}]),angular.module("starter").factory("StoresCombFac",["$rootScope","$http","$q","$filter","$cordovaSQLite","UtilService","StoresLiteFac","StoresFac",function(e,t,o,n,a,r,i,s){return{GetStores:function(e){var t=o.defer();return delete e.STORE_ID,i.GetStores(e).then(function(o){angular.isArray(o)&&o.length>0?t.resolve(o):s.GetStores(e).then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){e.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),e.STATUS=r.SwitchStatus(e.STATUS),i.CreateStores(e,"FROM-SERVER")}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise}}}]),angular.module("starter").factory("TransaksiCombFac",["$rootScope","$http","$q","$filter","$cordovaSQLite","UtilService","TransaksisFac","TransaksisLiteFac","ShopCartLiteFac",function(e,t,o,n,a,r,i,s,c){return{GetTransaksiHeaders:function(e){var t=o.defer();return s.GetTransaksiHeaders(e).then(function(o){angular.isArray(o)&&o.length>0?t.resolve(o):i.GetTransaksiHeaders(e).then(function(e){angular.isArray(e)&&e.length>0?(e=_.sortBy(e,"TRANS_ID"),angular.forEach(e,function(e,t){e.TGL_SAVE=n("date")(new Date(e.TRANS_DATE),"yyyy-MM-dd"),e.TRANS_ID=e.TRANS_ID,e.SPLIT_TRANS_ID=e.TRANS_ID.split(".")[3]+"."+e.TRANS_ID.split(".")[4],e.STATUS=r.SwitchStatus(e.STATUS),e.CASHIER_NAME?e.CASHIER_NAME=e.CASHIER_NAME.replace(/null/g,""):e.CASHIER_NAME="RADUMTA SITEPU",0==e.TYPE_PAY_ID&&(e.TYPE_PAY_NM="TUNAI"),null!=e.CONSUMER_EMAIL&&"null"!=e.CONSUMER_EMAIL||(e.CONSUMER_EMAIL="--"),s.CreateTransaksiHeaders(e,"FROM-SERVER").then(function(e){console.log(e)},function(e){console.log(e)})}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})}),t.promise},GetTransaksiHeaderByTransID:function(e){var t=o.defer();return s.GetTransaksiHeaderByTransID(e).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},GetTransaksiDetails:function(e){var t=o.defer();return c.GetShopCartByNomorTrans(e).then(function(o){angular.isArray(o)&&o.length>0?t.resolve(o):i.GetTransaksiDetails(e).then(function(e){angular.isArray(e)&&e.length>0?(angular.forEach(e,function(e,t){e.TGL_SAVE=n("date")(new Date,"yyyy-MM-dd"),e.PRODUCT_QTY?e.QTY_INCART=e.PRODUCT_QTY:e.QTY_INCART=0,e.TRANS_ID=e.TRANS_ID,e.STATUS=r.SwitchStatus(e.STATUS),e.IS_ONSERVER=1,c.CreateShopCart(e,"FROM-SERVER").then(function(e){console.log(e)},function(e){console.log(e)})}),t.resolve(e)):t.resolve([])},function(e){t.reject(e)})},function(e){t.reject(e)}),t.promise}}}]),angular.module("starter").factory("CustomersFac",["$http","$q","UtilService",function(e,t,o){return{GetCustomers:function(n){var a=t.defer(),r=o.ApiUrl()+"master/customers";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){a.resolve(e.CUSTOMER)}).error(function(e,t){a.reject(e)}),a.promise},GetCustomerByCustomerID:function(n){var a=t.defer(),r=o.ApiUrl()+"master/customers";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){a.resolve(e.CUSTOMER)}).error(function(e,t){a.reject(e)}),a.promise},CreateCustomers:function(n){var a=t.defer(),r=o.ApiUrl()+"master/customers";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){a.resolve(e.CUSTOMER)}).error(function(e,t){a.reject(e)}),a.promise},UpdateCustomers:function(n){var a=t.defer(),r=o.ApiUrl()+"master/customers";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){a.resolve(e.CUSTOMER)}).error(function(e,t){a.reject(e)}),a.promise},DeleteCustomers:function(n){var a=t.defer(),r=o.ApiUrl()+"master/customers";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){a.resolve(e.CUSTOMER)}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("authInterceptor",["StorageService",function(e){return{request:function(t){t.headers=t.headers||{};var o=e.get("profile");return o&&(t.headers.Authorization="Bearer "+o.access_token),t},response:function(e){return 401===e.status&&console.log("Tidak Bertanggung Jawab"),e||$q.when(e)}}}]),angular.module("starter").factory("KaryawansFac",["$http","$q","UtilService",function(e,t,o){return{GetKaryawans:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/karyawans";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_KARYAWAN)?a.resolve(e.LIST_KARYAWAN):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetKaryawansByKaryawanID:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/karyawans";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_KARYAWAN)&&a.resolve(e.LIST_KARYAWAN)}).error(function(e,t){a.reject(e)}),a.promise},CreateKaryawans:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/karyawans";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_KARYAWAN)&&a.resolve(e.LIST_KARYAWAN)}).error(function(e,t){a.reject(e)}),a.promise},UpdateKaryawans:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/karyawans";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_KARYAWAN)&&a.resolve(e.LIST_KARYAWAN)}).error(function(e,t){a.reject(e)}),a.promise},DeleteKaryawans:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/karyawans";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_KARYAWAN)&&a.resolve(e.LIST_KARYAWAN)}).error(function(e,t){a.reject(e)}),a.promise},GetKaryawanAbsensis:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/absensis";n.METHODE="GET",n.TGL=n.TGL_SAVE;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_ABSENSI)?a.resolve(e.LIST_ABSENSI):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateKaryawanAbsensis:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/absensis";n.METHODE="POST";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_ABSENSI)&&a.resolve(e.LIST_ABSENSI)}).error(function(e,t){a.reject(e)}),a.promise},UpdateKaryawanAbsensis:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/absensis",i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_ABSENSI)&&a.resolve(e.LIST_ABSENSI)}).error(function(e,t){a.reject(e)}),a.promise},DeleteKaryawanAbsensis:function(n){var a=t.defer(),r=o.ApiUrl()+"hirs/absensis",i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_ABSENSI)&&a.resolve(e.LIST_ABSENSI)}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("MerchantsFac",["$http","$q","UtilService",function(e,t,o){return{GetMerchants:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchants";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT)&&a.resolve(e.MERCHANT)}).error(function(e,t){a.reject(e)}),a.promise},GetMerchantsByMerchantsId:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchants";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT)&&a.resolve(e.MERCHANT)}).error(function(e,t){a.reject(e)}),a.promise},CreateMerchants:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchants";n.UUID=o.GetParameters().UUID,n.METHODE="POST";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT)&&a.resolve(e.MERCHANT)}).error(function(e,t){a.reject(e)}),a.promise},UpdateMerchants:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchants";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT)&&a.resolve(e.MERCHANT)}).error(function(e,t){a.reject(e)}),a.promise},DeleteMerchants:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchants";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT)&&a.resolve(e.MERCHANT)}).error(function(e,t){a.reject(e)}),a.promise},GetMerchantBanks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-banks";angular.isDefined(n)?n.METHODE="GET":n={METHODE:"GET"};var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_BANK)&&a.resolve(e.MERCHANT_BANK)}).error(function(e,t){a.reject(e)}),a.promise},CreateMerchantBanks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-banks";n.METHODE="POST";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_BANK)&&a.resolve(e.MERCHANT_BANK)}).error(function(e,t){a.reject(e)}),a.promise},UpdateMerchantBanks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-banks",i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_BANK)&&a.resolve(e.MERCHANT_BANK)}).error(function(e,t){a.reject(e)}),a.promise},DeleteMerchantBanks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-banks",i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.delete(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_BANK)&&a.resolve(e.MERCHANT_BANK)}).error(function(e,t){a.reject(e)}),a.promise},GetMerchantTypes:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-types";angular.isDefined(n)?n.METHODE="GET":n={METHODE:"GET"};var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_TYPE)&&a.resolve(e.MERCHANT_TYPE)}).error(function(e,t){a.reject(e)}),a.promise},GetMerchantTypesByTypesID:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-types";angular.isDefined(n)?n.METHODE="GET":n={METHODE:"GET"};n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_TYPE)&&a.resolve(e.MERCHANT_TYPE)}).error(function(e,t){a.reject(e)}),a.promise},CreateMerchantTypes:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-types";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_TYPE)&&a.resolve(e.MERCHANT_TYPE)}).error(function(e,t){a.reject(e)}),a.promise},UpdateMerchantTypes:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-types";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_TYPE)&&a.resolve(e.MERCHANT_TYPE)}).error(function(e,t){a.reject(e)}),a.promise},DeleteMerchantTypes:function(n){var a=t.defer(),r=o.ApiUrl()+"master/merchant-types";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.delete(r,s,c).success(function(e,t,o,n){angular.isDefined(e.MERCHANT_TYPE)&&a.resolve(e.MERCHANT_TYPE)}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("OpenCloseBookFac",["$http","$q","UtilService",function(e,t,o){return{GetOpenCloseBook:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-opencloses";n.METHODE="GET",n.TGL_OPEN=n.TGL_SAVE;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_OPENCLOSE)?a.resolve(e.LIST_OPENCLOSE):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateOpenCloseBook:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-opencloses";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_OPENCLOSE)?a.resolve(e.LIST_OPENCLOSE):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},UpdateOpenCloseBook:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-opencloses";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_OPENCLOSE)?a.resolve(e.LIST_OPENCLOSE):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetSetoranBook:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-storans";n.METHODE="GET",n.TGL_STORAN=n.TGL_SAVE;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_STORAN)?a.resolve(e.LIST_STORAN):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateSetoranBook:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-storans";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_STORAN)?a.resolve(e.LIST_STORAN):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},UpdateSetoranBook:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-storans";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_STORAN)?a.resolve(e.LIST_STORAN):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("PollingFac",["$http","$q","UtilService",function(e,t,o){return{GetPolling:function(n){var a=t.defer(),r=o.ApiUrl()+"master/pollings?ACCESS_GROUP="+n.ACCESS_GROUP+"&STORE_ID="+n.STORE_ID+"&ACCESS_ID="+n.ACCESS_ID+"&UUID="+n.UUID;n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.get(r,s,c).success(function(e,t,o,n){a.resolve(e)}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("PPOBFac",["$http","$q","$window","$rootScope","UtilService",function(e,t,o,n,a){return{GetHeaders:function(){var o=t.defer(),n=a.ApiUrl();return e({url:n+"ppob/headers",method:"GET",params:{}}).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},GetGroups:function(){var o=t.defer(),n=a.ApiUrl();return e({url:n+"ppob/datas/kelompok-group",method:"POST",params:{}}).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},GetKategoris:function(){var o=t.defer(),n=a.ApiUrl();return e({url:n+"ppob/datas/kelompok-kategori",method:"POST",params:{}}).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},GetProducts:function(){var o=t.defer(),n=a.ApiUrl()+"ppob/datas/produk",r=a.SerializeObject({KELOMPOK:"ALL"}),i=r.serialized,s=r.config;return e.post(n,i,s).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},GetDetails:function(){var o=t.defer(),n=a.ApiUrl();return e({url:n+"ppob/details",method:"GET",params:{}}).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},GetNominals:function(){var o=t.defer(),n=a.ApiUrl();return e({url:n+"ppob/nominals",method:"GET",params:{}}).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},CreateTransaksi:function(o){var n=t.defer(),r=a.ApiUrl()+"ppob/datas/transaksi",i=a.SerializeObject(o),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,a){n.resolve(e)}).error(function(e,t){n.reject(e)}),n.promise}}}]),angular.module("starter").factory("ProductsFac",["$http","$q","UtilService",function(e,t,o){return{GetProducts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/products",i={STORE_ID:n.STORE_ID,METHODE:"GET"},s=o.SerializeObject(i),c=s.serialized,u=s.config;return e.post(r,c,u).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT)?a.resolve(e.LIST_PRODUCT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductsByProductID:function(n){var a=t.defer(),r=o.ApiUrl()+"master/products";n.METHODE="GET",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT)?a.resolve(e.LIST_PRODUCT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateProducts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/products";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT)?a.resolve(e.LIST_PRODUCT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},UpdateProducts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/products";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT)?a.resolve(e.LIST_PRODUCT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},DeleteProducts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/products";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT)?a.resolve(e.LIST_PRODUCT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductGroups:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-groups";n.METHODE="GET",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_GROUP)?a.resolve(e.LIST_PRODUCT_GROUP):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductGroupsByGroupID:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-groups";n.METHODE="GET",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_GROUP)?a.resolve(e.LIST_PRODUCT_GROUP):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateProductGroups:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-groups";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_GROUP)?a.resolve(e.LIST_PRODUCT_GROUP):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},UpdateProductGroups:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-groups";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_GROUP)?a.resolve(e.LIST_PRODUCT_GROUP):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},DeleteProductGroups:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-groups";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_GROUP)?a.resolve(e.LIST_PRODUCT_GROUP):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductUnits:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-units",i={STORE_ID:n.STORE_ID,METHODE:"GET"},s=o.SerializeObject(i),c=s.serialized,u=s.config;return e.post(r,c,u).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_UNIT)?a.resolve(e.LIST_PRODUCT_UNIT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductIndustriGroups:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-industri-groups",i=o.SerializeObject({METHODE:"GET"}),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_INDUSTRI_GROUP)?a.resolve(e.LIST_INDUSTRI_GROUP):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductIndustris:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-industris";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_INDUSTRI)?a.resolve(e.LIST_INDUSTRI):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductImages:function(n){delete n.PRODUCT_ID;var a=t.defer(),r=o.ApiUrl()+"master/product-images";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return c.cache=!0,e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_IMAGE)?a.resolve(e.LIST_PRODUCT_IMAGE):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductImagesByProductID:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-images";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return c.cache=!0,e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_IMAGE)?a.resolve(e.LIST_PRODUCT_IMAGE):angular.isDefined(e.result)&&"data-empty"==e.result&&a.reject("data-empty")}).error(function(e,t){a.reject(e)}),a.promise},CreateProductImages:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-images";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_GROUP)?a.resolve(e.LIST_PRODUCT_GROUP):angular.isDefined(e.result)&&"PRODUCT_ID-already-exist"==e.result&&a.reject("Gambar Sudah Eksis")}).error(function(e,t){a.reject(e)}),a.promise},UpdateProductImages:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-images";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_GROUP)?a.resolve(e.LIST_PRODUCT_GROUP):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},DeleteProductImages:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-images";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_IMAGE)?a.resolve(e.LIST_PRODUCT_IMAGE):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductHargas:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-hargas";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_HARGA)?a.resolve(e.LIST_PRODUCT_HARGA):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateProductHargas:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-hargas";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_HARGA)?a.resolve(e.LIST_PRODUCT_HARGA):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},UpdateProductHargas:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-hargas";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_HARGA)?a.resolve(e.LIST_PRODUCT_HARGA):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},DeleteProductHargas:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-hargas";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_HARGA)?a.resolve(e.LIST_PRODUCT_HARGA):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductStocks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-stocks";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_STOCK)?a.resolve(e.LIST_PRODUCT_STOCK):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateProductStocks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-stocks";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_STOCK)?a.resolve(e.LIST_PRODUCT_STOCK):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},UpdateProductStocks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-stocks";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_STOCK)?a.resolve(e.LIST_PRODUCT_STOCK):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},DeleteProductStocks:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-stocks";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_STOCK)?a.resolve(e.LIST_PRODUCT_STOCK):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetProductDiscounts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-discounts";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_DISCOUNT)?a.resolve(e.LIST_PRODUCT_DISCOUNT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateProductDiscounts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-discounts";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_DISCOUNT)?a.resolve(e.LIST_PRODUCT_DISCOUNT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},UpdateProductDiscounts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-discounts";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_DISCOUNT)?a.resolve(e.LIST_PRODUCT_DISCOUNT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},DeleteProductDiscounts:function(n){var a=t.defer(),r=o.ApiUrl()+"master/product-discounts";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_PRODUCT_DISCOUNT)?a.resolve(e.LIST_PRODUCT_DISCOUNT):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("ProvinsisFac",["$http","$q","UtilService",function(e,t,o){return{GetProvinsis:function(){var n=t.defer(),a=o.ApiUrl()+"master/provinsis",r=o.SerializeObject({METHODE:"GET"}),i=r.serialized,s=r.config;return e.post(a,i,s).success(function(e,t,o,a){angular.isDefined(e.PROVINSI)&&n.resolve(e.PROVINSI)}).error(function(e,t){n.reject(e)}),n.promise},GetKotas:function(n){var a=t.defer(),r=o.ApiUrl()+"master/kotas";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.KOTA)&&a.resolve(e.KOTA)}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("SecuredFac",["$http","$q","StorageService","UtilService",function(e,t,o,n){var a=function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-images",i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){a.resolve(e.ACCESS_IMAGE)}).error(function(e,t){a.reject(e)}),a.promise};return{Login:function(a){var r=t.defer(),i=n.ApiUrl()+"login/user-logins",s=n.SerializeObject(a),c=s.serialized,u=s.config;return e.post(i,c,u).success(function(e,t,n,i){if(angular.isDefined(e.result)&&"wrong-username"==e.result)r.reject("username_salah");else if(angular.isDefined(e.result)&&"wrong-password"==e.result)r.reject("password_salah");else if(angular.isDefined(e.result)&&"wrong-sosmed"==e.result)r.reject("wrong-sosmed");else if(angular.isDefined(e.result)&&"Active-Code"==e.result)r.reject("Active-Code");else if(angular.isDefined(e.result)&&"wrong-code"==e.result)r.reject("wrong-code");else{if(angular.isArray(e.User)&&e.User.length>0)var s=e.USER[0];else s=e.USER;s.STORES_ACTIVE=s.LIST_STORES[0],o.set("advanced-profile",s);var c={};c.ACCESS_GROUP=s.ACCESS_GROUP,c.ACCESS_ID=s.ACCESS_ID,c.access_token=s.access_token,c.username=s.username,c.UUID=a.UUID,o.set("basic-parameters",c),r.resolve(s)}}).error(function(e,t){r.reject(e)}),r.promise},Registration:function(a){var r=t.defer(),i=n.ApiUrl()+"login/user-signup-owners",s=n.SerializeObject(a),c=s.serialized,u=s.config;return e.post(i,c,u).success(function(e,t,n,i){if(angular.isDefined(e.result)&&"Email-Already-Exist"==e.result)r.reject("Email-Already-Exist");else if(angular.isDefined(e.result)&&"Username-Already-Exist"==e.result)r.reject("Username-Already-Exist");else if(angular.isDefined(e.result)&&"Sosmed-Provider-Already-Exist"==e.result)r.reject("Sosmed-Provider-Already-Exist");else{if(angular.isArray(e.User)&&e.User.length>0)var s=e.USER[0];else s=e.USER;angular.isDefined(s.LIST_STORES)&&(s.STORES_ACTIVE=s.LIST_STORES[0],o.set("advanced-profile",s));var c={};c.ACCESS_GROUP=s.ACCESS_GROUP,c.ACCESS_ID=s.ACCESS_ID,c.access_token=s.access_token,c.username=s.username,c.UUID=a.UUID,o.set("basic-parameters",c),r.resolve(s)}}).error(function(e,t){r.reject(e)}),r.promise},RegistrationLoginOps:function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-signup-oprs";o.METHODE="POST";var i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.result)&&"User Already Exist"==e.result?a.reject("User Already Exist"):angular.isDefined(e.result)&&"Not Exist Store"==e.result?a.reject("Not Exist Store"):angular.isDefined(e.result)&&"Not Exist Owner"==e.result?a.reject("Not Exist Owner"):angular.isDefined(e.result)&&"Not Exist access_group"==e.result?a.reject("Not Exist access_group"):a.resolve(e.result)}).error(function(e,t){a.reject(e)}),a.promise},UpdateLoginOps:function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-signup-oprs",i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.result)&&"User Already Exist"==e.result?a.reject("User Already Exist"):angular.isDefined(e.result)&&"Not Exist Store"==e.result?a.reject("Not Exist Store"):angular.isDefined(e.result)&&"Not Exist Owner"==e.result?a.reject("Not Exist Owner"):angular.isDefined(e.result)&&"Not Exist access_group"==e.result?a.reject("Not Exist access_group"):a.resolve(e.result)}).error(function(e,t){a.reject(e)}),a.promise},UpdateProfileOps:function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-profiles",i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.result)&&"User Already Exist"==e.result?a.reject("User Already Exist"):angular.isDefined(e.result)&&"Not Exist Store"==e.result?a.reject("Not Exist Store"):angular.isDefined(e.result)&&"Not Exist Owner"==e.result?a.reject("Not Exist Owner"):angular.isDefined(e.result)&&"Not Exist access_group"==e.result?a.reject("Not Exist access_group"):a.resolve(e.PROFILE)}).error(function(e,t){a.reject(e)}),a.promise},GetListUserOps:function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-operationals";o.METHODE="GET";var i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){a.resolve(e.LIST_User)}).error(function(e,t){a.reject(e)}),a.promise},GetImageUserOps:function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-images";o.METHODE="GET";var i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.ACCESS_IMAGE)?a.resolve(e.ACCESS_IMAGE):a.reject("data-empty")}).error(function(e,t){a.reject(e)}),a.promise},UpdateImageUserOps:a,CreateImageUserOps:function(o){var r=t.defer(),i=n.ApiUrl()+"login/user-images";o.METHODE="POST";var s=n.SerializeObject(o),c=s.serialized,u=s.config;return e.post(i,c,u).success(function(e,t,n,i){e.ACCESS_IMAGE?r.resolve(e.ACCESS_IMAGE):"ACCESS_ID-already-exist"==e.result&&a(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})}).error(function(e,t){r.reject(e)}),r.promise},ResetOldPassword:function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-resets",i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.result)&&"Email-Not-Exist"==e.result?a.reject("Email-Not-Exist"):angular.isDefined(e.result)&&"Success-Check-Email-Code"==e.result&&a.resolve("Success-Check-Email-Code")}).error(function(e,t){a.reject(e)}),a.promise},SetNewPassword:function(o){var a=t.defer(),r=n.ApiUrl()+"login/user-resets",i=n.SerializeObject(o),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.result)&&"wrong-code"==e.result?a.reject("wrong-code"):a.resolve(e)}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("StoresFac",["$http","$q","UtilService",function(e,t,o){return{GetStores:function(n){var a=t.defer(),r=o.ApiUrl()+"master/stores";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.store)&&a.resolve(e.store)}).error(function(e,t){a.reject(e)}),a.promise},GetStoreByStoreID:function(n){var a=t.defer(),r=o.ApiUrl()+"master/stores";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.store)&&a.resolve(e.store)}).error(function(e,t){a.reject(e)}),a.promise},CreateStores:function(n){var a=t.defer(),r=o.ApiUrl()+"master/stores";n.METHODE="POST",n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.store)&&a.resolve(e.store)}).error(function(e,t){a.reject(e)}),a.promise},UpdateStores:function(n){var a=t.defer(),r=o.ApiUrl()+"master/stores";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.store)&&a.resolve(e.store)}).error(function(e,t){a.reject(e)}),a.promise},DeleteStores:function(n){var a=t.defer(),r=o.ApiUrl()+"master/stores";n.UUID=o.GetParameters().UUID;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.store)&&a.resolve(e.store)}).error(function(e,t){a.reject(e)}),a.promise},GetSummary:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-rpt1s?STORE_ID="+n.STORE_ID+"&TRANS_DATE="+n.TRANS_DATE,i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.get(r,s,c).success(function(e,t,o,n){angular.isDefined(e)&&a.resolve(e)}).error(function(e,t){a.reject(e)}),a.promise},GetSummaryBaru:function(n){var a=t.defer(),r=o.ApiUrl()+"laporan/trans-rpt-trans?STORE_ID="+n.STORE_ID+"&TGL="+n.TRANS_DATE,i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.get(r,s,c).success(function(e,t,o,n){angular.isDefined(e)&&a.resolve(e)}).error(function(e,t){a.reject(e)}),a.promise},GetProductTerjual:function(n){var a=t.defer(),r=o.ApiUrl()+"laporan/trans-rpt2s?STORE_ID="+n.STORE_ID+"&TGL="+n.TRANS_DATE,i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.get(r,s,c).success(function(e,t,o,n){angular.isDefined(e)&&a.resolve(e)}).error(function(e,t){a.reject(e)}),a.promise},GetLaporanAbsensi:function(n){var a=t.defer(),r=o.ApiUrl()+"laporan/trans-rpt-absensis",i={};i.STORE_ID=n.STORE_ID,angular.isDefined(n.BULAN)&&(i.BULAN=n.BULAN),angular.isDefined(n.TGL)?i.TGL=n.TGL:angular.isDefined(n.KARYAWAN_ID)&&(i.KARYAWAN_ID=n.KARYAWAN_ID);return e({method:"GET",url:r,params:i}).success(function(e){a.resolve(e)}),a.promise}}}]),angular.module("starter").factory("TransaksisFac",["$http","$q","UtilService",function(e,t,o){return{GetTransaksiHeaders:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-penjualan-headers";n.METHODE="GET",n.TRANS_DATE=n.TGL_SAVE;var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_TRANS_HEADER)?a.resolve(e.LIST_TRANS_HEADER):angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateTransaksiHeaders:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-penjualan-headers";n.METHODE="POST";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_TRANS_HEADER)?a.resolve(e.LIST_TRANS_HEADER):a.reject("data-exist")}).error(function(e,t){a.reject("server-error")}),a.promise},UpdateTransaksiHeaders:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-penjualan-headers",i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.put(r,s,c).success(function(e,t,o,n){angular.isDefined(e.result)&&"data-empty"==e.result?a.resolve([]):angular.isDefined(e.LIST_TRANS_HEADER)&&a.resolve(e.LIST_TRANS_HEADER[0])}).error(function(e,t){a.reject(e)}),a.promise},DeleteTransaksiHeaders:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-penjualan-headers",i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.delete(r,s,c).success(function(e,t,o,n){angular.isDefined(e.result)&&"data-empty"==e.result&&a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},GetTransaksiDetails:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-penjualan-details";n.METHODE="GET";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.LIST_TRANS_DETAILS)?a.resolve(e.LIST_TRANS_DETAILS):a.resolve([])}).error(function(e,t){a.reject(e)}),a.promise},CreateTranskasiDetails:function(n){var a=t.defer(),r=o.ApiUrl()+"transaksi/trans-penjualan-details";n.METHODE="POST";var i=o.SerializeObject(n),s=i.serialized,c=i.config;return e.post(r,s,c).success(function(e,t,o,n){angular.isDefined(e.error)?a.reject(e.error):a.resolve(e)}).error(function(e,t){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("CustomersLiteFac",["OfflineLiteFac","$rootScope","$q","$cordovaSQLite","UtilService",function(e,t,o,n,a){return{CreateCustomers:function(a,r){var i=o.defer(),s=[a.TGL_SAVE,a.ACCESS_GROUP,a.STORE_ID,a.CUSTOMER_ID,a.NAME,a.EMAIL,a.PHONE,a.DCRP_DETIL,a.STATUS];return n.execute(t.db,"INSERT INTO Tbl_Customers (TGL_SAVE,ACCESS_GROUP,STORE_ID,CUSTOMER_ID,NAME,EMAIL,PHONE,DCRP_DETIL,STATUS) VALUES (?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_Customers"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},GetCustomers:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Customers WHERE STORE_ID = ? AND STATUS = 1 GROUP BY NAME",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMaxCustomerID:function(e){var r=o.defer();return n.execute(t.db,"SELECT MAX(CAST(CUSTOMER_ID as decimal))AS MAX_CUSTOMER_ID FROM Tbl_Customers WHERE STORE_ID =?",[e]).then(function(e){if(e.rows.length>0&&e.rows.item(0).MAX_CUSTOMER_ID){var t=a.SqliteToArray(e)[0].MAX_CUSTOMER_ID,o=Number(t)+1;r.resolve(o)}else o=1,r.resolve(o)},function(e){r.reject(e)}),r.promise},GetCustomerByCustomerID:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Customers WHERE CUSTOMER_ID = ?",[e.CUSTOMER_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetCustomerByIDLocal:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Customers WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},UpdateCustomers:function(a){var r=o.defer(),i=[a.TGL_SAVE,a.NAME,a.EMAIL,a.PHONE,a.DCRP_DETIL,a.STATUS,a.ID_LOCAL];return n.execute(t.db,"UPDATE Tbl_Customers SET TGL_SAVE=?,NAME=?,EMAIL=?,PHONE=?,DCRP_DETIL=?,STATUS=? WHERE ID_LOCAL=?",i).then(function(t){var o={NAMA_TABEL:"Tbl_Customers"};o.PRIMARY_KEY=a.ID_LOCAL,o.TYPE_ACTION=2,e.CreateOffline(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},DeleteCustomers:function(a){console.log(a);var r=o.defer();return n.execute(t.db,"UPDATE Tbl_Customers SET STATUS = 3 WHERE ID_LOCAL=?",[a.ID_LOCAL]).then(function(t){var o={NAMA_TABEL:"Tbl_Customers"};o.PRIMARY_KEY=a.ID_LOCAL,o.TYPE_ACTION=3,e.CreateOffline(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("KaryawansLiteFac",["OfflineLiteFac","UtilService","$rootScope","$q","$filter","$cordovaSQLite",function(e,t,o,n,a,r){return{GetKaryawans:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_Karyawans WHERE STORE_ID=? AND STATUS = 1",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetKaryawanByIDLocal:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_Karyawans WHERE ID_LOCAL =?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetMaxKaryawanID:function(e){var a=n.defer();return r.execute(o.db,"SELECT MAX(KARYAWAN_ID)AS MAX_KARYAWAN_ID FROM Tbl_Karyawans WHERE STORE_ID =?",[e]).then(function(o){if(o.rows.length>0&&o.rows.item(0).MAX_KARYAWAN_ID){var n=t.SqliteToArray(o)[0].MAX_KARYAWAN_ID.split(".")[2],r=t.StringPad(Number(n)+1,"0000"),i=e+"."+r;a.resolve(i)}else i=e+".0001",a.resolve(i)},function(e){a.reject(e)}),a.promise},GetKaryawansByKaryawanID:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_Karyawans WHERE KARYAWAN_ID=?",[e.KARYAWAN_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},CreateKaryawans:function(t,a){var i=n.defer(),s=[t.TGL_SAVE,t.ACCESS_GROUP,t.STORE_ID,t.KARYAWAN_ID,t.NAMA_DPN,t.NAMA_TGH,t.NAMA_BLK,t.KTP,t.TMP_LAHIR,t.TGL_LAHIR,t.GENDER,t.ALAMAT,t.STS_NIKAH,t.TLP,t.HP,t.EMAIL,t.STATUS];return r.execute(o.db,"INSERT INTO Tbl_Karyawans (TGL_SAVE,ACCESS_GROUP,STORE_ID,KARYAWAN_ID,NAMA_DPN,NAMA_TGH,NAMA_BLK,KTP,TMP_LAHIR,TGL_LAHIR,GENDER,ALAMAT,STS_NIKAH,TLP,HP,EMAIL,STATUS) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=a){var o={NAMA_TABEL:"Tbl_Karyawans"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateKaryawans:function(t){var a=n.defer(),i=t.ID_LOCAL,s=t.TGL_SAVE,c=(t.ACCESS_GROUP,t.STORE_ID,[s,t.NAMA_DPN,t.NAMA_TGH,t.NAMA_BLK,t.KTP,t.TMP_LAHIR,t.TGL_LAHIR,t.GENDER,t.ALAMAT,t.STS_NIKAH,t.TLP,t.HP,t.EMAIL,i]);return r.execute(o.db,"UPDATE Tbl_Karyawans SET TGL_SAVE = ?,NAMA_DPN  = ?,NAMA_TGH = ?,NAMA_BLK = ?,KTP = ?,TMP_LAHIR = ?,TGL_LAHIR = ?,GENDER = ?,ALAMAT = ?,STS_NIKAH = ?,TLP = ?,HP = ?,EMAIL = ? WHERE ID_LOCAL = ?",c).then(function(o){var n={NAMA_TABEL:"Tbl_Karyawans"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=2,e.CreateOffline(n).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise},DeleteKaryawans:function(t){var a=n.defer();return r.execute(o.db,"UPDATE Tbl_Karyawans SET STATUS = 3 WHERE KARYAWAN_ID=?",[t.KARYAWAN_ID]).then(function(o){var n={NAMA_TABEL:"Tbl_Karyawans"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=3,e.CreateOffline(n).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise},CreateKaryawanAbsensis:function(t,i){var s=n.defer(),c=[t.TGL_SAVE,t.OFLINE_ID,t.ACCESS_GROUP,t.STORE_ID,t.KARYAWAN_ID,a("date")(new Date,"yyyy-MM-dd"),a("date")(new Date,"HH:mm:ss"),t.LATITUDE,t.LONGITUDE,t.STATUS,t.DCRP_DETIL,t.ABSEN_IMAGE];return r.execute(o.db,"INSERT INTO Tbl_KaryawanAbsensis (TGL_SAVE,OFLINE_ID,ACCESS_GROUP,STORE_ID,KARYAWAN_ID,TGL,WAKTU,LATITUDE,LONGITUDE,STATUS,DCRP_DETIL,ABSEN_IMAGE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?)",c).then(function(t){if("FROM-SERVER"!=i){var o={NAMA_TABEL:"Tbl_KaryawanAbsensis"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){s.resolve(e)},function(e){s.reject(e)})}else s.resolve(t)},function(e){s.reject(e)}),s.promise},GetKaryawanAbsensis:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_KaryawanAbsensis WHERE TGL_SAVE = ? AND STORE_ID = ? AND KARYAWAN_ID = ? GROUP BY STATUS",[e.TGL_SAVE,e.STORE_ID,e.KARYAWAN_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetKaryawanAbsensisByIDLocal:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_KaryawanAbsensis WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("MerchantsLiteFac",["OfflineLiteFac","UtilService","$rootScope","$q","$cordovaSQLite",function(e,t,o,n,a){return{GetMerchants:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_Merchants WHERE STORE_ID = ? AND STATUS = 1",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMerchantByIDLocal:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_Merchants WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMaxMerchantID:function(e){var r=n.defer();return a.execute(o.db,"SELECT MAX(MERCHANT_ID)AS MAX_MERCHANT_ID FROM Tbl_Merchants WHERE STORE_ID =?",[e]).then(function(o){if(o.rows.length>0&&o.rows.item(0).MAX_MERCHANT_ID){var n=t.SqliteToArray(o)[0].MAX_MERCHANT_ID.split(".")[2],a=t.StringPad(Number(n)+1,"0000"),i=e+"."+a;r.resolve(i)}else i=e+".0001",r.resolve(i)},function(e){r.reject(e)}),r.promise},GetMerchantsByMerchantsId:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_Merchants WHERE MERCHANT_ID = ?",[e.MERCHANT_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateMerchants:function(t,r){var i=n.defer(),s=[t.TGL_SAVE,t.ACCESS_GROUP,t.STORE_ID,t.TYPE_PAY_ID,t.TYPE_PAY_NM,t.BANK_ID,t.BANK_NM,t.MERCHANT_ID,t.MERCHANT_NO,t.MERCHANT_NM,t.MERCHANT_TOKEN,t.MERCHANT_URL,t.DCRP_DETIL,t.STATUS];return a.execute(o.db,"INSERT INTO Tbl_Merchants (TGL_SAVE,ACCESS_GROUP,STORE_ID,TYPE_PAY_ID,TYPE_PAY_NM,BANK_ID,BANK_NM,MERCHANT_ID,MERCHANT_NO,MERCHANT_NM,MERCHANT_TOKEN,MERCHANT_URL,DCRP_DETIL,STATUS) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_Merchants"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateMerchants:function(t){var r=n.defer();return a.execute(o.db,"UPDATE Tbl_Merchants SET TYPE_PAY_ID=?,TYPE_PAY_NM=?,BANK_ID=?,BANK_NM=?,MERCHANT_NO=?,MERCHANT_NM=?,MERCHANT_TOKEN=?,MERCHANT_URL=?,DCRP_DETIL=?,STATUS=? WHERE ID_LOCAL=?",[t.TYPE_PAY_ID,t.TYPE_PAY_NM,t.BANK_ID,t.BANK_NM,t.MERCHANT_NO,t.MERCHANT_NM,t.MERCHANT_TOKEN,t.MERCHANT_URL,t.DCRP_DETIL,t.STATUS,t.ID_LOCAL]).then(function(o){var n={NAMA_TABEL:"Tbl_Merchants"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=2,e.CreateOffline(n).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},DeleteMerchants:function(t){var r=n.defer();return a.execute(o.db,"UPDATE Tbl_Merchants SET STATUS = 3 WHERE ID_LOCAL=?",[t.ID_LOCAL]).then(function(o){var n={NAMA_TABEL:"Tbl_Merchants"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=3,e.CreateOffline(n).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},GetMerchantTypes:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_MerchantTypes WHERE STATUS = 1",[]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMerchantTypeByIDLocal:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_MerchantTypes WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMaxMerchantTypeID:function(){var e=n.defer();return a.execute(o.db,"SELECT MAX(TYPE_PAY_ID)AS MAX_TYPE_PAY_ID FROM Tbl_MerchantTypes",[]).then(function(o){if(o.rows.length>0&&o.rows.item(0).MAX_TYPE_PAY_ID){var n=t.SqliteToArray(o)[0].MAX_TYPE_PAY_ID,a=Number(n)+1;e.resolve(a)}else a=1,e.resolve(a)},function(t){e.reject(t)}),e.promise},CreateMerchantTypes:function(t,r){var i=n.defer(),s=[t.TGL_SAVE,t.TYPE_PAY_ID,t.TYPE_PAY_NM,t.DCRP_DETIL,t.STATUS];return a.execute(o.db,"INSERT INTO Tbl_MerchantTypes(TGL_SAVE,TYPE_PAY_ID,TYPE_PAY_NM,DCRP_DETIL,STATUS) VALUES (?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_MerchantTypes"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateMerchantTypes:function(t,r){var i=n.defer(),s=t.TGL_SAVE,c=t.TYPE_PAY_ID,u=[s,t.TYPE_PAY_NM,t.DCRP_DETIL,t.STATUS,c];return a.execute(o.db,"UPDATE Tbl_MerchantTypes SET TGL_SAVE=?,TYPE_PAY_NM=?,DCRP_DETIL=?,STATUS=? WHERE TYPE_PAY_ID=?",u).then(function(o){if("FROM-SERVER"!=r){var n={NAMA_TABEL:"Tbl_MerchantTypes"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=2,e.CreateOffline(n).then(function(e){i.resolve(e)},function(e){i.reject(e)})}else i.resolve(o)},function(e){i.reject(e)}),i.promise},DeleteMerchantTypes:function(t){var r=n.defer();return a.execute(o.db,"UPDATE Tbl_MerchantTypes SET STATUS= 3 WHERE ID_LOCAL=?",[t.ID_LOCAL]).then(function(o){var n={NAMA_TABEL:"Tbl_MerchantTypes"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=3,e.CreateOffline(n).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},GetMerchantTypesByTypesID:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_MerchantTypes WHERE TYPE_PAY_ID=?",[e.TYPE_PAY_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMerchantBanks:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_MerchantBanks",[]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateMerchantBanks:function(e){var t=n.defer(),r=[e.TGL_SAVE,e.BANK_ID,e.BANK_NM,e.DCRP_DETIL,e.STATUS,e.IS_ONSERVER];return a.execute(o.db,"INSERT INTO Tbl_MerchantBanks(TGL_SAVE,BANK_ID,BANK_NM,DCRP_DETIL,STATUS,IS_ONSERVER) VALUES (?,?,?,?,?,?)",r).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},UpdateMerchantBanks:function(e){var t=n.defer(),r=e.TGL_SAVE,i=e.BANK_ID,s=[r,e.BANK_NM,e.DCRP_DETIL,e.STATUS,e.IS_ONSERVER,i];return a.execute(o.db,"UPDATE Tbl_MerchantBanks SET TGL_SAVE=?,BANK_NM=?,DCRP_DETIL=?,STATUS=?,IS_ONSERVER=? WHERE BANK_ID=?",s).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},DeleteMerchantBanks:function(e){var t=n.defer();return a.execute(o.db,"UPDATE Tbl_MerchantBanks SET STATUS=?,IS_ONSERVER=? WHERE BANK_ID=?",[e.STATUS,e.IS_ONSERVER,e.BANK_ID]).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},GetMerchantBanksByBanksID:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_MerchantBanks WHERE BANK_ID=?",[e.BANK_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("OpenCloseBookLiteFac",["OfflineLiteFac","UtilService","$rootScope","$q","$filter","$cordovaSQLite",function(e,t,o,n,a,r){return{GetOpenCloseBook:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_OpenCloseBook WHERE TGL_SAVE = ? AND STORE_ID = ? AND ACCESS_ID = ?",[e.TGL_SAVE,e.STORE_ID,e.ACCESS_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetOpenCloseBookByIDLocal:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_OpenCloseBook WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetOpenCloseBookByOpenCloseID:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_OpenCloseBook WHERE OPENCLOSE_ID = ?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetMaxOpenCloseBookID:function(e){var i=n.defer();return r.execute(o.db,"SELECT MAX(OPENCLOSE_ID)AS MAX_OPENCLOSE_ID FROM Tbl_OpenCloseBook WHERE ACCESS_ID =?",[e]).then(function(e){if(e.rows.length>0&&e.rows.item(0).MAX_OPENCLOSE_ID){var o=t.SqliteToArray(e)[0].MAX_OPENCLOSE_ID.split(".")[2],n=t.StringPad(Number(o)+1,"00000"),r=STORE_ID+"."+n;i.resolve(r)}else n=a("date")(new Date,"yyyyMMddHHmmss"),r=STORE_ID+"."+n,i.resolve(r)},function(e){i.reject(e)}),i.promise},GetOpenCloseBookWithStatus:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_OpenCloseBook WHERE TGL_SAVE = ? AND STORE_ID = ? AND ACCESS_ID = ? AND STATUS=?",[e.TGL_SAVE,e.STORE_ID,e.ACCESS_ID,e.STATUS]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},CreateOpenCloseBook:function(t,a){var i=n.defer(),s=[t.TGL_SAVE,t.ACCESS_GROUP,t.STORE_ID,t.ACCESS_ID,t.OPENCLOSE_ID,t.SPLIT_OPENCLOSE_ID,t.TGL_OPEN,t.TGL_CLOSE,t.CASHINDRAWER,t.ADDCASH,t.SELLCASH,t.TOTALCASH,t.TOTALCASH_ACTUAL,t.STATUS];return r.execute(o.db,"INSERT INTO Tbl_OpenCloseBook (TGL_SAVE,ACCESS_GROUP,STORE_ID,ACCESS_ID,OPENCLOSE_ID,SPLIT_OPENCLOSE_ID,TGL_OPEN,TGL_CLOSE,CASHINDRAWER,ADDCASH,SELLCASH,TOTALCASH,TOTALCASH_ACTUAL,STATUS) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=a){var o={NAMA_TABEL:"Tbl_OpenCloseBook"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateOpenCloseBook:function(t){var a=n.defer(),i=[t.TGL_CLOSE,t.SELLCASH,t.TOTALCASH,t.TOTALCASH_ACTUAL,t.STATUS,t.OPENCLOSE_ID];return r.execute(o.db,"UPDATE Tbl_OpenCloseBook SET TGL_CLOSE=?,SELLCASH=?,TOTALCASH=?,TOTALCASH_ACTUAL=?,STATUS=? WHERE OPENCLOSE_ID=?",i).then(function(o){var n={NAMA_TABEL:"Tbl_OpenCloseBook"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=2,e.CreateOffline(n).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise},GetSetoranBook:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_Setoran WHERE TGL_SAVE = ? AND STORE_ID = ? AND ACCESS_ID = ? GROUP BY OPENCLOSE_ID",[e.TGL_SAVE,e.STORE_ID,e.ACCESS_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetSetoranBookByIDLocal:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_Setoran WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetSetoranBookByOpenCloseID:function(e){var a=n.defer();return r.execute(o.db,"SELECT * FROM Tbl_Setoran WHERE OPENCLOSE_ID = ?",[e.OPENCLOSE_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);a.resolve(o)}else a.resolve([])},function(e){a.reject(e)}),a.promise},CreateSetoranBook:function(t,a){var i=n.defer(),s=[t.TGL_SAVE,t.ACCESS_GROUP,t.STORE_ID,t.ACCESS_ID,t.OPENCLOSE_ID,t.SPLIT_OPENCLOSE_ID,t.TGL_STORAN,t.TOTALCASH,t.NOMINAL_STORAN,t.SISA_STORAN,t.BANK_NM,t.BANK_NO,t.CREATE_AT,t.STATUS,t.DCRP_DETIL,t.STORAN_IMAGE];return r.execute(o.db,"INSERT INTO Tbl_Setoran (TGL_SAVE,ACCESS_GROUP,STORE_ID,ACCESS_ID,OPENCLOSE_ID,SPLIT_OPENCLOSE_ID,TGL_STORAN,TOTALCASH,NOMINAL_STORAN,SISA_STORAN,BANK_NM,BANK_NO,CREATE_AT,STATUS,DCRP_DETIL,STORAN_IMAGE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=a){var o={NAMA_TABEL:"Tbl_Setoran"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateSetoranBook:function(t){var a=n.defer(),i=(t.TGL_SAVE,t.ACCESS_GROUP,t.STORE_ID,t.ACCESS_ID,t.OPENCLOSE_ID),s=[t.TGL_STORAN,t.TOTALCASH,t.NOMINAL_STORAN,t.SISA_STORAN,t.BANK_NM,t.BANK_NO,t.CREATE_AT,t.STATUS,t.DCRP_DETIL,t.STORAN_IMAGE,i];return r.execute(o.db,"UPDATE Tbl_Setoran SET TGL_STORAN=?,TOTALCASH=?,NOMINAL_STORAN=?,SISA_STORAN=?,BANK_NM=?,BANK_NO=?,CREATE_AT=?,STATUS=?,DCRP_DETIL=?,STORAN_IMAGE=? WHERE OPENCLOSE_ID=?",s).then(function(o){var n={NAMA_TABEL:"Tbl_Setoran"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=2,e.CreateOffline(n).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("PPOBLiteFac",["$rootScope","$q","$cordovaSQLite","UtilService","OfflineLiteFac",function(e,t,o,n,a){return{GetHeaders:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBHeader WHERE STATUS = 1",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},SetHeaders:function(n,r){var i=t.defer(),s=[n.HEADER_ID,n.HEADER_NM,n.HEADER_DCRP,n.STATUS];return o.execute(e.db,"INSERT INTO Tbl_PPOBHeader (HEADER_ID,HEADER_NM,HEADER_DCRP,STATUS) VALUES (?,?,?,?)",s).then(function(e){if("FROM-SERVER"!=r){var t={NAMA_TABEL:"Tbl_PPOBHeader"};t.PRIMARY_KEY=e.insertId,t.TYPE_ACTION=1,a.CreateOffline(t).then(function(t){t.ID_LOCAL=e.insertId,i.resolve(t)},function(e){i.reject(e)})}else e.ID_LOCAL=e.insertId,i.resolve(e)},function(e){i.reject(e)}),i.promise},GetGroups:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBGroups WHERE STATUS = 1",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},CreateGroups:function(n,r){var i=t.defer(),s=[n.KELOMPOK_ID,n.KELOMPOK,n.STATUS];return o.execute(e.db,"INSERT INTO Tbl_PPOBGroups (KELOMPOK_ID,KELOMPOK,STATUS) VALUES (?,?,?)",s).then(function(e){if("FROM-SERVER"!=r){var t={NAMA_TABEL:"Tbl_PPOBGroups"};t.PRIMARY_KEY=e.insertId,t.TYPE_ACTION=1,a.CreateOffline(t).then(function(t){t.ID_LOCAL=e.insertId,i.resolve(t)},function(e){i.reject(e)})}else e.ID_LOCAL=e.insertId,i.resolve(e)},function(e){i.reject(e)}),i.promise},GetKategoris:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBKategoris WHERE STATUS = 1",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetKategorisByGroupID:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBKategoris WHERE KELOMPOK = ? AND STATUS = ?",[a.KELOMPOK,a.STATUS]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateKategoris:function(n,r){var i=t.defer(),s=[n.KELOMPOK_ID,n.KELOMPOK,n.KTG_ID,n.KTG_NM,n.KETERANGAN,n.STATUS];return o.execute(e.db,"INSERT INTO Tbl_PPOBKategoris (KELOMPOK_ID,KELOMPOK,KTG_ID,KTG_NM,KETERANGAN,STATUS) VALUES (?,?,?,?,?,?)",s).then(function(e){if("FROM-SERVER"!=r){var t={NAMA_TABEL:"Tbl_PPOBKategoris"};t.PRIMARY_KEY=e.insertId,t.TYPE_ACTION=1,a.CreateOffline(t).then(function(t){t.ID_LOCAL=e.insertId,i.resolve(t)},function(e){i.reject(e)})}else e.ID_LOCAL=e.insertId,i.resolve(e)},function(e){i.reject(e)}),i.promise},GetProducts:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBProducts",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetProductsByKategoriID:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBProducts WHERE KTG_ID=?",[a.KTG_ID]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateProducts:function(n,r){var i=t.defer(),s=[n.CODE,n.DENOM,n.HARGA_JUAL,n.ID_CODE,n.ID_PRODUK,n.KELOMPOK,n.KTG_ID,n.KTG_NM,n.NAME,n.TYPE_NM];return o.execute(e.db,"INSERT INTO Tbl_PPOBProducts (CODE,DENOM,HARGA_JUAL,ID_CODE,ID_PRODUK,KELOMPOK,KTG_ID,KTG_NM,NAME,TYPE_NM) VALUES (?,?,?,?,?,?,?,?,?,?)",s).then(function(e){if("FROM-SERVER"!=r){var t={NAMA_TABEL:"Tbl_PPOBProducts"};t.PRIMARY_KEY=e.insertId,t.TYPE_ACTION=1,a.CreateOffline(t).then(function(t){t.ID_LOCAL=e.insertId,i.resolve(t)},function(e){i.reject(e)})}else e.ID_LOCAL=e.insertId,i.resolve(e)},function(e){i.reject(e)}),i.promise},GetDetails:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBDetail WHERE STATUS = 1",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetDetailsByHeaderID:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBDetail WHERE HEADER_ID = ?",[a.HEADER_ID]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},SetDetails:function(n,r){var i=t.defer(),s=[n.HEADER_ID,n.HEADER_NM,n.PROVIDER_ID,n.PROVIDER_NM,n.DETAIL_ID,n.DETAIL_NM,n.DETAIL_DCRP,n.STATUS];return o.execute(e.db,"INSERT INTO Tbl_PPOBDetail (HEADER_ID,HEADER_NM,PROVIDER_ID,PROVIDER_NM,DETAIL_ID,DETAIL_NM,DETAIL_DCRP,STATUS) VALUES (?,?,?,?,?,?,?,?)",s).then(function(e){if("FROM-SERVER"!=r){var t={NAMA_TABEL:"Tbl_PPOBDetail"};t.PRIMARY_KEY=e.insertId,t.TYPE_ACTION=1,a.CreateOffline(t).then(function(t){t.ID_LOCAL=e.insertId,i.resolve(t)},function(e){i.reject(e)})}else e.ID_LOCAL=e.insertId,i.resolve(e)},function(e){i.reject(e)}),i.promise},GetNominals:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBNominals WHERE STATUS = 1",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},GetNominalsByDetailID:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_PPOBNominals WHERE DETAIL_ID = ?",[a.DETAIL_ID]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},SetNominals:function(n,r){var i=t.defer(),s=[n.ID_SERVER,n.ACCESS_GROUP,n.STORE_ID,n.DETAIL_ID,n.KODE,n.KETERANGAN,n.NOMINAL,n.HARGA_KG,n.HARGA_JUAL,n.STATUS];return o.execute(e.db,"INSERT INTO Tbl_PPOBNominals (ID_SERVER,ACCESS_GROUP,STORE_ID,DETAIL_ID,KODE,KETERANGAN,NOMINAL,HARGA_KG,HARGA_JUAL,STATUS) VALUES (?,?,?,?,?,?,?,?,?,?)",s).then(function(e){if("FROM-SERVER"!=r){var t={NAMA_TABEL:"Tbl_PPOBNominals"};t.PRIMARY_KEY=e.insertId,t.TYPE_ACTION=1,a.CreateOffline(t).then(function(t){t.ID_LOCAL=e.insertId,i.resolve(t)},function(e){i.reject(e)})}else e.ID_LOCAL=e.insertId,i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("starter").factory("ProductStockLiteFac",["OfflineLiteFac","UtilService","$rootScope","$q","$cordovaSQLite",function(e,t,o,n,a){return{GetProductStocks:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_Product_Stocks WHERE PRODUCT_ID = ?",[e.PRODUCT_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateProductStocks:function(t,r){var i=n.defer(),s=t.ID,c=t.TGL_SAVE,u=t.ACCESS_GROUP,l=t.STORE_ID,d=t.PRODUCT_ID,T=t.INPUT_STOCK,p=t.LAST_STOCK,m=t.CURRENT_STOCK,f=t.SISA_STOCK,E=t.INPUT_DATE,S=t.INPUT_TIME,_=t.CURRENT_DATE,h=t.CURRENT_TIME,I=t.STATUS,A=[s,c,u,l,d,p,T,m,f,E,S,_,h,t.DCRP_DETIL,I];return a.execute(o.db,"INSERT INTO Tbl_Product_Stocks (ID_SERVER,TGL_SAVE,ACCESS_GROUP,STORE_ID,PRODUCT_ID,LAST_STOCK,INPUT_STOCK,CURRENT_STOCK,SISA_STOCK,INPUT_DATE,INPUT_TIME,CURRENT_DATE,CURRENT_TIME,DCRP_DETIL,STATUS) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",A).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_Product_Stocks"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},GetProductStockByIDLocal:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_Product_Stocks WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("ProductsLiteFac",["OfflineLiteFac","$rootScope","$q","$cordovaSQLite","UtilService",function(e,t,o,n,a){return{GetProducts:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Products WHERE STORE_ID = ? AND STATUS = 1 GROUP BY PRODUCT_ID",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetProductsJoinImage:function(e){var r=o.defer();return n.execute(t.db,"SELECT Tbl_Products.*,Tbl_Product_Images.PRODUCT_IMAGE FROM Tbl_Products LEFT JOIN Tbl_Product_Images ON  Tbl_Products.PRODUCT_ID = Tbl_Product_Images.PRODUCT_ID WHERE Tbl_Products.STORE_ID = ? AND Tbl_Products.STATUS = 1 GROUP BY Tbl_Products.PRODUCT_ID",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetProductByIDLocal:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Products WHERE ID_LOCAL= ?",[e]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMaxProductID:function(e){var r=o.defer();return n.execute(t.db,"SELECT MAX(PRODUCT_ID)AS MAX_PRODUCT_ID FROM Tbl_Products WHERE STORE_ID =?",[e]).then(function(t){if(t.rows.length>0&&t.rows.item(0).MAX_PRODUCT_ID){var o=a.SqliteToArray(t)[0].MAX_PRODUCT_ID.split(".")[2],n=a.StringPad(Number(o)+1,"00000"),i=e+"."+n;r.resolve(i)}else i=e+".00001",r.resolve(i)},function(e){r.reject(e)}),r.promise},GetProductByProductID:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Products WHERE PRODUCT_ID = ?",[e.PRODUCT_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetProductsFavorite:function(e){var r=o.defer();if(e.IS_FAVORITE)var i="SELECT * FROM Tbl_Products WHERE STORE_ID = ? AND IS_FAVORITE=?",s=[e.STORE_ID,1];else i="SELECT * FROM Tbl_Products WHERE STORE_ID = ?",s=[e.STORE_ID];return n.execute(t.db,i,s).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetProductsByGroupID:function(e){var r=o.defer(),i=[e.STORE_ID,e.GROUP_ID];return n.execute(t.db,"SELECT * FROM Tbl_Products WHERE STORE_ID = ? AND GROUP_ID=? AND STATUS = 1",i).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateProducts:function(a,r){var i=o.defer(),s=[a.TGL_SAVE,a.ACCESS_GROUP,a.STORE_ID,a.GROUP_ID,a.GROUP_NM,a.PRODUCT_ID,a.PRODUCT_QR,a.PRODUCT_NM,a.CURRENT_STOCK,a.HARGA_JUAL,a.DISCOUNT,a.PRODUCT_WARNA,a.PRODUCT_SIZE,a.PRODUCT_SIZE_UNIT,a.PRODUCT_HEADLINE,a.UNIT_ID,a.UNIT_NM,a.STOCK_LEVEL,a.INDUSTRY_ID,a.INDUSTRY_NM,a.INDUSTRY_GRP_ID,a.INDUSTRY_GRP_NM,a.PROMO,a.STATUS,a.DCRP_DETIL,a.IMG_FILE,a.IS_FAVORITE];return n.execute(t.db,"INSERT INTO Tbl_Products (TGL_SAVE,ACCESS_GROUP,STORE_ID,GROUP_ID,GROUP_NM,PRODUCT_ID,PRODUCT_QR,PRODUCT_NM,CURRENT_STOCK,HARGA_JUAL,DISCOUNT,PRODUCT_WARNA,PRODUCT_SIZE,PRODUCT_SIZE_UNIT,PRODUCT_HEADLINE,UNIT_ID,UNIT_NM,STOCK_LEVEL,INDUSTRY_ID,INDUSTRY_NM,INDUSTRY_GRP_ID,INDUSTRY_GRP_NM,PROMO,STATUS,DCRP_DETIL,IMG_FILE,IS_FAVORITE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_Products"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateProducts:function(a,r){var i=o.defer();return n.execute(t.db,"UPDATE Tbl_Products SET TGL_SAVE=?,GROUP_ID=?,GROUP_NM=?,PRODUCT_QR=?,PRODUCT_NM=?,CURRENT_STOCK=?,HARGA_JUAL=?,DISCOUNT=?,PRODUCT_WARNA=?,PRODUCT_SIZE=?,PRODUCT_SIZE_UNIT=?,PRODUCT_HEADLINE=?,UNIT_ID=?,UNIT_NM=?,STOCK_LEVEL=?,INDUSTRY_ID=?,INDUSTRY_NM=?,INDUSTRY_GRP_ID=?,INDUSTRY_GRP_NM=?,STATUS=?,DCRP_DETIL=?,IMG_FILE=? WHERE ID_LOCAL=?",[a.TGL_SAVE,a.GROUP_ID,a.GROUP_NM,a.PRODUCT_QR,a.PRODUCT_NM,a.CURRENT_STOCK,a.HARGA_JUAL,a.DISCOUNT,a.PRODUCT_WARNA,a.PRODUCT_SIZE,a.PRODUCT_SIZE_UNIT,a.PRODUCT_HEADLINE,a.UNIT_ID,a.UNIT_NM,a.STOCK_LEVEL,a.INDUSTRY_ID,a.INDUSTRY_NM,a.INDUSTRY_GRP_ID,a.INDUSTRY_GRP_NM,a.STATUS,a.DCRP_DETIL,a.IMG_FILE,a.ID_LOCAL]).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_Products"};o.PRIMARY_KEY=a.ID_LOCAL,o.TYPE_ACTION=2,e.CreateOffline(o).then(function(e){i.resolve(e)},function(e){i.reject(e)})}else i.resolve(t)},function(e){i.reject(e)}),i.promise},DeleteProducts:function(a){var r=o.defer();return n.execute(t.db,"UPDATE Tbl_Products SET STATUS=3 WHERE ID_LOCAL=?",[a.ID_LOCAL]).then(function(t){var o={NAMA_TABEL:"Tbl_Products"};o.PRIMARY_KEY=a.ID_LOCAL,o.TYPE_ACTION=3,e.CreateOffline(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},UpdateProductsQuantity:function(e){var a=o.defer(),r=e.STORE_ID,i=e.PRODUCT_ID,s=[e.CURRENT_STOCK,r,i];return n.execute(t.db,"UPDATE Tbl_Products SET CURRENT_STOCK = ? WHERE STORE_ID = ? AND PRODUCT_ID = ?",s).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},GetProductImages:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Product_Images WHERE STORE_ID = ?",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetProductImagesByProductID:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Product_Images WHERE STORE_ID = ? AND PRODUCT_ID=?",[e.STORE_ID,e.PRODUCT_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateProductImages:function(e){var a=o.defer(),r=[e.TGL_SAVE,e.ACCESS_GROUP,e.STORE_ID,e.PRODUCT_ID,e.PRODUCT_IMAGE,e.STATUS,e.DCRP_DETIL,e.IS_ONSERVER];return n.execute(t.db,"INSERT INTO Tbl_Product_Images (TGL_SAVE,ACCESS_GROUP,STORE_ID,PRODUCT_ID,PRODUCT_IMAGE,STATUS,DCRP_DETIL,IS_ONSERVER) VALUES (?,?,?,?,?,?,?,?)",r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},UpdateProductImages:function(e){var a=o.defer(),r=e.PRODUCT_ID,i=[e.PRODUCT_IMAGE,e.IS_ONSERVER,r];return n.execute(t.db,"UPDATE Tbl_Product_Images SET PRODUCT_IMAGE=?,IS_ONSERVER=? WHERE PRODUCT_ID =?",i).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},AddOrRemoveFromFavorite:function(e){var a=o.defer();return n.execute(t.db,"UPDATE Tbl_Products SET IS_FAVORITE = ? WHERE PRODUCT_ID = ?",[e.IS_FAVORITE,e.PRODUCT_ID]).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},CreateProductGroups:function(a,r){var i=o.defer(),s=[a.ACCESS_GROUP,a.STORE_ID,a.GROUP_ID,a.GROUP_NM,a.STATUS,a.NOTE];return n.execute(t.db,"INSERT INTO Tbl_Product_Groups (ACCESS_GROUP,STORE_ID,GROUP_ID,GROUP_NM,STATUS,NOTE) VALUES (?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_Product_Groups"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},GetProductGroups:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Product_Groups WHERE STORE_ID= ? AND STATUS = 1",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMaxProductGroups:function(e){var r=o.defer();return n.execute(t.db,"SELECT MAX(GROUP_ID)AS MAX_GROUP_ID FROM Tbl_Product_Groups WHERE STORE_ID =?",[e]).then(function(t){if(t.rows.length>0&&t.rows.item(0).MAX_GROUP_ID){var o=a.SqliteToArray(t)[0].MAX_GROUP_ID.split(".")[2],n=a.StringPad(Number(o)+1,"00000"),i=e+"."+n;r.resolve(i)}else i=e+".00001",r.resolve(i)},function(e){r.reject(e)}),r.promise},GetProductGroupsByGroupID:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Product_Groups WHERE GROUP_ID =?",[e.GROUP_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetProductGroupsByIDLocal:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Product_Groups WHERE ID_LOCAL =?",[e]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},UpdateProductGroups:function(a){var r=o.defer(),i=a.ID_LOCAL,s=[a.GROUP_NM,a.STATUS,a.NOTE,i];return n.execute(t.db,"UPDATE Tbl_Product_Groups SET GROUP_NM = ?,STATUS = ?,NOTE = ? WHERE ID_LOCAL = ?",s).then(function(t){var o={NAMA_TABEL:"Tbl_Product_Groups"};o.PRIMARY_KEY=a.ID_LOCAL,o.TYPE_ACTION=2,e.CreateOffline(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},DeleteProductGroups:function(a){var r=o.defer();return n.execute(t.db,"UPDATE Tbl_Product_Groups SET STATUS = 3 WHERE ID_LOCAL = ?",[a.ID_LOCAL]).then(function(t){var o={NAMA_TABEL:"Tbl_Product_Groups"};o.PRIMARY_KEY=a.ID_LOCAL,o.TYPE_ACTION=3,e.CreateOffline(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("ProvinsisLiteFac",["$rootScope","$q","$cordovaSQLite","UtilService",function(e,t,o,n){return{SetProvinsis:function(n){var a=t.defer(),r=[n.PROVINCE_ID,n.PROVINCE];return o.execute(e.db,"INSERT INTO Tbl_Provinsis (PROVINCE_ID,PROVINCE) VALUES (?,?)",r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},GetProvinsis:function(){var a=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_Provinsis",[]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);a.resolve(t)}else a.resolve([])},function(e){a.reject(e)}),a.promise},SetKotas:function(n){var a=t.defer(),r=[n.PROVINCE_ID,n.PROVINCE,n.CITY_ID,n.CITY_NAME,n.TYPE,n.POSTAL_CODE];return o.execute(e.db,"INSERT INTO Tbl_Kotas (PROVINCE_ID,PROVINCE,CITY_ID,CITY_NAME,TYPE,POSTAL_CODE) VALUES (?,?,?,?,?,?)",r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},GetKotas:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_Kotas WHERE PROVINCE_ID=?",[a.PROVINCE_ID]).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("SaveToBillLiteFac",["$rootScope","$q","$cordovaSQLite","UtilService","$filter",function(e,t,o,n,a){return{SetSaveToBill:function(n){var r=t.defer(),i=[a("date")(new Date,"yyyy-MM-dd"),n.ACCESS_GROUP,n.STORE_ID,n.ACCESS_ID,n.TRANS_ID,n.ALIAS_TRANS_ID];return o.execute(e.db,"INSERT INTO Tbl_SaveBill (TGL_SAVE,ACCESS_GROUP,STORE_ID,ACCESS_ID,TRANS_ID,ALIAS_TRANS_ID) VALUES (?,?,?,?,?,?)",i).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},GetSaveToBillByDate:function(r){var i=t.defer(),s=(a("date")(new Date,"yyyy-MM-dd"),[r.TGL_SAVE,r.ACCESS_GROUP,r.STORE_ID,r.ACCESS_ID]);return o.execute(e.db,"SELECT * FROM Tbl_SaveBill WHERE TGL_SAVE = ? AND ACCESS_GROUP = ? AND STORE_ID = ? AND ACCESS_ID =?",s).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);i.resolve(t)}else i.resolve([])},function(e){i.reject(e)}),i.promise},GetSaveToBillByNomorTrans:function(a){var r=t.defer(),i=[a.TGL_SAVE,a.ACCESS_GROUP,a.STORE_ID,a.ACCESS_ID,a.TRANS_ID];return o.execute(e.db,"SELECT * FROM Tbl_SaveBill WHERE TGL_SAVE=? AND ACCESS_GROUP=? AND STORE_ID=? AND ACCESS_ID = ? AND TRANS_ID = ?",i).then(function(e){if(e.rows.length>0){var t=n.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},DeleteSaveToBillByNomorTrans:function(n){var a=t.defer();return o.execute(e.db,"DELETE FROM Tbl_SaveBill WHERE TRANS_ID = ?",[n]).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("ShopCartLiteFac",["OfflineLiteFac","$rootScope","$q","$cordovaSQLite","UtilService",function(e,t,o,n,a){var r=function(e,r){var i=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_ShopCart WHERE PRODUCT_ID = ? AND TRANS_ID = ?",[e,r]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);i.resolve(t)}else i.resolve([])},function(e){i.reject(e)}),i.promise};return{GetShopCartByNomorTrans:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_ShopCart WHERE TRANS_ID = ? AND QTY_INCART > 0 GROUP BY PRODUCT_ID",[e.TRANS_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetShopCartByIDLocal:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_ShopCart WHERE ID_LOCAL =?",[e]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateShopCart:function(e){var a=o.defer(),r=[e.TGL_SAVE,e.TRANS_DATE,e.ACCESS_GROUP,e.ACCESS_ID,e.GOLONGAN,e.STORE_ID,e.TRANS_TYPE,e.TRANS_ID,e.PRODUCT_ID,e.PRODUCT_NM,e.PRODUCT_PROVIDER,e.PRODUCT_PROVIDER_NO,e.PRODUCT_PROVIDER_NM,e.UNIT_ID,e.UNIT_NM,e.HARGA_JUAL,e.DISCOUNT,e.QTY_INCART,e.PROMO,e.STATUS];return n.execute(t.db,"INSERT INTO Tbl_ShopCart (TGL_SAVE,TRANS_DATE,ACCESS_GROUP,ACCESS_ID,GOLONGAN,STORE_ID,TRANS_TYPE,TRANS_ID,PRODUCT_ID,PRODUCT_NM,PRODUCT_PROVIDER,PRODUCT_PROVIDER_NO,PRODUCT_PROVIDER_NM,UNIT_ID,UNIT_NM,HARGA_JUAL,DISCOUNT,QTY_INCART,PROMO,STATUS) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},UpdateShopCartQty:function(e){var a=o.defer(),r=e.TRANS_ID,i=e.PRODUCT_ID,s=[e.QTY_INCART,r,i];return n.execute(t.db,"UPDATE Tbl_ShopCart SET QTY_INCART = ? WHERE TRANS_ID = ? AND PRODUCT_ID =?",s).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},UpdateStatusPembelian:function(a){var i=o.defer(),s=a.STATUS,c=a.TRANS_ID,u=a.PRODUCT_ID,l=[s,c,u];return n.execute(t.db,"UPDATE Tbl_ShopCart SET STATUS = ? WHERE TRANS_ID = ? AND PRODUCT_ID =?",l).then(function(t){r(u,c).then(function(t){var o={NAMA_TABEL:"Tbl_ShopCart"};o.PRIMARY_KEY=t[0].ID_LOCAL,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(e){i.reject(e)})},function(e){i.reject(e)}),i.promise},DeleteShopCartByNoTransAndItemId:function(e){var a=o.defer(),r=[e.TRANS_ID,e.PRODUCT_ID];return n.execute(t.db,"DELETE FROM Tbl_ShopCart WHERE TRANS_ID = ? AND PRODUCT_ID =?",r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},DeleteItemFromShopCartByNoTrans:function(e){var a=o.defer();return n.execute(t.db,"DELETE FROM Tbl_ShopCart WHERE TRANS_ID = ?",[e]).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},UpdateShopCartStatusWhenInsert:function(e){var a=o.defer(),r=e.TRANS_ID,i=e.PRODUCT_ID,s=[e.IS_ONSERVER,r,i];return n.execute(t.db,"UPDATE Tbl_ShopCart SET IS_ONSERVER = ? WHERE TRANS_ID = ? AND PRODUCT_ID =?",s).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},GetShopCartByItemAndNoTrans:r,GetShopCartPPOBByIDLocal:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_ShopCartPPOB WHERE ID_LOCAL = ?",[e]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateShopCartPPOB:function(a,r){var i=o.defer(),s=[a.TGL_SAVE,a.TRANS_DATE,a.ACCESS_GROUP,a.ACCESS_ID,a.STORE_ID,a.TRANS_ID,a.PEMBAYARAN,a.MSISDN,a.ID_PELANGGAN,a.CODE,a.DENOM,a.HARGA_JUAL,a.ID_CODE,a.ID_PRODUK,a.KELOMPOK,a.KTG_ID,a.KTG_NM,a.NAME,a.TYPE_NM,a.STATUS_BELI];return n.execute(t.db,"INSERT INTO Tbl_ShopCartPPOB (TGL_SAVE,TRANS_DATE,ACCESS_GROUP,ACCESS_ID,STORE_ID,TRANS_ID,PEMBAYARAN,MSISDN,ID_PELANGGAN,CODE,DENOM,HARGA_JUAL,ID_CODE,ID_PRODUK,KELOMPOK,KTG_ID,KTG_NM,NAME,TYPE_NM,STATUS_BELI) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_ShopCartPPOB"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateShopCartPPOBStatus:function(e){var a=o.defer(),r=[e.STATUS_BELI,e.PRODUCT_ID,e.TRANS_ID];return n.execute(t.db,"UPDATE Tbl_ShopCartPPOB SET STATUS_BELI = ? WHERE ID_PRODUK = ? AND TRANS_ID =?",r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}}]),angular.module("starter").factory("StoresLiteFac",["OfflineLiteFac","UtilService","$rootScope","$q","$cordovaSQLite",function(e,t,o,n,a){return{GetStores:function(e){var r=n.defer(),i='SELECT * FROM Tbl_Stores WHERE ACCESS_GROUP=? AND ACCESS_ID LIKE "%'+e.ACCESS_ID+'%" AND STATUS = 1';return a.execute(o.db,i,[e.ACCESS_GROUP]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMaxStoreID:function(e){var r=n.defer();return a.execute(o.db,"SELECT MAX(STORE_ID)AS MAX_STORE_ID FROM Tbl_Stores WHERE ACCESS_GROUP=?",[e]).then(function(o){if(o.rows.length>0&&o.rows.item(0).MAX_STORE_ID){var n=t.SqliteToArray(o)[0].MAX_STORE_ID.split(".")[1],a=t.StringPad(Number(n)+1,"0000"),i=e+"."+a;r.resolve(i)}else i=e+".0001",r.resolve(i)},function(e){r.reject(e)}),r.promise},GetStoreByIDLocal:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_Stores WHERE ID_LOCAL=?",[e]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetStoreByStoreID:function(e){var r=n.defer();return a.execute(o.db,"SELECT * FROM Tbl_Stores WHERE STORE_ID=?",[e.STORE_ID]).then(function(e){if(e.rows.length>0){var o=t.SqliteToArray(e);r.resolve(o)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateStores:function(t,r){var i=n.defer(),s=[t.TGL_SAVE,t.ACCESS_GROUP,t.STORE_ID,t.STORE_NM,t.ACCESS_ID,t.UUID,t.PLAYER_ID,t.PROVINCE_ID,t.PROVINCE_NM,t.CITY_ID,t.CITY_NAME,t.ALAMAT,t.PIC,t.TLP,t.FAX,t.STATUS,t.START,t.END,t.DCRP_DETIL,t.INDUSTRY_ID,t.INDUSTRY_NM,t.INDUSTRY_GRP_ID,t.INDUSTRY_GRP_NM,t.LONGITUDE,t.LATITUDE];return a.execute(o.db,"INSERT INTO Tbl_Stores (TGL_SAVE,ACCESS_GROUP,STORE_ID,STORE_NM,ACCESS_ID,UUID,PLAYER_ID,PROVINCE_ID,PROVINCE_NM,CITY_ID,CITY_NAME,ALAMAT,PIC,TLP,FAX,STATUS,START,END,DCRP_DETIL,INDUSTRY_ID,INDUSTRY_NM,INDUSTRY_GRP_ID,INDUSTRY_GRP_NM,LONGITUDE,LATITUDE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",s).then(function(t){if("FROM-SERVER"!=r){var o={NAMA_TABEL:"Tbl_Stores"};o.PRIMARY_KEY=t.insertId,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){e.ID_LOCAL=t.insertId,i.resolve(e)},function(e){i.reject(e)})}else t.ID_LOCAL=t.insertId,i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateStores:function(t){console.log(t);var r=n.defer(),i=t.TGL_SAVE,s=t.ACCESS_GROUP,c=t.STORE_ID,u=[i,s,t.STORE_NM,t.ACCESS_ID,t.UUID,t.PLAYER_ID,t.PROVINCE_ID,t.PROVINCE_NM,t.CITY_ID,t.CITY_NAME,t.ALAMAT,t.PIC,t.TLP,t.FAX,t.STATUS,t.START,t.END,t.DCRP_DETIL,t.INDUSTRY_ID,t.INDUSTRY_NM,t.INDUSTRY_GRP_ID,t.INDUSTRY_GRP_NM,t.LONGITUDE,t.LATITUDE,c];return a.execute(o.db,"UPDATE Tbl_Stores SET TGL_SAVE=?,ACCESS_GROUP=?,STORE_NM=?,ACCESS_ID=?,UUID=?,PLAYER_ID=?,PROVINCE_ID=?,PROVINCE_NM=?,CITY_ID=?,CITY_NAME=?,ALAMAT=?,PIC=?,TLP=?,FAX=?,STATUS=?,START=?,END=?,DCRP_DETIL=?,INDUSTRY_ID =?,INDUSTRY_NM =?,INDUSTRY_GRP_ID =?,INDUSTRY_GRP_NM =?,LONGITUDE =?,LATITUDE =? WHERE STORE_ID=?",u).then(function(o){console.log(o);var n={NAMA_TABEL:"Tbl_Stores"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=2,e.CreateOffline(n).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){console.log(e),r.reject(e)}),r.promise},DeleteStores:function(t){var r=n.defer(),i=[3,t.STORE_ID];return a.execute(o.db,"UPDATE Tbl_Stores SET STATUS =? WHERE STORE_ID=?",i).then(function(o){var n={NAMA_TABEL:"Tbl_Stores"};n.PRIMARY_KEY=t.ID_LOCAL,n.TYPE_ACTION=3,e.CreateOffline(n).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("SummaryLiteFac",["$rootScope","$q","$cordovaSQLite","UtilService",function(e,t,o,n){return{CountTransaksiComplete:function(a){var r=t.defer();return o.execute(e.db,"SELECT count(id) AS jlhcomplete FROM Tbl_Transaksis WHERE STORE_ID=? AND STATUS = ? AND TGL_SAVE = ?",[a.STORE_ID,a.STATUS,a.TGL_SAVE]).then(function(e){var t=n.SqliteToArray(e);r.resolve(t)},function(e){r.reject(e)}),r.promise},SumTransHeaderComplete:function(a,r,i,s){var c=t.defer();return o.execute(e.db,"SELECT sum(TOTAL_HARGA) AS TOTAL FROM Tbl_CustBuyTrans WHERE ACCESS_UNIX = ? AND OUTLET_ID = ? AND STATUS_BUY = ? AND TRANS_DATE = ?",[a,r,i,s]).then(function(e){var t=n.SqliteToArray(e);c.resolve(t)},function(e){c.reject(e)}),c.promise},SumTransHeaderCompletePerShift:function(a){var r=t.defer();return o.execute(e.db,"SELECT sum(TOTAL_HARGA) AS TOTAL FROM Tbl_Transaksis WHERE OPENCLOSE_ID=? AND STORE_ID = ? AND ACCESS_ID = ? AND STATUS = ? AND TGL_SAVE = ?",[a.OPENCLOSE_ID,a.STORE_ID,a.ACCESS_ID,a.STATUS,a.TGL_SAVE]).then(function(e){var t=n.SqliteToArray(e);r.resolve(t)},function(e){r.reject(e)}),r.promise},JoinTransWithShopCart:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_Transaksis JOIN Tbl_ShopCart ON  Tbl_Transaksis.TRANS_ID = Tbl_ShopCart.TRANS_ID WHERE Tbl_Transaksis.STORE_ID=? AND Tbl_Transaksis.STATUS = ?",[a.STORE_ID,a.STATUS]).then(function(e){var t=n.SqliteToArray(e);r.resolve(t)},function(e){r.reject(e)}),r.promise},BayarCash:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM Tbl_Transaksis WHERE STATUS = ? AND TGL_SAVE = ? AND TYPE_PAY_ID = ? AND STORE_ID = ?",[a.STATUS,a.TGL_SAVE,a.TYPE_PAY_ID,a.STORE_ID]).then(function(e){var t=n.SqliteToArray(e);r.resolve(t)},function(e){r.reject(e)}),r.promise},JumlahTransPerMethodPembayaran:function(a){var r=t.defer();return o.execute(e.db,"SELECT  COUNT(case TYPE_PAY_ID when 0 then 1 else null end) AS 'TUNAI',COUNT(case TYPE_PAY_ID when 2 then 1 else null end) AS 'EDC',COUNT(case TYPE_PAY_ID when 3 then 1 else null end) AS 'ACC' FROM Tbl_Transaksis WHERE STATUS = ? AND TGL_SAVE = ? AND STORE_ID = ?",[a.STATUS,a.TGL_SAVE,a.STORE_ID]).then(function(e){var t=n.SqliteToArray(e);r.resolve(t[0])},function(e){r.reject(e)}),r.promise},TotalRupiahPerMethodPembayaran:function(a){var r=t.defer();return o.execute(e.db,"SELECT  SUM(case TYPE_PAY_ID when 0 then TOTAL_HARGA else 0 end) AS 'TUNAI',SUM(case TYPE_PAY_ID when 2 then TOTAL_HARGA else 0 end) AS 'EDC',SUM(case TYPE_PAY_ID when 3 then TOTAL_HARGA else 0 end) AS 'ACC' FROM Tbl_Transaksis WHERE STATUS = ? AND TGL_SAVE = ? AND STORE_ID = ?",[a.STATUS,a.TGL_SAVE,a.STORE_ID]).then(function(e){var t=n.SqliteToArray(e);r.resolve(t[0])},function(e){r.reject(e)}),r.promise},SumItemProductAllTrans:function(a){var r=t.defer();return o.execute(e.db,"SELECT PRODUCT_NM,SUM(QTY_INCART) AS 'TOTAL' FROM Tbl_ShopCart WHERE STATUS = ? AND TGL_SAVE = ? AND STORE_ID = ? GROUP BY PRODUCT_ID ORDER BY TOTAL DESC",[a.STATUS,a.TGL_SAVE,a.STORE_ID]).then(function(e){var t=n.SqliteToArray(e),o={label:[],value:[]};angular.forEach(t,function(e,t){o.label.push(e.PRODUCT_NM),o.value.push(e.TOTAL)}),r.resolve(o)},function(e){r.reject(e)}),r.promise},SumItemProductWithHargaAllTrans:function(a){var r=t.defer();return o.execute(e.db,"SELECT PRODUCT_NM,SUM(QTY_INCART * HARGA_JUAL) AS 'TOTAL' FROM Tbl_ShopCart WHERE STATUS = ? AND TGL_SAVE = ? AND STORE_ID = ? GROUP BY PRODUCT_ID ORDER BY TOTAL DESC",[a.STATUS,a.TGL_SAVE,a.STORE_ID]).then(function(e){var t=n.SqliteToArray(e),o={label:[],value:[]};angular.forEach(t,function(e,t){o.label.push(e.PRODUCT_NM),o.value.push(e.TOTAL)}),r.resolve(o)},function(e){r.reject(e)}),r.promise},TopProductAllTrans:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM (SELECT PRODUCT_NM,SUM(QTY_INCART) AS 'TOTAL' FROM Tbl_ShopCart WHERE STATUS = ? AND TGL_SAVE = ? AND STORE_ID = ? GROUP BY PRODUCT_ID ORDER BY TOTAL DESC) LIMIT 5",[a.STATUS,a.TGL_SAVE,a.STORE_ID]).then(function(e){var t=n.SqliteToArray(e),o={label:[],value:[]};angular.forEach(t,function(e,t){o.label.push(e.PRODUCT_NM),o.value.push(e.TOTAL)}),r.resolve(o)},function(e){r.reject(e)}),r.promise},TopProductHargaAllTrans:function(a){var r=t.defer();return o.execute(e.db,"SELECT * FROM (SELECT PRODUCT_NM,SUM(QTY_INCART * HARGA_JUAL) AS 'TOTAL' FROM Tbl_ShopCart WHERE STATUS = ? AND TGL_SAVE = ? AND STORE_ID = ? GROUP BY PRODUCT_ID ORDER BY TOTAL DESC) LIMIT 5",[a.STATUS,a.TGL_SAVE,a.STORE_ID]).then(function(e){var t=n.SqliteToArray(e),o={label:[],value:[]};angular.forEach(t,function(e,t){o.label.push(e.PRODUCT_NM),o.value.push(e.TOTAL)}),r.resolve(o)},function(e){r.reject(e)}),r.promise}}}]),angular.module("starter").factory("TransaksisLiteFac",["OfflineLiteFac","$rootScope","$q","$cordovaSQLite","UtilService",function(e,t,o,n,a){return{GetTransaksiHeaders:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Transaksis WHERE TGL_SAVE = ? AND STORE_ID = ? GROUP BY TRANS_ID",[e.TGL_SAVE,e.STORE_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetMaxTransaksiHeaders:function(e){var r=o.defer();return n.execute(t.db,"SELECT MAX(TRANS_ID)AS MAX_TRANS_ID FROM Tbl_Transaksis WHERE TGL_SAVE = ? AND STORE_ID =? AND ACCESS_ID = ?",[e.TGL_SAVE,e.STORE_ID,e.ACCESS_ID]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetTransaksiHeaderByTransID:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Transaksis WHERE TRANS_ID = ? AND STATUS = 1",[e]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},GetTransaksiHeaderByTransIDStatusNol:function(e){var r=o.defer();return n.execute(t.db,"SELECT * FROM Tbl_Transaksis WHERE TRANS_ID = ? AND STATUS = 0",[e]).then(function(e){if(e.rows.length>0){var t=a.SqliteToArray(e);r.resolve(t)}else r.resolve([])},function(e){r.reject(e)}),r.promise},CreateTransaksiHeaders:function(a,r){var i=o.defer(),s=a.TGL_SAVE,c=a.ACCESS_GROUP,u=a.STORE_ID,l=a.ACCESS_ID,d=a.CASHIER_NAME,T=a.OPENCLOSE_ID,p=a.TRANS_ID,m=a.SPLIT_TRANS_ID,f=a.TRANS_DATE,E=a.TOTAL_PRODUCT,S=a.SUB_TOTAL_HARGA,_=a.PPN,h=a.TOTAL_HARGA,I=a.TYPE_PAY_ID,A=a.TYPE_PAY_NM,D=a.BANK_ID,R=a.BANK_NM,C=a.MERCHANT_ID,O=a.MERCHANT_NM,P=a.MERCHANT_NO,g=a.CONSUMER_ID,N=a.CONSUMER_NM,v=a.CONSUMER_EMAIL,b=a.CONSUMER_PHONE,U=a.STATUS,w=a.DCRP_DETIL,L=[s,c,u,l,d,T,p,m,f,E,S,_,h,I,A,D,R,C,O,P,g,N,v,b,U,w];return n.execute(t.db,"INSERT INTO Tbl_Transaksis (TGL_SAVE,ACCESS_GROUP,STORE_ID,ACCESS_ID,CASHIER_NAME,OPENCLOSE_ID,TRANS_ID,SPLIT_TRANS_ID,TRANS_DATE,TOTAL_PRODUCT,SUB_TOTAL_HARGA,PPN,TOTAL_HARGA,TYPE_PAY_ID,TYPE_PAY_NM,BANK_ID,BANK_NM,MERCHANT_ID,MERCHANT_NM,MERCHANT_NO,CONSUMER_ID,CONSUMER_NM,CONSUMER_EMAIL,CONSUMER_PHONE,STATUS,DCRP_DETIL) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",L).then(function(t){if("FROM-SERVER"!=r&&1==U){var o={NAMA_TABEL:"Tbl_Transaksis"};o.PRIMARY_KEY=a.TRANS_ID,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){i.resolve(e)},function(e){i.reject(e)})}else i.resolve(t)},function(e){i.reject(e)}),i.promise},UpdateTransaksiHeaders:function(a){var r=o.defer(),i=a.TGL_SAVE,s=a.ACCESS_GROUP,c=a.STORE_ID,u=a.ACCESS_ID,l=a.CASHIER_NAME,d=a.TRANS_ID,T=(a.SPLIT_TRANS_ID,a.TRANS_DATE),p=a.TOTAL_PRODUCT,m=a.SUB_TOTAL_HARGA,f=a.PPN,E=a.TOTAL_HARGA,S=a.TYPE_PAY_ID,_=a.TYPE_PAY_NM,h=a.BANK_ID,I=a.BANK_NM,A=a.MERCHANT_ID,D=a.MERCHANT_NM,R=a.MERCHANT_NO,C=a.CONSUMER_ID,O=a.CONSUMER_NM,P=a.CONSUMER_EMAIL,g=a.CONSUMER_PHONE,N=a.STATUS,v=a.DCRP_DETIL,b=[i,s,c,u,l,T,p,m,f,E,S,_,h,I,A,D,R,C,O,P,g,N,v,d];return n.execute(t.db,"UPDATE Tbl_Transaksis SET TGL_SAVE=?,ACCESS_GROUP=?,STORE_ID=?,ACCESS_ID=?,CASHIER_NAME=?,TRANS_DATE=?,TOTAL_PRODUCT=?,SUB_TOTAL_HARGA=?,PPN=?,TOTAL_HARGA=?,TYPE_PAY_ID=?,TYPE_PAY_NM=?,BANK_ID=?,BANK_NM=?,MERCHANT_ID=?,MERCHANT_NM=?,MERCHANT_NO=?,CONSUMER_ID=?,CONSUMER_NM=?,CONSUMER_EMAIL=?,CONSUMER_PHONE=?,STATUS=?,DCRP_DETIL=? WHERE TRANS_ID=?",b).then(function(t){if(1==N){var o={NAMA_TABEL:"Tbl_Transaksis"};o.PRIMARY_KEY=a.TRANS_ID,o.TYPE_ACTION=1,e.CreateOffline(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})}else r.resolve(t)},function(e){r.reject(e)}),r.promise},DeleteTransaksiHeadersByTransID:function(e){var a=o.defer();return n.execute(t.db,"DELETE FROM Tbl_Transaksis WHERE TRANS_ID = ?",[e]).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}}]);